(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}})();const gs=!1,fs=(e,t)=>e===t,me=Symbol("solid-proxy"),hs=typeof Proxy=="function",yt=Symbol("solid-track"),et={equals:fs};let Ot=Ht;const we=1,tt=2,Vt={owned:null,cleanups:null,context:null,owner:null};var X=null;let pt=null,ps=null,Y=null,Q=null,ye=null,ct=0;function Re(e,t){const s=Y,n=X,l=e.length===0,r=t===void 0?n:t,o=l?Vt:{owned:null,cleanups:null,context:r?r.context:null,owner:r},i=l?e:()=>e(()=>ve(()=>Ue(o)));X=o,Y=null;try{return Pe(i,!0)}finally{Y=s,X=n}}function T(e,t){t=t?Object.assign({},et,t):et;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=l=>(typeof l=="function"&&(l=l(s.value)),Gt(s,l));return[Kt.bind(s),n]}function L(e,t,s){const n=St(e,t,!1,we);Ve(n)}function ue(e,t,s){Ot=bs;const n=St(e,t,!1,we);n.user=!0,ye?ye.push(n):Ve(n)}function oe(e,t,s){s=s?Object.assign({},et,s):et;const n=St(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,Ve(n),Kt.bind(n)}function ms(e){return Pe(e,!1)}function ve(e){if(Y===null)return e();const t=Y;Y=null;try{return e()}finally{Y=t}}function dt(e){ue(()=>ve(e))}function ut(e){return X===null||(X.cleanups===null?X.cleanups=[e]:X.cleanups.push(e)),e}function bt(){return Y}function vs(e){const t=oe(e),s=oe(()=>wt(t()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}function Kt(){if(this.sources&&this.state)if(this.state===we)Ve(this);else{const e=Q;Q=null,Pe(()=>nt(this),!1),Q=e}if(Y){const e=this.observers?this.observers.length:0;Y.sources?(Y.sources.push(this),Y.sourceSlots.push(e)):(Y.sources=[this],Y.sourceSlots=[e]),this.observers?(this.observers.push(Y),this.observerSlots.push(Y.sources.length-1)):(this.observers=[Y],this.observerSlots=[Y.sources.length-1])}return this.value}function Gt(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Pe(()=>{for(let l=0;l<e.observers.length;l+=1){const r=e.observers[l],o=pt&&pt.running;o&&pt.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?Q.push(r):ye.push(r),r.observers&&Yt(r)),o||(r.state=we)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function Ve(e){if(!e.fn)return;Ue(e);const t=ct;_s(e,e.value,t)}function _s(e,t,s){let n;const l=X,r=Y;Y=X=e;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=we,e.owned&&e.owned.forEach(Ue),e.owned=null),e.updatedAt=s+1,Wt(o)}finally{Y=r,X=l}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?Gt(e,n):e.value=n,e.updatedAt=s)}function St(e,t,s,n=we,l){const r={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:X,context:X?X.context:null,pure:s};return X===null||X!==Vt&&(X.owned?X.owned.push(r):X.owned=[r]),r}function st(e){if(e.state===0)return;if(e.state===tt)return nt(e);if(e.suspense&&ve(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ct);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===we)Ve(e);else if(e.state===tt){const n=Q;Q=null,Pe(()=>nt(e,t[0]),!1),Q=n}}function Pe(e,t){if(Q)return e();let s=!1;t||(Q=[]),ye?s=!0:ye=[],ct++;try{const n=e();return ys(s),n}catch(n){s||(ye=null),Q=null,Wt(n)}}function ys(e){if(Q&&(Ht(Q),Q=null),e)return;const t=ye;ye=null,t.length&&Pe(()=>Ot(t),!1)}function Ht(e){for(let t=0;t<e.length;t++)st(e[t])}function bs(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:st(n)}for(t=0;t<s;t++)st(e[t])}function nt(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const n=e.sources[s];if(n.sources){const l=n.state;l===we?n!==t&&(!n.updatedAt||n.updatedAt<ct)&&st(n):l===tt&&nt(n,t)}}}function Yt(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=tt,s.pure?Q.push(s):ye.push(s),s.observers&&Yt(s))}}function Ue(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),l=s.observers;if(l&&l.length){const r=l.pop(),o=s.observerSlots.pop();n<l.length&&(r.sourceSlots[o]=n,l[n]=r,s.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ue(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ue(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ws(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Wt(e,t=X){throw ws(e)}function wt(e){if(typeof e=="function"&&!e.length)return wt(e());if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=wt(e[s]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}const $s=Symbol("fallback");function Nt(e){for(let t=0;t<e.length;t++)e[t]()}function xs(e,t,s={}){let n=[],l=[],r=[],o=0,i=t.length>1?[]:null;return ut(()=>Nt(r)),()=>{let a=e()||[],m=a.length,v,c;return a[yt],ve(()=>{let $,A,f,g,_,w,x,k,E;if(m===0)o!==0&&(Nt(r),r=[],n=[],l=[],o=0,i&&(i=[])),s.fallback&&(n=[$s],l[0]=Re(F=>(r[0]=F,s.fallback())),o=1);else if(o===0){for(l=new Array(m),c=0;c<m;c++)n[c]=a[c],l[c]=Re(b);o=m}else{for(f=new Array(m),g=new Array(m),i&&(_=new Array(m)),w=0,x=Math.min(o,m);w<x&&n[w]===a[w];w++);for(x=o-1,k=m-1;x>=w&&k>=w&&n[x]===a[k];x--,k--)f[k]=l[x],g[k]=r[x],i&&(_[k]=i[x]);for($=new Map,A=new Array(k+1),c=k;c>=w;c--)E=a[c],v=$.get(E),A[c]=v===void 0?-1:v,$.set(E,c);for(v=w;v<=x;v++)E=n[v],c=$.get(E),c!==void 0&&c!==-1?(f[c]=l[v],g[c]=r[v],i&&(_[c]=i[v]),c=A[c],$.set(E,c)):r[v]();for(c=w;c<m;c++)c in f?(l[c]=f[c],r[c]=g[c],i&&(i[c]=_[c],i[c](c))):l[c]=Re(b);l=l.slice(0,o=m),n=a.slice(0)}return l});function b($){if(r[c]=$,i){const[A,f]=T(c);return i[c]=f,t(a[c],A)}return t(a[c])}}}function p(e,t){return ve(()=>e(t||{}))}function Xe(){return!0}const Lt={get(e,t,s){return t===me?s:e.get(t)},has(e,t){return t===me?!0:e.has(t)},set:Xe,deleteProperty:Xe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Xe,deleteProperty:Xe}},ownKeys(e){return e.keys()}};function gt(e,...t){const s=t.length;if(hs&&me in e){const l=s>1?t.flat():t[0],r=t.map(o=>new Proxy({get(i){return o.includes(i)?e[i]:void 0},has(i){return o.includes(i)&&i in e},keys(){return o.filter(i=>i in e)}},Lt));return r.push(new Proxy({get(o){return l.includes(o)?void 0:e[o]},has(o){return l.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!l.includes(o))}},Lt)),r}const n=[];for(let l=0;l<=s;l++)n[l]={};for(const l of Object.getOwnPropertyNames(e)){let r=s;for(let a=0;a<t.length;a++)if(t[a].includes(l)){r=a;break}const o=Object.getOwnPropertyDescriptor(e,l);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?n[r][l]=o.value:Object.defineProperty(n[r],l,o)}return n}const qt=e=>`Stale read from <${e}>.`;function pe(e){const t="fallback"in e&&{fallback:()=>e.fallback};return oe(xs(()=>e.each,e.children,t||void 0))}function j(e){const t=e.keyed,s=oe(()=>e.when,void 0,void 0),n=t?s:oe(s,void 0,{equals:(l,r)=>!l==!r});return oe(()=>{const l=n();if(l){const r=e.children;return typeof r=="function"&&r.length>0?ve(()=>r(t?l:()=>{if(!ve(n))throw qt("Show");return s()})):r}return e.fallback},void 0,void 0)}function As(e){const t=vs(()=>e.children),s=oe(()=>{const n=t(),l=Array.isArray(n)?n:[n];let r=()=>{};for(let o=0;o<l.length;o++){const i=o,a=l[o],m=r,v=oe(()=>m()?void 0:a.when,void 0,void 0),c=a.keyed?v:oe(v,void 0,{equals:(b,$)=>!b==!$});r=()=>m()||(c()?[i,v,a]:void 0)}return r});return oe(()=>{const n=s()();if(!n)return e.fallback;const[l,r,o]=n,i=o.children;return typeof i=="function"&&i.length>0?ve(()=>i(o.keyed?r():()=>{if(ve(s)()?.[0]!==l)throw qt("Match");return r()})):i},void 0,void 0)}function je(e){return e}const he=e=>oe(()=>e());function Ss(e,t,s){let n=s.length,l=t.length,r=n,o=0,i=0,a=t[l-1].nextSibling,m=null;for(;o<l||i<r;){if(t[o]===s[i]){o++,i++;continue}for(;t[l-1]===s[r-1];)l--,r--;if(l===o){const v=r<n?i?s[i-1].nextSibling:s[r-i]:a;for(;i<r;)e.insertBefore(s[i++],v)}else if(r===i)for(;o<l;)(!m||!m.has(t[o]))&&t[o].remove(),o++;else if(t[o]===s[r-1]&&s[i]===t[l-1]){const v=t[--l].nextSibling;e.insertBefore(s[i++],t[o++].nextSibling),e.insertBefore(s[--r],v),t[l]=s[r]}else{if(!m){m=new Map;let c=i;for(;c<r;)m.set(s[c],c++)}const v=m.get(t[o]);if(v!=null)if(i<v&&v<r){let c=o,b=1,$;for(;++c<l&&c<r&&!(($=m.get(t[c]))==null||$!==v+b);)b++;if(b>v-i){const A=t[o];for(;i<v;)e.insertBefore(s[i++],A)}else e.replaceChild(s[i++],t[o++])}else o++;else t[o++].remove()}}}const Ft="_$DX_DELEGATE";function Ms(e,t,s,n={}){let l;return Re(r=>{l=r,t===document?e():d(t,e(),t.firstChild?null:void 0,s)},n.owner),()=>{l(),t.textContent=""}}function y(e,t,s,n){let l;const r=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},o=()=>(l||(l=r())).cloneNode(!0);return o.cloneNode=o,o}function $e(e,t=window.document){const s=t[Ft]||(t[Ft]=new Set);for(let n=0,l=e.length;n<l;n++){const r=e[n];s.has(r)||(s.add(r),t.addEventListener(r,ks))}}function z(e,t,s){s==null?e.removeAttribute(t):e.setAttribute(t,s)}function V(e,t){t==null?e.removeAttribute("class"):e.className=t}function ft(e,t,s,n){Array.isArray(s)?(e[`$$${t}`]=s[0],e[`$$${t}Data`]=s[1]):e[`$$${t}`]=s}function ie(e,t,s){if(!t)return s?z(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof s=="string"&&(n.cssText=s=void 0),s||(s={}),t||(t={});let l,r;for(r in s)t[r]==null&&n.removeProperty(r),delete s[r];for(r in t)l=t[r],l!==s[r]&&(n.setProperty(r,l),s[r]=l);return s}function te(e,t,s){s!=null?e.style.setProperty(t,s):e.style.removeProperty(t)}function Xt(e,t,s){return ve(()=>e(t,s))}function d(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return rt(e,t,n,s);L(l=>rt(e,t(),l,s),n)}function ks(e){let t=e.target;const s=`$$${e.type}`,n=e.target,l=e.currentTarget,r=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[s];if(a&&!t.disabled){const m=t[`${s}Data`];if(m!==void 0?a.call(t,m,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&r(t.host),!0},i=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();r(a[0]);for(let m=0;m<a.length-2&&(t=a[m],!!o());m++){if(t._$host){t=t._$host,i();break}if(t.parentNode===l)break}}else i();r(n)}function rt(e,t,s,n,l){for(;typeof s=="function";)s=s();if(t===s)return s;const r=typeof t,o=n!==void 0;if(e=o&&s[0]&&s[0].parentNode||e,r==="string"||r==="number"){if(r==="number"&&(t=t.toString(),t===s))return s;if(o){let i=s[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),s=Me(e,s,n,i)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t}else if(t==null||r==="boolean")s=Me(e,s,n);else{if(r==="function")return L(()=>{let i=t();for(;typeof i=="function";)i=i();s=rt(e,i,s,n)}),()=>s;if(Array.isArray(t)){const i=[],a=s&&Array.isArray(s);if($t(i,t,s,l))return L(()=>s=rt(e,i,s,n,!0)),()=>s;if(i.length===0){if(s=Me(e,s,n),o)return s}else a?s.length===0?Rt(e,i,n):Ss(e,s,i):(s&&Me(e),Rt(e,i));s=i}else if(t.nodeType){if(Array.isArray(s)){if(o)return s=Me(e,s,n,t);Me(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function $t(e,t,s,n){let l=!1;for(let r=0,o=t.length;r<o;r++){let i=t[r],a=s&&s[e.length],m;if(!(i==null||i===!0||i===!1))if((m=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))l=$t(e,i,a)||l;else if(m==="function")if(n){for(;typeof i=="function";)i=i();l=$t(e,Array.isArray(i)?i:[i],Array.isArray(a)?a:[a])||l}else e.push(i),l=!0;else{const v=String(i);a&&a.nodeType===3&&a.data===v?e.push(a):e.push(document.createTextNode(v))}}return l}function Rt(e,t,s=null){for(let n=0,l=t.length;n<l;n++)e.insertBefore(t[n],s)}function Me(e,t,s,n){if(s===void 0)return e.textContent="";const l=n||document.createTextNode("");if(t.length){let r=!1;for(let o=t.length-1;o>=0;o--){const i=t[o];if(l!==i){const a=i.parentNode===e;!r&&!o?a?e.replaceChild(l,i):e.insertBefore(l,s):a&&i.remove()}else r=!0}}else e.insertBefore(l,s);return[l]}var Is=y("<header class=header><h1 class=header__title>ZEROMOUNT</h1><span class=header__subtitle>Enginex0");function Cs(){return Is()}const xt=Symbol("store-raw"),Ie=Symbol("store-node"),_e=Symbol("store-has"),jt=Symbol("store-self");function Jt(e){let t=e[me];if(!t&&(Object.defineProperty(e,me,{value:t=new Proxy(e,Ts)}),!Array.isArray(e))){const s=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let l=0,r=s.length;l<r;l++){const o=s[l];n[o].get&&Object.defineProperty(e,o,{enumerable:n[o].enumerable,get:n[o].get.bind(t)})}}return t}function lt(e){let t;return e!=null&&typeof e=="object"&&(e[me]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ze(e,t=new Set){let s,n,l,r;if(s=e!=null&&e[xt])return s;if(!lt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,i=e.length;o<i;o++)l=e[o],(n=ze(l,t))!==l&&(e[o]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let a=0,m=o.length;a<m;a++)r=o[a],!i[r].get&&(l=e[r],(n=ze(l,t))!==l&&(e[r]=n))}return e}function ot(e,t){let s=e[t];return s||Object.defineProperty(e,t,{value:s=Object.create(null)}),s}function Be(e,t,s){if(e[t])return e[t];const[n,l]=T(s,{equals:!1,internal:!0});return n.$=l,e[t]=n}function Ps(e,t){const s=Reflect.getOwnPropertyDescriptor(e,t);return!s||s.get||!s.configurable||t===me||t===Ie||(delete s.value,delete s.writable,s.get=()=>e[me][t]),s}function Qt(e){bt()&&Be(ot(e,Ie),jt)()}function Es(e){return Qt(e),Reflect.ownKeys(e)}const Ts={get(e,t,s){if(t===xt)return e;if(t===me)return s;if(t===yt)return Qt(e),s;const n=ot(e,Ie),l=n[t];let r=l?l():e[t];if(t===Ie||t===_e||t==="__proto__")return r;if(!l){const o=Object.getOwnPropertyDescriptor(e,t);bt()&&(typeof r!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(r=Be(n,t,r)())}return lt(r)?Jt(r):r},has(e,t){return t===xt||t===me||t===yt||t===Ie||t===_e||t==="__proto__"?!0:(bt()&&Be(ot(e,_e),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Es,getOwnPropertyDescriptor:Ps};function it(e,t,s,n=!1){if(!n&&e[t]===s)return;const l=e[t],r=e.length;s===void 0?(delete e[t],e[_e]&&e[_e][t]&&l!==void 0&&e[_e][t].$()):(e[t]=s,e[_e]&&e[_e][t]&&l===void 0&&e[_e][t].$());let o=ot(e,Ie),i;if((i=Be(o,t,l))&&i.$(()=>s),Array.isArray(e)&&e.length!==r){for(let a=e.length;a<r;a++)(i=o[a])&&i.$();(i=Be(o,"length",r))&&i.$(e.length)}(i=o[jt])&&i.$()}function es(e,t){const s=Object.keys(t);for(let n=0;n<s.length;n+=1){const l=s[n];it(e,l,t[l])}}function Ns(e,t){if(typeof t=="function"&&(t=t(e)),t=ze(t),Array.isArray(t)){if(e===t)return;let s=0,n=t.length;for(;s<n;s++){const l=t[s];e[s]!==l&&it(e,s,l)}it(e,"length",n)}else es(e,t)}function Le(e,t,s=[]){let n,l=e;if(t.length>1){n=t.shift();const o=typeof n,i=Array.isArray(e);if(Array.isArray(n)){for(let a=0;a<n.length;a++)Le(e,[n[a]].concat(t),s);return}else if(i&&o==="function"){for(let a=0;a<e.length;a++)n(e[a],a)&&Le(e,[a].concat(t),s);return}else if(i&&o==="object"){const{from:a=0,to:m=e.length-1,by:v=1}=n;for(let c=a;c<=m;c+=v)Le(e,[c].concat(t),s);return}else if(t.length>1){Le(e[n],t,[n].concat(s));return}l=e[n],s=[n].concat(s)}let r=t[0];typeof r=="function"&&(r=r(l,s),r===l)||n===void 0&&r==null||(r=ze(r),n===void 0||lt(l)&&lt(r)&&!Array.isArray(r)?es(l,r):it(e,n,r))}function Je(...[e,t]){const s=ze(e||{}),n=Array.isArray(s),l=Jt(s);function r(...o){ms(()=>{n&&o.length===1?Ns(s,o[0]):Le(s,o)})}return[l,r]}const Z={BINARY:"/data/adb/modules/zeromount/bin/zm",DEVICE:"/dev/zeromount",DATA_DIR:"/data/adb/zeromount/",MODULE_PATHS:"/data/adb/zeromount/module_paths",EXCLUSION_FILE:"/data/adb/zeromount/.exclusion_list",EXCLUSION_META:"/data/adb/zeromount/.exclusion_meta.json",ACTIVITY_LOG:"/data/adb/zeromount/activity.log",VERBOSE_FLAG:"/data/adb/zeromount/.verbose"},Ls="https://github.com/backslashxx/zeromount",De="3.0.0",J=e=>new Promise(t=>setTimeout(t,e)),Ae=[{id:"1",name:"Hide Magisk Data",source:"/data/adb/magisk",target:"/dev/null",hits:156,createdAt:new Date(Date.now()-7200*1e3),active:!0},{id:"2",name:"Block Detection Paths",source:"/system/bin/su",target:"[BLOCKED]",hits:2341,createdAt:new Date(Date.now()-4320*60*1e3),active:!0},{id:"3",name:"Redirect Config",source:"/data/local/tmp/.config",target:"/data/adb/.hidden",hits:47,createdAt:new Date(Date.now()-720*60*1e3),active:!0}],Ne=[{uid:10234,packageName:"com.example.detector",appName:"Native Detector",excludedAt:new Date(Date.now()-2880*60*1e3)},{uid:10456,packageName:"com.securityapp.holmes",appName:"Holmes Security",excludedAt:new Date(Date.now()-300*60*1e3)},{uid:10789,packageName:"com.momo.detector",appName:"Momo Detector",excludedAt:new Date(Date.now()-1440*60*1e3)}],Fs=[{id:"1",type:"rule_added",message:"Rule added: /data/local -> /null",timestamp:new Date(Date.now()-120*1e3)},{id:"2",type:"uid_excluded",message:"UID 10234 excluded (com.detect.app)",timestamp:new Date(Date.now()-900*1e3)},{id:"3",type:"engine_enabled",message:"Engine enabled",timestamp:new Date(Date.now()-3600*1e3)}],Rs=[{name:"PlayIntegrityFix",ruleCount:12},{name:"LSPosed",ruleCount:8},{name:"FontModule",ruleCount:45}],mt=[{name:"PlayIntegrityFix",path:"/data/adb/modules/playintegrityfix",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!0,fileCount:12},{name:"LSPosed",path:"/data/adb/modules/zygisk_lsposed",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:8},{name:"Font Manager",path:"/data/adb/modules/fontmanager",hasSystem:!0,hasVendor:!0,hasProduct:!1,isLoaded:!0,fileCount:45},{name:"Busybox NDK",path:"/data/adb/modules/busybox-ndk",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:156},{name:"Shamiko",path:"/data/adb/modules/shamiko",hasSystem:!1,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:0}],Ds=[{uid:10001,packageName:"com.android.chrome",appName:"Chrome",isSystemApp:!1,iconPath:"link/icons/com.android.chrome.png"},{uid:10002,packageName:"com.whatsapp",appName:"WhatsApp",isSystemApp:!1,iconPath:"link/icons/com.whatsapp.png"},{uid:10003,packageName:"com.instagram.android",appName:"Instagram",isSystemApp:!1,iconPath:"link/icons/com.instagram.android.png"},{uid:10004,packageName:"com.spotify.music",appName:"Spotify",isSystemApp:!1,iconPath:"link/icons/com.spotify.music.png"},{uid:10005,packageName:"com.twitter.android",appName:"X (Twitter)",isSystemApp:!1,iconPath:"link/icons/com.twitter.android.png"},{uid:10006,packageName:"com.netflix.mediaclient",appName:"Netflix",isSystemApp:!1,iconPath:"link/icons/com.netflix.mediaclient.png"},{uid:10007,packageName:"com.facebook.katana",appName:"Facebook",isSystemApp:!1,iconPath:"link/icons/com.facebook.katana.png"},{uid:10008,packageName:"com.discord",appName:"Discord",isSystemApp:!1,iconPath:"link/icons/com.discord.png"},{uid:10009,packageName:"com.telegram.messenger",appName:"Telegram",isSystemApp:!1,iconPath:"link/icons/com.telegram.messenger.png"},{uid:10010,packageName:"com.google.android.youtube",appName:"YouTube",isSystemApp:!1,iconPath:"link/icons/com.google.android.youtube.png"},{uid:10011,packageName:"io.github.vvb2060.mahoshojo",appName:"Momo Detector",isSystemApp:!1,iconPath:"link/icons/io.github.vvb2060.mahoshojo.png"},{uid:10012,packageName:"rikka.appops",appName:"App Ops",isSystemApp:!1,iconPath:"link/icons/rikka.appops.png"},{uid:10013,packageName:"com.termux",appName:"Termux",isSystemApp:!1,iconPath:"link/icons/com.termux.png"},{uid:10014,packageName:"com.topjohnwu.magisk",appName:"Magisk",isSystemApp:!1,iconPath:"link/icons/com.topjohnwu.magisk.png"},{uid:10015,packageName:"me.weishu.kernelsu",appName:"KernelSU",isSystemApp:!1,iconPath:"link/icons/me.weishu.kernelsu.png"},{uid:1e3,packageName:"com.android.settings",appName:"Settings",isSystemApp:!0,iconPath:"link/icons/com.android.settings.png"},{uid:1001,packageName:"com.android.phone",appName:"Phone",isSystemApp:!0,iconPath:"link/icons/com.android.phone.png"},{uid:10100,packageName:"com.android.systemui",appName:"System UI",isSystemApp:!0,iconPath:"link/icons/com.android.systemui.png"},{uid:10101,packageName:"com.google.android.gms",appName:"Google Play Services",isSystemApp:!0,iconPath:"link/icons/com.google.android.gms.png"},{uid:10102,packageName:"com.google.android.gsf",appName:"Google Services Framework",isSystemApp:!0,iconPath:"link/icons/com.google.android.gsf.png"},{uid:10103,packageName:"com.android.vending",appName:"Play Store",isSystemApp:!0,iconPath:"link/icons/com.android.vending.png"},{uid:10104,packageName:"com.google.android.apps.messaging",appName:"Messages",isSystemApp:!0,iconPath:"link/icons/com.google.android.apps.messaging.png"},{uid:10105,packageName:"com.android.providers.contacts",appName:"Contacts Storage",isSystemApp:!0,iconPath:"link/icons/com.android.providers.contacts.png"}],q={async getVersion(){return await J(100),`v${De}`},async getSystemInfo(){return await J(150),{driverVersion:`v${De}`,kernelVersion:"6.1.75",susfsVersion:"v1.5.2",uptime:"4h 23m",deviceModel:"Pixel 6",androidVersion:"14",selinuxStatus:"Enforcing"}},async getRules(){return await J(200),[...Ae]},async addRule(e,t,s){await J(300);const n={id:Date.now().toString(),name:e,source:t,target:s,hits:0,createdAt:new Date,active:!0};return Ae.push(n),n},async deleteRule(e){await J(200);const t=Ae.findIndex(s=>s.id===e||s.source===e);t>-1&&Ae.splice(t,1)},async clearAllRules(){await J(300),Ae.length=0},async getExcludedUids(){return await J(200),[...Ne]},async excludeUid(e,t,s){await J(300);const n={uid:e,packageName:t,appName:s,excludedAt:new Date};return Ne.push(n),n},async includeUid(e){await J(200);const t=Ne.findIndex(s=>s.uid===e);t>-1&&Ne.splice(t,1)},async getActivity(){return await J(150),[...Fs]},async getStats(){return await J(100),{activeRules:Ae.length,excludedUids:Ne.length,hitsToday:Ae.reduce((e,t)=>e+t.hits,0)}},async toggleEngine(e){await J(400)},async setVerboseLogging(e){await J(100)},async getModules(){return await J(100),[...Rs]},async isEngineActive(){return!0},async getInstalledApps(){return await J(300),[...Ds]},async scanKsuModules(){return await J(200),[...mt]},async loadKsuModule(e,t){await J(500);const s=mt.find(n=>n.path===t);return s&&(s.isLoaded=!0),s?.fileCount||0},async unloadKsuModule(e,t){await J(400);const s=mt.find(n=>n.path===t);return s&&(s.isLoaded=!1),s?.fileCount||0},async fetchSystemColor(){return null}};function le(e){return"'"+e.replace(/'/g,"'\\''")+"'"}let Zs=0;function C(){return typeof globalThis.ksu>"u"}async function N(e,t=3e4){const s=globalThis.ksu;if(!s?.exec)throw console.error("[ZM-API] execCommand() FAILED: KSU not available"),new Error("KSU not available");return new Promise((n,l)=>{const r=`exec_cb_${Date.now()}_${Zs++}`,o=setTimeout(()=>{delete window[r],l(new Error(`Command timed out: ${e.substring(0,50)}...`))},t);window[r]=(i,a,m)=>{clearTimeout(o),delete window[r],n({errno:i,stdout:a,stderr:m})};try{s.exec(e,"{}",r)}catch(i){clearTimeout(o),delete window[r],l(i)}})}function Us(e){console.log("[ZM-API] parseRulesOutput() input:",e?.slice(0,200));const s=e.trim().split(`
`).filter(n=>n.trim()).map((n,l)=>{const r=n.indexOf("->"),o=r===-1?n.trim():n.slice(0,r).trim(),i=r===-1?"[BLOCKED]":n.slice(r+2).trim();return{id:String(l+1),name:o.split("/").pop()||"Rule",source:o,target:i,hits:0,createdAt:new Date,active:!0}});return console.log("[ZM-API] parseRulesOutput() parsed",s.length,"rules"),s}async function zs(){console.log("[ZM-API] parseExclusionFiles() called");try{const{errno:e,stdout:t}=await N(`cat "${Z.EXCLUSION_FILE}"`);if(console.log("[ZM-API] parseExclusionFiles() list result:",{errno:e,stdout:t?.slice(0,100)}),e!==0||!t.trim())return console.log("[ZM-API] parseExclusionFiles() no exclusions found"),[];const s=t.trim().split(`
`).map(r=>parseInt(r.trim(),10)).filter(r=>!isNaN(r));console.log("[ZM-API] parseExclusionFiles() parsed UIDs:",s);let n={};try{const{errno:r,stdout:o}=await N(`cat "${Z.EXCLUSION_META}"`);console.log("[ZM-API] parseExclusionFiles() meta result:",{errno:r,stdout:o?.slice(0,100)}),r===0&&o.trim()&&(n=JSON.parse(o),console.log("[ZM-API] parseExclusionFiles() parsed meta for",Object.keys(n).length,"UIDs"))}catch(r){console.log("[ZM-API] parseExclusionFiles() meta parse error (optional):",r)}const l=s.map(r=>{const o=n[String(r)];return{uid:r,packageName:o?.packageName||`app_${r}`,appName:o?.appName||`UID ${r}`,excludedAt:o?.excludedAt?new Date(o.excludedAt):new Date}});return console.log("[ZM-API] parseExclusionFiles() returning",l.length,"exclusions"),l}catch(e){return console.error("[ZM-API] parseExclusionFiles() error:",e),[]}}async function Bs(){console.log("[ZM-API] parseActivityLog() called");try{const{errno:e,stdout:t}=await N(`tail -50 "${Z.ACTIVITY_LOG}"`);if(console.log("[ZM-API] parseActivityLog() result:",{errno:e,stdout:t?.slice(0,100)}),e!==0||!t.trim())return console.log("[ZM-API] parseActivityLog() no activity found"),[];const s=["rule_added","rule_removed","uid_excluded","uid_included","engine_enabled","engine_disabled"],l=t.trim().split(`
`).filter(r=>r.trim()).map((r,o)=>{const i=r.match(/^\[(.+?)\]\s+(\w+):\s+(.+)$/);if(i){const[,a,m,v]=i,c=m.toLowerCase();return{id:String(o+1),type:s.includes(c)?c:"engine_enabled",message:v,timestamp:new Date(a)}}return{id:String(o+1),type:"engine_enabled",message:r,timestamp:new Date}});return console.log("[ZM-API] parseActivityLog() parsed",l.length,"activity items"),l}catch(e){return console.error("[ZM-API] parseActivityLog() error:",e),[]}}async function be(e,t){if(!C())try{const n=`[${new Date().toISOString()}] ${e.toUpperCase()}: ${t}`;await N(`echo ${le(n)} >> "${Z.ACTIVITY_LOG}"`)}catch(s){console.error("[ZM-API] logActivity() error:",s)}}const K={async getVersion(){if(console.log("[ZM-API] getVersion() called, mock:",C()),C())return q.getVersion();try{const{errno:e,stdout:t}=await N(`${Z.BINARY} ver`);if(e===0&&t)return console.log("[ZM-API] getVersion() returning:",t.trim()),t.trim();console.log("[ZM-API] getVersion() command failed, using fallback")}catch(e){console.error("[ZM-API] getVersion() error:",e)}return console.log("[ZM-API] getVersion() returning fallback:",`v${De}`),`v${De}`},async getSystemInfo(){if(console.log("[ZM-API] getSystemInfo() called, mock:",C()),C())return q.getSystemInfo();const e={driverVersion:`v${De}`,kernelVersion:"-",susfsVersion:"-",uptime:"-",deviceModel:"-",androidVersion:"-",selinuxStatus:"-"};try{console.log("[ZM-API] getSystemInfo() fetching system info...");const[t,s,n,l,r,o]=await Promise.all([N(`${Z.BINARY} ver`).catch(()=>({errno:1,stdout:"",stderr:""})),N("uname -r").catch(()=>({errno:1,stdout:"",stderr:""})),N("cat /proc/uptime").catch(()=>({errno:1,stdout:"",stderr:""})),N("getprop ro.product.model").catch(()=>({errno:1,stdout:"",stderr:""})),N("getprop ro.build.version.release").catch(()=>({errno:1,stdout:"",stderr:""})),N("getenforce").catch(()=>({errno:1,stdout:"",stderr:""}))]);if(t.errno===0&&t.stdout&&(e.driverVersion=t.stdout.trim()),s.errno===0&&s.stdout&&(e.kernelVersion=s.stdout.trim()),n.errno===0&&n.stdout){const a=parseInt(n.stdout.split(" ")[0],10);if(!isNaN(a)){const m=Math.floor(a/3600),v=Math.floor(a%3600/60);e.uptime=`${m}h ${v}m`}}l.errno===0&&l.stdout.trim()&&(e.deviceModel=l.stdout.trim()),r.errno===0&&r.stdout.trim()&&(e.androidVersion=r.stdout.trim()),o.errno===0&&o.stdout.trim()&&(e.selinuxStatus=o.stdout.trim());const i=await N('ksu_susfs show version 2>/dev/null || echo ""').catch(()=>({errno:1,stdout:"",stderr:""}));i.errno===0&&i.stdout.trim()&&(e.susfsVersion=i.stdout.trim()),console.log("[ZM-API] getSystemInfo() returning:",e)}catch(t){console.error("[ZM-API] getSystemInfo() error:",t)}return e},async getRules(){if(console.log("[ZM-API] getRules() called, mock:",C()),C())return q.getRules();try{const{errno:e,stdout:t}=await N(`${Z.BINARY} list`);if(e===0&&t.trim()){const s=Us(t);return console.log("[ZM-API] getRules() returning",s.length,"rules"),s}console.log("[ZM-API] getRules() command returned no data")}catch(e){console.error("[ZM-API] getRules() error:",e)}return console.log("[ZM-API] getRules() returning empty array"),[]},async addRule(e,t,s){if(console.log("[ZM-API] addRule() called:",{name:e,source:t,target:s,mock:C()}),C())return q.addRule(e,t,s);const n=`${Z.BINARY} add ${le(t)} ${le(s)}`;console.log("[ZM-API] addRule() executing:",n);const{errno:l,stderr:r}=await N(n);if(l!==0)throw console.error("[ZM-API] addRule() failed:",{errno:l,stderr:r}),new Error(r||"Failed to add rule");const o={id:Date.now().toString(),name:e,source:t,target:s,hits:0,createdAt:new Date,active:!0};return console.log("[ZM-API] addRule() success, returning:",o.id),await be("RULE_ADDED",`${e}: ${t} -> ${s}`),o},async deleteRule(e){if(console.log("[ZM-API] deleteRule() called:",{sourcePath:e,mock:C()}),C())return q.deleteRule(e);const t=`${Z.BINARY} del ${le(e)}`;console.log("[ZM-API] deleteRule() executing:",t);const{errno:s,stderr:n}=await N(t);if(s!==0)throw console.error("[ZM-API] deleteRule() failed:",{errno:s,stderr:n}),new Error(n||"Failed to delete rule");console.log("[ZM-API] deleteRule() success"),await be("RULE_REMOVED",e)},async clearAllRules(){if(console.log("[ZM-API] clearAllRules() called, mock:",C()),C())return q.clearAllRules();const e=`${Z.BINARY} clear`;console.log("[ZM-API] clearAllRules() executing:",e);const{errno:t,stderr:s}=await N(e);if(t!==0)throw console.error("[ZM-API] clearAllRules() failed:",{errno:t,stderr:s}),new Error(s||"Failed to clear rules");console.log("[ZM-API] clearAllRules() success"),await be("RULES_CLEARED","All rules cleared")},async getExcludedUids(){if(console.log("[ZM-API] getExcludedUids() called, mock:",C()),C())return q.getExcludedUids();const e=await zs();return console.log("[ZM-API] getExcludedUids() returning",e.length,"exclusions"),e},async excludeUid(e,t,s){if(console.log("[ZM-API] excludeUid() called:",{uid:e,packageName:t,appName:s,mock:C()}),C())return q.excludeUid(e,t,s);if(!Number.isInteger(e)||e<0)throw new Error("Invalid UID");const n=`${Z.BINARY} blk ${le(String(e))}`;console.log("[ZM-API] excludeUid() executing:",n);const{errno:l,stderr:r}=await N(n);if(l!==0)throw console.error("[ZM-API] excludeUid() failed:",{errno:l,stderr:r}),new Error(r||"Failed to exclude UID");console.log("[ZM-API] excludeUid() success"),await N(`echo ${le(String(e))} >> "${Z.EXCLUSION_FILE}"`).catch(o=>console.error("[ZM-API] Exclusion persistence failed:",o));try{let o={};const{errno:i,stdout:a}=await N(`cat "${Z.EXCLUSION_META}" 2>/dev/null`);if(i===0&&a.trim())try{o=JSON.parse(a)}catch(m){console.error("[ZM-API] Metadata parse error, starting fresh:",m),o={}}o[String(e)]={packageName:t,appName:s,excludedAt:new Date().toISOString()},await N(`echo ${le(JSON.stringify(o))} > "${Z.EXCLUSION_META}"`)}catch(o){console.error("[ZM-API] Metadata save failed:",o)}return await be("UID_EXCLUDED",`${s} (${e})`),{uid:e,packageName:t,appName:s,excludedAt:new Date}},async includeUid(e){if(console.log("[ZM-API] includeUid() called:",{uid:e,mock:C()}),C())return q.includeUid(e);const t=`${Z.BINARY} unb ${le(String(e))}`;console.log("[ZM-API] includeUid() executing:",t);const{errno:s,stderr:n}=await N(t);if(s!==0)throw console.error("[ZM-API] includeUid() failed:",{errno:s,stderr:n}),new Error(n||"Failed to include UID");console.log("[ZM-API] includeUid() success"),await N(`sed -i '/^${e}$/d' "${Z.EXCLUSION_FILE}"`).catch(l=>console.error("[ZM-API] Exclusion removal failed:",l));try{const{errno:l,stdout:r}=await N(`cat "${Z.EXCLUSION_META}" 2>/dev/null`);if(l===0&&r.trim())try{const o=JSON.parse(r);delete o[String(e)],await N(`echo ${le(JSON.stringify(o))} > "${Z.EXCLUSION_META}"`)}catch(o){console.error("[ZM-API] Metadata parse error during cleanup:",o)}}catch(l){console.error("[ZM-API] Metadata cleanup failed:",l)}await be("UID_INCLUDED",`UID ${e}`)},async getActivity(){if(console.log("[ZM-API] getActivity() called, mock:",C()),C())return q.getActivity();const e=await Bs();return console.log("[ZM-API] getActivity() returning",e.length,"items"),e},async getStats(){if(console.log("[ZM-API] getStats() called, mock:",C()),C())return q.getStats();const[e,t]=await Promise.all([this.getRules(),this.getExcludedUids()]),s={activeRules:e.length,excludedUids:t.length,hitsToday:e.reduce((n,l)=>n+l.hits,0)};return console.log("[ZM-API] getStats() returning:",s),s},async toggleEngine(e){if(console.log("[ZM-API] toggleEngine() called:",{enable:e,mock:C()}),C())return q.toggleEngine(e);const t=e?`${Z.BINARY} enable`:`${Z.BINARY} disable`;console.log("[ZM-API] toggleEngine() executing:",t);const{errno:s,stderr:n}=await N(t);if(s!==0)throw console.error("[ZM-API] toggleEngine() failed:",{errno:s,stderr:n}),new Error(n||"Failed to toggle engine");console.log("[ZM-API] toggleEngine() success"),await be(e?"ENGINE_ENABLED":"ENGINE_DISABLED",e?"Engine activated":"Engine deactivated")},async setVerboseLogging(e){if(console.log("[ZM-API] setVerboseLogging() called:",{enabled:e,mock:C()}),C())return q.setVerboseLogging(e);const t=e?`touch "${Z.VERBOSE_FLAG}"`:`rm -f "${Z.VERBOSE_FLAG}"`;console.log("[ZM-API] setVerboseLogging() executing:",t);const{errno:s,stderr:n}=await N(t);if(s!==0)throw console.error("[ZM-API] setVerboseLogging() failed:",{errno:s,stderr:n}),new Error(n||"Failed to set verbose logging");console.log("[ZM-API] setVerboseLogging() success")},async getModules(){if(console.log("[ZM-API] getModules() called, mock:",C()),C())return q.getModules();try{const{errno:e,stdout:t}=await N(`ls "${Z.MODULE_PATHS}" 2>/dev/null`);if(e!==0||!t.trim())return console.log("[ZM-API] getModules() no modules found"),[];const s=t.trim().split(`
`).filter(Boolean);console.log("[ZM-API] getModules() found",s.length,"module names");const n=await Promise.all(s.map(async l=>{const r=`${Z.MODULE_PATHS}/${l}`,{stdout:o}=await N(`wc -l < ${le(r)} 2>/dev/null || echo 0`);return{name:l,ruleCount:parseInt(o.trim(),10)||0}}));return console.log("[ZM-API] getModules() returning",n.length,"modules"),n}catch(e){return console.error("[ZM-API] getModules() error:",e),[]}},async isEngineActive(){if(console.log("[ZM-API] isEngineActive() called, mock:",C()),C())return q.isEngineActive();try{const{errno:e}=await N(`[ -e "${Z.DEVICE}" ]`),t=e===0;return console.log("[ZM-API] isEngineActive() returning:",t),t}catch(e){return console.error("[ZM-API] isEngineActive() error:",e),!1}},async getInstalledApps(){if(console.log("[ZM-API] getInstalledApps() called, mock:",C()),C())return q.getInstalledApps();try{const e=await fetch("link/installed_apps.json?t="+Date.now());if(e.ok){const t=await e.text();try{const s=JSON.parse(t);if(Array.isArray(s))return console.log("[ZM-API] getInstalledApps() loaded",s.length,"apps"),s}catch(s){console.error("[ZM-API] JSON parse error in getInstalledApps:",s)}}}catch{console.log("[ZM-API] getInstalledApps() file not ready")}return[]},async refreshInstalledApps(){console.log("[ZM-API] refreshInstalledApps() called (no-op)")},async checkAppListStale(e){if(console.log("[ZM-API] checkAppListStale() cached:",e),C())return!1;try{const{errno:t,stdout:s}=await N("pm list packages -3 | wc -l");if(t===0){const n=parseInt(s.trim(),10);return console.log("[ZM-API] checkAppListStale() current:",n),n!==e}}catch(t){console.error("[ZM-API] checkAppListStale() error:",t)}return!1},async getRefreshTrigger(){if(C())return null;try{const e=await fetch("link/.refresh_trigger?t="+Date.now());if(e.ok){const t=await e.text(),s=parseInt(t.trim(),10);if(!isNaN(s))return s}}catch{}return null},async scanKsuModules(){if(console.log("[ZM-API] scanKsuModules() called, mock:",C()),C())return q.scanKsuModules();try{const e=`
# Extract unique module base paths from zm list sources (format: source->target)
loaded_modules=$(${Z.BINARY} list 2>/dev/null | awk -F'->' '{print $1}' | grep -oE '/data/adb/modules/[^/]+' | sort -u || echo "")
echo "["
first=1
for dir in /data/adb/modules/*/; do
  [ -d "$dir" ] || continue
  name=$(basename "$dir")
  path="/data/adb/modules/$name"

  has_sys=0; has_ven=0; has_prod=0
  [ -d "$path/system" ] && has_sys=1
  [ -d "$path/vendor" ] && has_ven=1
  [ -d "$path/product" ] && has_prod=1

  [ $has_sys -eq 0 ] && [ $has_ven -eq 0 ] && [ $has_prod -eq 0 ] && continue

  count=$(find "$path" -type f \\( -path "*/system/*" -o -path "*/vendor/*" -o -path "*/product/*" \\) 2>/dev/null | wc -l)

  display_name="$name"
  if [ -f "$path/module.prop" ]; then
    prop_name=$(grep "^name=" "$path/module.prop" 2>/dev/null | cut -d= -f2)
    [ -n "$prop_name" ] && display_name="$prop_name"
  fi

  is_loaded=0
  echo "$loaded_modules" | grep -qx "$path" && is_loaded=1

  [ $first -eq 0 ] && echo ","
  first=0
  printf '{"name":"%s","path":"%s","hasSystem":%s,"hasVendor":%s,"hasProduct":%s,"isLoaded":%s,"fileCount":%d}' \\
    "$display_name" "$path" \\
    $([ $has_sys -eq 1 ] && echo true || echo false) \\
    $([ $has_ven -eq 1 ] && echo true || echo false) \\
    $([ $has_prod -eq 1 ] && echo true || echo false) \\
    $([ $is_loaded -eq 1 ] && echo true || echo false) \\
    "$count"
done
echo "]"
`,{errno:t,stdout:s}=await N(e);if(t!==0)return console.log("[ZM-API] scanKsuModules() script failed"),[];const n=JSON.parse(s.trim());return console.log("[ZM-API] scanKsuModules() returning",n.length,"modules"),n}catch(e){return console.error("[ZM-API] scanKsuModules() error:",e),[]}},async loadKsuModule(e,t){if(console.log("[ZM-API] loadKsuModule() called:",{moduleName:e,modulePath:t,mock:C()}),C())return q.loadKsuModule(e,t);try{const{stdout:s}=await N(`find ${le(t)} -type f \\( -path "*/system/*" -o -path "*/vendor/*" -o -path "*/product/*" \\) 2>/dev/null`),n=s.trim().split(`
`).filter(Boolean);let l=0;for(const r of n){const o=r.replace(t,"");let i="";if(o.startsWith("/system/"))i=o;else if(o.startsWith("/vendor/"))i=o;else if(o.startsWith("/product/"))i=o;else continue;const a=`${Z.BINARY} add ${le(r)} ${le(i)}`,{errno:m}=await N(a);m===0&&l++}return await be("MODULE_LOADED",`${e}: ${l} rules added`),console.log("[ZM-API] loadKsuModule() added",l,"rules"),l}catch(s){throw console.error("[ZM-API] loadKsuModule() error:",s),s}},async unloadKsuModule(e,t){if(console.log("[ZM-API] unloadKsuModule() called:",{moduleName:e,modulePath:t,mock:C()}),C())return q.unloadKsuModule(e,t);try{const n=(await this.getRules()).filter(r=>r.source.startsWith(t));let l=0;for(const r of n){const o=`${Z.BINARY} del ${le(r.source)}`,{errno:i}=await N(o);i===0&&l++}return await be("MODULE_UNLOADED",`${e}: ${l} rules removed`),console.log("[ZM-API] unloadKsuModule() removed",l,"rules"),l}catch(s){throw console.error("[ZM-API] unloadKsuModule() error:",s),s}},async fetchSystemColor(){if(console.log("[ZM-API] fetchSystemColor() called, mock:",C()),C())return q.fetchSystemColor();try{const{errno:e,stdout:t}=await N("settings get secure theme_customization_overlay_packages");if(e!==0||!t.trim())return console.log("[ZM-API] fetchSystemColor() no system color found"),null;const s=/#?([0-9a-fA-F]{6,8})/i.exec(t);if(s){const n="#"+s[1].slice(0,6);return console.log("[ZM-API] fetchSystemColor() found:",n),n}return console.log("[ZM-API] fetchSystemColor() no hex color in output"),null}catch(e){return console.error("[ZM-API] fetchSystemColor() error:",e),null}}};let Os=0;const Vs=/^[a-zA-Z][a-zA-Z0-9_.]*$/;function Ks(e){return typeof e=="object"&&e!==null&&"packageName"in e&&typeof e.packageName=="string"}function ts(e){return Vs.test(e)&&e.length<=256}async function Mt(e,t=3e4){const s=globalThis.ksu;return s?.exec?new Promise(n=>{const l=`ksu_api_cb_${Date.now()}_${Os++}`,r=setTimeout(()=>{delete window[l],n({errno:-1,stdout:"",stderr:"timeout"})},t);window[l]=(o,i,a)=>{clearTimeout(r),delete window[l],n({errno:o,stdout:i,stderr:a})};try{s.exec(e,"{}",l)}catch{clearTimeout(r),delete window[l],n({errno:-1,stdout:"",stderr:"exec failed"})}}):{errno:-1,stdout:"",stderr:"KSU not available"}}async function Qe(e){const t=globalThis.ksu,n={all:"listAllPackages",user:"listUserPackages",system:"listSystemPackages"}[e];if(t?.[n])try{const i=t[n]();if(i){const a=JSON.parse(i);if(Array.isArray(a))return a}}catch{}const l={all:"",user:"-3",system:"-s"},{stdout:r,errno:o}=await Mt(`pm list packages ${l[e]} | sed 's/package://'`);return o===0&&r.trim()?r.trim().split(`
`).filter(Boolean):[]}async function Gs(e){if(!e.length)return[];const t=globalThis.ksu;if(t?.getPackagesInfo)try{const n=t.getPackagesInfo(JSON.stringify(e));if(n){const l=JSON.parse(n);if(Array.isArray(l)&&l.every(Ks))return l}}catch{}const s=[];for(const n of e){if(!ts(n)){s.push({packageName:n,appLabel:n});continue}const{stdout:l,errno:r}=await Mt(`pm path ${n} 2>/dev/null | head -1 | sed 's/package://' | xargs -I{} aapt dump badging {} 2>/dev/null | grep "application-label:" | head -1 | sed "s/application-label:'\\(.*\\)'/\\1/"`);s.push({packageName:n,appLabel:r===0&&l.trim()?l.trim():n})}return s}async function Hs(e){if(!ts(e))return null;const{stdout:t,errno:s}=await Mt(`pm path ${e} 2>/dev/null | head -1 | sed 's/package://' | xargs -I{} aapt dump badging {} 2>/dev/null | grep "application-label:" | head -1 | sed "s/application-label:'\\(.*\\)'/\\1/"`);return s===0&&t.trim()?t.trim():null}const Ce={"#FF8E53":{gradient:"linear-gradient(135deg, #FF8E53 0%, #FF7B3D 50%, #E85D04 100%)",textAccent:"#FF8E53",rgb:"255, 142, 83",textOnAccent:"#1A1A2E"},"#00D68F":{gradient:"linear-gradient(135deg, #00D68F 0%, #00E5A0 50%, #69F0AE 100%)",textAccent:"#00D68F",rgb:"0, 214, 143",textOnAccent:"#1A1A2E"},"#00B4D8":{gradient:"linear-gradient(135deg, #00B4D8 0%, #48CAE4 50%, #90E0EF 100%)",textAccent:"#00B4D8",rgb:"0, 180, 216",textOnAccent:"#1A1A2E"},"#64748B":{gradient:"linear-gradient(135deg, #64748B 0%, #94A3B8 50%, #CBD5E1 100%)",textAccent:"#94A3B8",rgb:"100, 116, 139",textOnAccent:"#1A1A2E"},"#6366F1":{gradient:"linear-gradient(135deg, #6366F1 0%, #818CF8 50%, #A5B4FC 100%)",textAccent:"#818CF8",rgb:"99, 102, 241",textOnAccent:"#FFFFFF"},"#FF6B6B":{gradient:"linear-gradient(135deg, #FF6B6B 0%, #FF8A80 50%, #FFAB91 100%)",textAccent:"#FF6B6B",rgb:"255, 107, 107",textOnAccent:"#1A1A2E"}};function Ys(e){const t=Ce[e];if(!t)return!1;const[s,n,l]=t.rgb.split(",").map(r=>parseInt(r.trim()));return(.299*s+.587*n+.114*l)/255>.6}function kt(e){return Ce[e]||Ce["#FF8E53"]}const Oe={gradientPrimary:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 50%, #E85D04 100%)",gradientSecondary:"linear-gradient(180deg, #1A1A2E 0%, #0F0F1A 100%)",colorSuccess:"#00D68F",colorSuccessGlow:"rgba(0, 214, 143, 0.4)",colorWarning:"#FFB800",colorWarningGlow:"rgba(255, 184, 0, 0.4)",colorError:"#FF3D71",colorErrorGlow:"rgba(255, 61, 113, 0.4)",colorInfo:"#00B4D8",colorInfoGlow:"rgba(0, 180, 216, 0.4)",bgPrimary:"linear-gradient(180deg, #0F0F1A 0%, #1A1A2E 100%)",bgSurface:"rgba(255, 255, 255, 0.05)",bgSurfaceElevated:"rgba(255, 255, 255, 0.08)",bgSurfaceHover:"rgba(255, 255, 255, 0.12)",glassBg:"rgba(255, 255, 255, 0.06)",glassBorder:"rgba(255, 255, 255, 0.1)",glassBlur:"blur(20px)",textPrimary:"#FFFFFF",textSecondary:"rgba(255, 255, 255, 0.7)",textTertiary:"rgba(255, 255, 255, 0.5)",textAccent:"#FF8E53",fontDisplay:"'Space Grotesk', system-ui, sans-serif",fontBody:"'Inter', system-ui, sans-serif",fontMono:"'JetBrains Mono', 'Fira Code', monospace",radiusSmall:"8px",radiusMedium:"12px",radiusLarge:"16px",radiusXLarge:"24px",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.2)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.3)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.4)",shadowGlow:"0 0 20px rgba(255, 107, 107, 0.3)",accentRgb:"255, 107, 107"},Dt={...Oe,gradientSecondary:"linear-gradient(180deg, #FFFFFF 0%, #F5F5F5 100%)",bgPrimary:"linear-gradient(180deg, #F5F5F5 0%, #FFFFFF 100%)",bgSurface:"rgba(0, 0, 0, 0.03)",bgSurfaceElevated:"rgba(0, 0, 0, 0.05)",bgSurfaceHover:"rgba(0, 0, 0, 0.08)",glassBg:"rgba(0, 0, 0, 0.03)",glassBorder:"rgba(0, 0, 0, 0.1)",textPrimary:"#1A1A2E",textSecondary:"rgba(0, 0, 0, 0.7)",textTertiary:"rgba(0, 0, 0, 0.5)",textAccent:"#E65100",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.1)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.15)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.2)",shadowGlow:"0 0 20px rgba(255, 107, 107, 0.4)"},Ws={...Oe,gradientSecondary:"linear-gradient(180deg, #000000 0%, #050505 100%)",bgPrimary:"#000000",bgSurface:"rgba(255, 255, 255, 0.03)",bgSurfaceElevated:"rgba(255, 255, 255, 0.05)",bgSurfaceHover:"rgba(255, 255, 255, 0.08)",glassBg:"rgba(255, 255, 255, 0.02)",glassBorder:"rgba(255, 255, 255, 0.08)",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.5)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.6)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.7)"},Ze=Oe;function qs(e,t){const s=document.documentElement;s.style.setProperty("--bg-primary",e.bgPrimary),s.style.setProperty("--bg-surface",e.bgSurface),s.style.setProperty("--bg-surface-elevated",e.bgSurfaceElevated),s.style.setProperty("--bg-surface-hover",e.bgSurfaceHover),s.style.setProperty("--glass-bg",e.glassBg),s.style.setProperty("--glass-border",e.glassBorder),s.style.setProperty("--text-primary",e.textPrimary),s.style.setProperty("--text-secondary",e.textSecondary),s.style.setProperty("--text-tertiary",e.textTertiary),s.style.setProperty("--gradient-secondary",e.gradientSecondary),s.style.setProperty("--color-success",e.colorSuccess),s.style.setProperty("--color-success-glow",e.colorSuccessGlow),s.style.setProperty("--color-warning",e.colorWarning),s.style.setProperty("--color-warning-glow",e.colorWarningGlow),s.style.setProperty("--color-error",e.colorError),s.style.setProperty("--color-error-glow",e.colorErrorGlow),s.style.setProperty("--color-info",e.colorInfo),s.style.setProperty("--color-info-glow",e.colorInfoGlow),s.style.setProperty("--shadow-small",e.shadowSmall),s.style.setProperty("--shadow-medium",e.shadowMedium),s.style.setProperty("--shadow-large",e.shadowLarge);const n=kt(t||"#FF6B6B");s.style.setProperty("--gradient-primary",n.gradient),s.style.setProperty("--text-accent",n.textAccent),s.style.setProperty("--accent-rgb",n.rgb),s.style.setProperty("--text-on-accent",n.textOnAccent),s.style.setProperty("--shadow-glow",`0 0 20px rgba(${n.rgb}, 0.3)`)}function Xs(e){const t=document.documentElement,s=kt(e);t.style.setProperty("--gradient-primary",s.gradient),t.style.setProperty("--text-accent",s.textAccent),t.style.setProperty("--accent-rgb",s.rgb),t.style.setProperty("--text-on-accent",s.textOnAccent),t.style.setProperty("--shadow-glow",`0 0 20px rgba(${s.rgb}, 0.3)`)}function js(){console.log("[ZM-Store] createAppStore() initializing...");const[e,t]=T("status"),[s,n]=T(!0),[l,r]=Je({status:!1,modules:!1,apps:!1,rules:!1,activity:!1,engine:!1}),[o,i]=Je({activeRules:0,excludedUids:0,hitsToday:0}),[a,m]=Je({driverVersion:"",kernelVersion:"",susfsVersion:"",uptime:"",deviceModel:"",androidVersion:"",selinuxStatus:""}),[v,c]=T([]),[b,$]=T([]),[A,f]=T([]),[g,_]=T([]),[w,x]=T([]),[k,E]=T([]),F=typeof window<"u"?localStorage.getItem("zeromount-theme"):null,I=typeof window<"u"?localStorage.getItem("zeromount-fixedNav")==="true":!0,G=typeof window<"u"?localStorage.getItem("zeromount-autoAccent"):null,R=G===null?!0:G==="true",W=typeof window<"u"?localStorage.getItem("zeromount-accent"):null,P=Object.keys(Ce),ne=P[Math.floor(Math.random()*P.length)],ee=R?ne:W&&Ce[W]?W:"#FF8E53",[H,re]=Je({theme:F||"amoled",accentColor:ee,autoAccentColor:R,animationsEnabled:!0,autoStartOnBoot:!0,verboseLogging:!1,fixedNav:I}),[ae,ce]=T(typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!0);typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",S=>ce(S.matches));const ge=oe(()=>{const h=H.theme,S=h==="light"?Dt:h==="amoled"?Ws:h==="auto"?ae()?Oe:Dt:Oe,M=kt(H.accentColor);return{...S,gradientPrimary:M.gradient,textAccent:M.textAccent,textOnAccent:M.textOnAccent,accentRgb:M.rgb,shadowGlow:`0 0 20px rgba(${M.rgb}, 0.3)`}});ue(()=>{qs(ge(),H.accentColor)}),ue(()=>{Xs(H.accentColor)}),ue(()=>{typeof window<"u"&&localStorage.setItem("zeromount-theme",H.theme)}),ue(()=>{typeof window<"u"&&localStorage.setItem("zeromount-accent",H.accentColor)}),ue(()=>{typeof window<"u"&&localStorage.setItem("zeromount-fixedNav",String(H.fixedNav))}),ue(()=>{typeof window<"u"&&localStorage.setItem("zeromount-autoAccent",String(H.autoAccentColor))}),typeof window<"u"&&document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"&&H.autoAccentColor){const h=Object.keys(Ce),S=h[Math.floor(Math.random()*h.length)];re({accentColor:S})}});const[Ke,Ee]=T(null),U=(h,S="info")=>{Ee({message:h,type:S}),setTimeout(()=>Ee(null),3e3)},Ge=async()=>{console.log("[ZM-Store] loadInitialData() starting..."),r({status:!0,rules:!0,activity:!0});try{if(H.autoAccentColor){const Te=await K.fetchSystemColor();Te&&(console.log("[ZM-Store] loadInitialData() applying system accent color:",Te),re({accentColor:Te}))}console.log("[ZM-Store] loadInitialData() calling all API methods in parallel...");const h=await Promise.allSettled([K.getRules(),K.getExcludedUids(),K.getActivity(),K.getStats(),K.getSystemInfo(),K.getModules(),K.isEngineActive(),K.scanKsuModules()]),S=h[0].status==="fulfilled"?h[0].value:[],M=h[1].status==="fulfilled"?h[1].value:[],D=h[2].status==="fulfilled"?h[2].value:[],B=h[3].status==="fulfilled"?h[3].value:{activeRules:0,excludedUids:0,hitsToday:0},de=h[4].status==="fulfilled"?h[4].value:{driverVersion:"",kernelVersion:"",susfsVersion:"",uptime:"",deviceModel:"",androidVersion:"",selinuxStatus:""},Pt=h[5].status==="fulfilled"?h[5].value:[],Et=h[6].status==="fulfilled"?h[6].value:!1,us=h[7].status==="fulfilled"?h[7].value:[],Tt=h.filter(Te=>Te.status==="rejected").length;Tt>0&&console.warn("[ZM-Store] loadInitialData() partial failure:",Tt,"APIs failed"),console.log("[ZM-Store] loadInitialData() API results:",{rules:S.length,uids:M.length,activity:D.length,stats:B,sysInfo:de,modules:Pt.length,isActive:Et}),c(S),$(M),f(D),i(B),m(de),_(Pt),n(Et),E(us),console.log("[ZM-Store] loadInitialData() state updated successfully")}catch(h){console.error("[ZM-Store] loadInitialData() error:",h),U("Failed to load data","error")}finally{r({status:!1,rules:!1,activity:!1}),console.log("[ZM-Store] loadInitialData() complete")}},He=async()=>{console.log("[ZM-Store] refreshModules() called");try{const h=await K.getModules();_(h),console.log("[ZM-Store] refreshModules() updated with",h.length,"modules")}catch(h){console.log("[ZM-Store] refreshModules() silent fail:",h)}},ns=async()=>{if(l.engine)return;const h=!s();console.log("[ZM-Store] toggleEngine() called, newState:",h),r("engine",!0);try{await K.toggleEngine(h),n(h),console.log("[ZM-Store] toggleEngine() success, engine now:",h),U(h?"Engine activated":"Engine deactivated","success")}catch(S){console.error("[ZM-Store] toggleEngine() error:",S),U("Failed to toggle engine","error")}finally{r("engine",!1)}},rs=async(h,S,M)=>{console.log("[ZM-Store] addRule() called:",{name:h,source:S,target:M}),r("rules",!0);try{const D=await K.addRule(h,S,M);return c(B=>[...B,D]),i("activeRules",B=>B+1),console.log("[ZM-Store] addRule() success, rule id:",D.id),U("Rule created successfully","success"),D}catch(D){throw console.error("[ZM-Store] addRule() error:",D),U("Failed to create rule","error"),D}finally{r("rules",!1)}},ls=async h=>{console.log("[ZM-Store] deleteRule() called:",h),r("rules",!0);try{await K.deleteRule(h),c(S=>S.filter(M=>M.source!==h)),i("activeRules",S=>S-1),console.log("[ZM-Store] deleteRule() success"),U("Rule deleted","success")}catch(S){console.error("[ZM-Store] deleteRule() error:",S),U("Failed to delete rule","error")}finally{r("rules",!1)}},os=async(h,S,M)=>{if(console.log("[ZM-Store] excludeUid() called:",{uid:h,packageName:S,appName:M}),h<=0)return console.warn("[ZM-Store] Cannot exclude invalid UID:",h),U("Cannot exclude app with unknown UID","error"),null;if(Se.has(h))return console.log("[ZM-Store] Operation pending for UID:",h),null;Se.add(h),r("apps",!0);try{const D=await K.excludeUid(h,S,M);return $(B=>[...B,D]),i("excludedUids",B=>B+1),console.log("[ZM-Store] excludeUid() success"),U(`Excluded ${M}`,"success"),D}catch(D){throw console.error("[ZM-Store] excludeUid() error:",D),U("Failed to exclude UID","error"),D}finally{Se.delete(h),r("apps",!1)}},is=async h=>{if(console.log("[ZM-Store] includeUid() called:",h),h<=0){console.warn("[ZM-Store] Cannot include invalid UID:",h),U("Cannot include app with unknown UID","error");return}if(Se.has(h)){console.log("[ZM-Store] Operation pending for UID:",h);return}Se.add(h),r("apps",!0);try{await K.includeUid(h),$(S=>S.filter(M=>M.uid!==h)),i("excludedUids",S=>S-1),console.log("[ZM-Store] includeUid() success"),U("UID included","success")}catch(S){console.error("[ZM-Store] includeUid() error:",S),U("Failed to include UID","error")}finally{Se.delete(h),r("apps",!1)}},as=async()=>{console.log("[ZM-Store] clearAllRules() called"),r("rules",!0);try{await K.clearAllRules(),c([]),i("activeRules",0),console.log("[ZM-Store] clearAllRules() success"),U("All rules cleared","success")}catch(h){console.error("[ZM-Store] clearAllRules() error:",h),U("Failed to clear rules","error")}finally{r("rules",!1)}},cs=h=>{console.log("[ZM-Store] updateSettings() called:",h),re(h)};let Ye=null,We=null,qe,ht=!1,xe=!1;const Se=new Set,It=async()=>{const[h,S]=await Promise.all([Qe("user"),Qe("system")]),M=[...new Set([...h,...S])];if(M.length===0)return[];const D=await Gs(M),B=new Set(S);return D.map(de=>({packageName:de.packageName,appName:de.appLabel||de.packageName,uid:de.uid??-1,isSystemApp:de.isSystemApp??B.has(de.packageName)}))},Ct=async()=>{if(!xe){xe=!0;try{const h=await It();x(h),Ye=new Set(h.map(M=>M.packageName));const S=h.filter(M=>M.appName===M.packageName);if(S.length>0&&S.length<10)for(const M of S)Hs(M.packageName).then(D=>{D&&D!==M.packageName&&x(B=>B.map(de=>de.packageName===M.packageName?{...de,appName:D}:de))})}finally{xe=!1}}},ds=()=>{ht||(ht=!0,qe=window.setInterval(async()=>{if(!xe)try{const h=await K.getRefreshTrigger();if(h===null){if(Ye!==null){const[S,M]=await Promise.all([Qe("user"),Qe("system")]),D=new Set([...S,...M]).size,B=Ye.size;D!==B&&(console.log("[ZM-Store] Package count changed, refreshing"),await Ct())}return}if(We===null){We=h;return}h!==We&&(console.log("[ZM-Store] Trigger file changed, refreshing app list"),We=h,await Ct())}catch(h){console.error("[ZM-Store] Polling error:",h)}},2e3))};return{activeTab:e,setActiveTab:t,engineActive:s,loading:l,stats:o,systemInfo:a,rules:v,excludedUids:b,activity:A,modules:g,installedApps:w,ksuModules:k,settings:H,currentTheme:ge,toast:Ke,loadInitialData:Ge,refreshModules:He,loadInstalledApps:async()=>{if(xe){console.log("[ZM-Store] App fetch already in progress, skipping");return}xe=!0,console.log("[ZM-Store] loadInstalledApps() called"),r("apps",!0);try{if(C()){const S=await K.getInstalledApps();x(S),console.log("[ZM-Store] loadInstalledApps() loaded",S.length,"mock apps");return}const h=await It();x(h),console.log("[ZM-Store] loadInstalledApps() loaded",h.length,"apps via KSU API"),Ye=new Set(h.map(S=>S.packageName)),ds()}catch(h){console.error("[ZM-Store] loadInstalledApps() error:",h),U("Failed to load apps","error")}finally{xe=!1,r("apps",!1)}},scanKsuModules:async()=>{console.log("[ZM-Store] scanKsuModules() called"),r("modules",!0);try{const h=await K.scanKsuModules();E(h),console.log("[ZM-Store] scanKsuModules() loaded",h.length,"modules")}catch(h){console.error("[ZM-Store] scanKsuModules() error:",h),U("Failed to scan modules","error")}finally{r("modules",!1)}},loadKsuModule:async(h,S)=>{console.log("[ZM-Store] loadKsuModule() called:",{moduleName:h,modulePath:S});try{const M=await K.loadKsuModule(h,S);return E(D=>D.map(B=>B.path===S?{...B,isLoaded:!0}:B)),i("activeRules",D=>D+M),console.log("[ZM-Store] loadKsuModule() success, added",M,"rules"),U(`Loaded ${h} (${M} rules)`,"success"),M}catch(M){throw console.error("[ZM-Store] loadKsuModule() error:",M),U(`Failed to load ${h}`,"error"),M}},unloadKsuModule:async(h,S)=>{console.log("[ZM-Store] unloadKsuModule() called:",{moduleName:h,modulePath:S});try{const M=await K.unloadKsuModule(h,S);return E(D=>D.map(B=>B.path===S?{...B,isLoaded:!1}:B)),i("activeRules",D=>Math.max(0,D-M)),console.log("[ZM-Store] unloadKsuModule() success, removed",M,"rules"),U(`Unloaded ${h} (${M} rules)`,"success"),M}catch(M){throw console.error("[ZM-Store] unloadKsuModule() error:",M),U(`Failed to unload ${h}`,"error"),M}},toggleEngine:ns,addRule:rs,deleteRule:ls,excludeUid:os,includeUid:is,clearAllRules:as,updateSettings:cs,showToast:U,stopPolling:()=>{qe&&(clearInterval(qe),qe=void 0),ht=!1}}}console.log("[ZM-Store] Creating store root...");const u=Re(js);console.log("[ZM-Store] Store created successfully");var Js=y("<nav><div class=navbar__tabs><div>"),Qs=y("<button><span class=navbar__icon></span><span class=navbar__label>"),en=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z">'),tn=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z">'),sn=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z">'),nn=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z">');const rn=[{id:"status",label:"Status",icon:"power_settings_new"},{id:"modules",label:"Modules",icon:"folder"},{id:"config",label:"Config",icon:"tune"},{id:"settings",label:"Settings",icon:"settings"}];function ln(e){const[t,s]=T(0),[n,l]=T(0),[r,o]=T(!1);let i={};ue(()=>{const m=i[e.activeTab];if(m){const v=m.getBoundingClientRect(),c=m.parentElement?.getBoundingClientRect();c&&(o(!0),setTimeout(()=>{s(v.left-c.left),l(v.width),setTimeout(()=>o(!1),200)},50))}});const a=()=>u.settings.fixedNav;return(()=>{var m=Js(),v=m.firstChild,c=v.firstChild;return d(v,p(pe,{each:rn,children:b=>(()=>{var $=Qs(),A=$.firstChild,f=A.nextSibling;return $.$$click=()=>e.onTabChange(b.id),Xt(g=>i[b.id]=g,$),d(A,(()=>{var g=he(()=>b.icon==="power_settings_new");return()=>g()&&en()})(),null),d(A,(()=>{var g=he(()=>b.icon==="folder");return()=>g()&&tn()})(),null),d(A,(()=>{var g=he(()=>b.icon==="tune");return()=>g()&&sn()})(),null),d(A,(()=>{var g=he(()=>b.icon==="settings");return()=>g()&&nn()})(),null),d(f,()=>b.label),L(()=>V($,`navbar__tab ${e.activeTab===b.id?"navbar__tab--active":""}`)),$})()}),null),L(b=>{var $=`navbar ${a()?"navbar--fixed-nav":""}`,A=`navbar__indicator ${r()?"navbar__indicator--stretching":""}`,f=`${t()}px`,g=`${n()}px`;return $!==b.e&&V(m,b.e=$),A!==b.t&&V(c,b.t=A),f!==b.a&&te(c,"left",b.a=f),g!==b.o&&te(c,"width",b.o=g),b},{e:void 0,t:void 0,a:void 0,o:void 0}),m})()}$e(["click"]);var on=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z">'),an=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z">'),cn=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z">'),dn=y("<div>");function un(e){const[t,s]=T(!1),[n,l]=T(100);ue(()=>{e.visible?(s(!0),setTimeout(()=>l(0),10)):(l(100),setTimeout(()=>s(!1),300))});const r=()=>{const i=u.currentTheme();switch(e.type){case"success":return`
          background: ${i.colorSuccess};
          box-shadow: 0 8px 24px ${i.colorSuccessGlow};
        `;case"error":return`
          background: ${i.colorError};
          box-shadow: 0 8px 24px ${i.colorErrorGlow};
        `;default:return`
          background: ${i.colorInfo};
          box-shadow: 0 8px 24px ${i.colorInfoGlow};
        `}},o=()=>{switch(e.type){case"success":return on();case"error":return an();default:return cn()}};return p(j,{get when(){return t()},get children(){var i=dn();return d(i,o,null),d(i,()=>e.message,null),L(a=>ie(i,`
          position: fixed;
          bottom: 100px;
          left: 50%;
          transform: translateX(-50%) translateY(${n()}px);
          z-index: 1000;
          display: flex;
          align-items: center;
          gap: 10px;
          padding: 14px 20px;
          border-radius: ${Ze.radiusLarge};
          color: #FFFFFF;
          font-family: ${Ze.fontBody};
          font-size: 14px;
          font-weight: 500;
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
          ${r()}
        `,a)),i}})}var gn=y("<div>");function se(e){const[t]=gt(e,["variant","padding","hoverable","children","style","onClick"]),s=()=>t.variant||"glass",n=()=>t.padding||"medium",l=()=>{const r=["card"];return r.push(`card--${s()}`),r.push(`card--padding-${n()}`),t.hoverable&&r.push("card--hoverable"),r.join(" ")};return(()=>{var r=gn();return ft(r,"click",t.onClick),d(r,()=>t.children),L(o=>{var i=l(),a=t.style||void 0;return i!==o.e&&V(r,o.e=i),o.t=ie(r,a,o.t),o},{e:void 0,t:void 0}),r})()}$e(["click"]);var fn=y("<span class=button__spinner>"),hn=y("<button>");function fe(e){const[t]=gt(e,["variant","size","loading","fullWidth","children","disabled","onClick","style","type","class"]),s=()=>t.variant||"primary",n=()=>t.size||"medium",l=()=>{const o=["button",`button--${s()}`,`button--${n()}`];return t.fullWidth&&o.push("button--full-width"),t.class&&o.push(t.class),o.join(" ")},r=()=>s()==="primary"?`color: ${Ys(u.settings.accentColor)?"#1A1A2E":"#FFFFFF"};`:"";return(()=>{var o=hn();return ft(o,"click",t.onClick),d(o,p(j,{get when(){return t.loading},get children(){return fn()}}),null),d(o,p(j,{get when(){return!t.loading},get children(){return t.children}}),null),L(i=>{var a=t.type||"button",m=l(),v=t.loading||t.disabled,c=`${r()} ${t.style||""}`;return a!==i.e&&z(o,"type",i.e=a),m!==i.t&&V(o,i.t=m),v!==i.a&&(o.disabled=i.a=v),i.o=ie(o,c,i.o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()}$e(["click"]);var pn=y("<div>");function O(e){const t={"--skeleton-width":e.width||"100%","--skeleton-height":e.height||"20px","--skeleton-radius":e.borderRadius||"12px"};return(()=>{var s=pn();return L(n=>{var l=`skeleton ${e.class||""}`,r=t;return l!==n.e&&V(s,n.e=l),n.t=ie(s,r,n.t),n},{e:void 0,t:void 0}),s})()}var mn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z">'),vn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z">'),_n=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z">'),yn=y('<div class=status-hero><div class=status-hero__indicator><span></span></div><div><div></div><svg width=100 height=100 viewBox="0 0 24 24"class=status-hero__shield-svg><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z">'),bn=y('<h3 class="status-section__header color-text-secondary">Quick Stats'),wn=y('<div class=status-stats><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Active Rules</div></div><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Excluded Apps</div></div><div class="status-stats__card bg-surface"><div class="status-stats__value status-stats__value--small"></div><div class="status-stats__label color-text-tertiary">Uptime'),$n=y('<h3 class="status-section__header color-text-secondary">Mode Statistics'),xn=y('<div class=status-mode><div class=status-mode__row><div class=status-mode__label><span class=status-mode__dot></span><span class="status-mode__text color-text-primary">VFS Redirection</span></div><span class="status-mode__value color-text-accent"></span></div><div class=status-mode__row><div class=status-mode__label><span class=status-mode__dot></span><span class="status-mode__text color-text-primary">SUSFS Available</span></div><span class="status-mode__value color-text-accent">'),An=y('<h3 class="status-section__header color-text-secondary">Mount Info'),Sn=y('<div class=status-mount__cards><div class="status-mount__card bg-surface"><div class="status-mount__card-label color-text-tertiary">Modules</div><div class="status-mount__card-value color-text-primary"> active</div></div><div class="status-mount__card bg-surface"><div class="status-mount__card-label color-text-tertiary">Source</div><div class="status-mount__card-value color-text-accent">KSU'),Mn=y('<div class="status-mount__paths-label color-text-tertiary">Redirected Paths'),kn=y("<div class=status-mount__paths>"),In=y('<h3 class="status-section__header color-text-secondary">System Health'),Cn=y('<div><div class=status-health__item-header><span class=status-health__level>WARNING</span><span class="status-health__title color-text-primary">Rules</span></div><div class="status-health__message status-health__message--warning color-text-secondary">No redirection rules configured'),Pn=y('<div class=status-health><div><div class=status-health__item-header><span class=status-health__level>INFO</span><span class="status-health__title color-text-primary">System</span></div><div class="status-health__message color-text-secondary">SUSFS integration active'),En=y('<div class=status-activity__header><h3 class="status-section__header status-activity__title color-text-secondary">Recent Activity</h3><button class="status-activity__toggle color-text-accent">'),Tn=y("<div class=status-activity__list>"),Nn=y('<h3 class="status-section__header color-text-secondary">System Info'),Ln=y('<div class=status-info__grid><div><span class="status-info__label color-text-tertiary">Device:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">Android:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">SELinux:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">Kernel:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">Driver:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">SUSFS:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">misc:</span><span class=color-text-primary>/dev/zeromount'),Fn=y("<div class=status>"),Rn=y("<div class=status-hero>"),Dn=y('<div class=status-stats><div class="status-stats__card bg-surface"></div><div class="status-stats__card bg-surface"></div><div class="status-stats__card bg-surface">'),Zn=y('<div class="status-mount__empty color-text-tertiary">No paths redirected'),Un=y('<div class="status-mount__chip bg-surface color-text-primary">'),zn=y('<div class="status-activity__item bg-surface"><div class=status-activity__icon></div><div class=status-activity__content><div class="status-activity__message color-text-primary"></div><div class="status-activity__time color-text-tertiary">'),Bn=y("<div class=status-info__grid><div></div><div></div><div></div><div></div><div></div><div></div><div>");function On(){const[e,t]=T(1),[s,n]=T(0),[l,r]=T(0),[o,i]=T(0),[a,m]=T(!1);ue(()=>{if(u.engineActive()){const f=setInterval(()=>{t(1.03),setTimeout(()=>t(1),150)},3e3);ut(()=>clearInterval(f))}}),dt(()=>{const f=(g,_,w=500)=>{const k=performance.now(),E=F=>{const I=F-k,G=Math.min(I/w,1),R=1-Math.pow(1-G,3);_(Math.round(0+(g-0)*R)),G<1&&requestAnimationFrame(E)};requestAnimationFrame(E)};setTimeout(()=>{f(u.stats.activeRules,n),f(u.stats.excludedUids,r),f(u.stats.hitsToday,i)},300)});const v=f=>{const g=Math.floor((Date.now()-f.getTime())/1e3);if(g<60)return"Just now";const _=Math.floor(g/60);if(_<60)return`${_} min ago`;const w=Math.floor(_/60);return w<24?`${w}h ago`:`${Math.floor(w/24)} days ago`},c=f=>{const g=u.currentTheme();switch(f){case"rule_added":case"rule_removed":return(()=>{var _=mn();return L(()=>z(_,"fill",g.colorSuccess)),_})();case"uid_excluded":case"uid_included":return(()=>{var _=vn();return L(()=>z(_,"fill",g.colorError)),_})();default:return(()=>{var _=_n();return L(()=>z(_,"fill",g.colorWarning)),_})()}},b=oe(()=>{const f=new Set;return u.rules().forEach(g=>{const _=g.target.split("/").filter(Boolean);if(_.length>0){const w="/"+_[0];w!=="/[BLOCKED]"&&f.add(w)}}),Array.from(f).sort()}),$=oe(()=>u.ksuModules().filter(f=>f.isLoaded).length),A=()=>u.loading.status&&!u.systemInfo.driverVersion;return(()=>{var f=Fn();return d(f,p(j,{get when(){return!A()},get fallback(){return p(se,{variant:"gradient-border",padding:"large",get children(){var g=Rn();return d(g,p(O,{width:"120px",height:"24px",borderRadius:"12px"}),null),d(g,p(O,{width:"100px",height:"100px",borderRadius:"50%",class:"status-hero__skeleton-shield"}),null),d(g,p(O,{width:"200px",height:"48px",borderRadius:"24px"}),null),g}})},get children(){return p(se,{variant:"gradient-border",padding:"large",get style(){return u.engineActive()?"animation: glowPulse 3s ease-in-out infinite;":""},get children(){var g=yn(),_=g.firstChild,w=_.firstChild,x=_.nextSibling,k=x.firstChild,E=k.nextSibling,F=E.firstChild;return d(_,()=>u.engineActive()?"Engine Active":"Engine Inactive",null),d(g,p(fe,{size:"large",onClick:()=>u.toggleEngine(),get loading(){return u.loading.engine},get style(){return`min-width: 200px; ${u.engineActive()?"":"opacity: 0.8; filter: grayscale(20%);"}`},get children(){return u.engineActive()?"DISABLE ENGINE":"ENABLE ENGINE"}}),null),L(I=>{var G=u.engineActive()?u.currentTheme().textOnAccent:u.currentTheme().textTertiary,R=`status-hero__dot ${u.engineActive()?"status-hero__dot--active":""}`,W=u.engineActive()?u.currentTheme().textOnAccent:u.currentTheme().textTertiary,P=u.engineActive()?`0 0 12px rgba(${u.currentTheme().accentRgb}, 0.5)`:"none",ne=`status-hero__shield ${u.engineActive()?"status-hero__shield--active":""}`,ee=`scale(${e()})`,H=`status-hero__glow ${u.engineActive()?"status-hero__glow--active":"status-hero__glow--inactive"}`,re=u.engineActive()?`radial-gradient(circle, ${u.currentTheme().colorSuccessGlow} 0%, transparent 70%)`:"transparent",ae=u.engineActive()?`drop-shadow(0 0 20px ${u.currentTheme().colorSuccessGlow})`:"none",ce=u.engineActive()?u.currentTheme().textOnAccent:u.currentTheme().textTertiary,ge=u.engineActive()?.9:.5;return G!==I.e&&te(_,"color",I.e=G),R!==I.t&&V(w,I.t=R),W!==I.a&&te(w,"background",I.a=W),P!==I.o&&te(w,"box-shadow",I.o=P),ne!==I.i&&V(x,I.i=ne),ee!==I.n&&te(x,"transform",I.n=ee),H!==I.s&&V(k,I.s=H),re!==I.h&&te(k,"background",I.h=re),ae!==I.r&&te(E,"filter",I.r=ae),ce!==I.d&&z(F,"fill",I.d=ce),ge!==I.l&&z(F,"opacity",I.l=ge),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),g}})}}),null),d(f,p(se,{get children(){return[bn(),p(j,{get when(){return!A()},get fallback(){return(()=>{var g=Dn(),_=g.firstChild,w=_.nextSibling,x=w.nextSibling;return d(_,p(O,{width:"48px",height:"32px",borderRadius:"8px"}),null),d(_,p(O,{width:"72px",height:"14px",borderRadius:"6px"}),null),d(w,p(O,{width:"48px",height:"32px",borderRadius:"8px"}),null),d(w,p(O,{width:"80px",height:"14px",borderRadius:"6px"}),null),d(x,p(O,{width:"48px",height:"32px",borderRadius:"8px"}),null),d(x,p(O,{width:"64px",height:"14px",borderRadius:"6px"}),null),g})()},get children(){var g=wn(),_=g.firstChild,w=_.firstChild,x=_.nextSibling,k=x.firstChild,E=x.nextSibling,F=E.firstChild;return d(w,s),d(k,l),d(F,()=>u.systemInfo.uptime||""),g}})]}}),null),d(f,p(se,{get children(){return[$n(),(()=>{var g=xn(),_=g.firstChild,w=_.firstChild,x=w.firstChild,k=w.nextSibling,E=_.nextSibling,F=E.firstChild,I=F.firstChild,G=F.nextSibling;return d(k,()=>u.rules().length),d(G,(()=>{var R=he(()=>!!(u.systemInfo.susfsVersion&&u.systemInfo.susfsVersion!=="N/A"));return()=>R()?`Yes (${u.systemInfo.susfsVersion})`:"No"})()),L(R=>{var W=u.currentTheme().colorSuccess,P=u.currentTheme().colorInfo||"#3b82f6";return W!==R.e&&te(x,"background",R.e=W),P!==R.t&&te(I,"background",R.t=P),R},{e:void 0,t:void 0}),g})()]}}),null),d(f,p(se,{get children(){return[An(),(()=>{var g=Sn(),_=g.firstChild,w=_.firstChild,x=w.nextSibling,k=x.firstChild;return d(x,$,k),g})(),Mn(),p(j,{get when(){return b().length>0},get fallback(){return Zn()},get children(){var g=kn();return d(g,p(pe,{get each(){return b()},children:_=>(()=>{var w=Un();return d(w,_),w})()})),g}})]}}),null),d(f,p(se,{get children(){return[In(),(()=>{var g=Pn(),_=g.firstChild,w=_.firstChild,x=w.firstChild;return d(g,p(j,{get when(){return u.rules().length===0},get children(){var k=Cn(),E=k.firstChild,F=E.firstChild;return L(I=>te(F,"color",u.currentTheme().colorWarning)),k}}),null),L(k=>te(x,"color",u.currentTheme().colorInfo||"#3b82f6")),g})()]}}),null),d(f,p(se,{get children(){return[(()=>{var g=En(),_=g.firstChild,w=_.nextSibling;return w.$$click=()=>m(!a()),d(w,()=>a()?"Show Less":"View All"),g})(),(()=>{var g=Tn();return d(g,p(pe,{get each(){return he(()=>!!a())()?u.activity():u.activity().slice(0,3)},children:(_,w)=>(()=>{var x=zn(),k=x.firstChild,E=k.nextSibling,F=E.firstChild,I=F.nextSibling;return d(k,()=>c(_.type)),d(F,()=>_.message),d(I,()=>v(_.timestamp)),L(G=>te(x,"animation",`slideInRight 0.3s ease-out ${w()*.1}s both`)),x})()})),g})()]}}),null),d(f,p(se,{get children(){return[Nn(),p(j,{get when(){return!A()},get fallback(){return(()=>{var g=Bn(),_=g.firstChild,w=_.nextSibling,x=w.nextSibling,k=x.nextSibling,E=k.nextSibling,F=E.nextSibling,I=F.nextSibling;return d(_,p(O,{width:"140px",height:"16px"})),d(w,p(O,{width:"100px",height:"16px"})),d(x,p(O,{width:"90px",height:"16px"})),d(k,p(O,{width:"160px",height:"16px"})),d(E,p(O,{width:"80px",height:"16px"})),d(F,p(O,{width:"70px",height:"16px"})),d(I,p(O,{width:"100px",height:"16px"})),g})()},get children(){var g=Ln(),_=g.firstChild,w=_.firstChild,x=w.nextSibling,k=_.nextSibling,E=k.firstChild,F=E.nextSibling,I=k.nextSibling,G=I.firstChild,R=G.nextSibling,W=I.nextSibling,P=W.firstChild,ne=P.nextSibling,ee=W.nextSibling,H=ee.firstChild,re=H.nextSibling,ae=ee.nextSibling,ce=ae.firstChild,ge=ce.nextSibling;return d(x,()=>u.systemInfo.deviceModel),d(F,()=>u.systemInfo.androidVersion),d(R,()=>u.systemInfo.selinuxStatus),d(ne,()=>u.systemInfo.kernelVersion),d(re,()=>u.systemInfo.driverVersion),d(ge,()=>u.systemInfo.susfsVersion),g}})]}}),null),f})()}$e(["click"]);var Vn=y("<div><div class=input__wrapper><input class=input__field>"),Kn=y("<label class=input__label>"),Gn=y("<span class=input__error>");function ss(e){const[t]=gt(e,["label","error","fullWidth","placeholder","value","onInput","type","disabled"]),s=()=>{const n=["input"];return t.fullWidth&&n.push("input--full-width"),t.error&&n.push("input--error"),n.join(" ")};return(()=>{var n=Vn(),l=n.firstChild,r=l.firstChild;return d(n,(()=>{var o=he(()=>!!t.label);return()=>o()&&(()=>{var i=Kn();return d(i,()=>t.label),i})()})(),l),ft(r,"input",t.onInput),d(n,(()=>{var o=he(()=>!!t.error);return()=>o()&&(()=>{var i=Gn();return d(i,()=>t.error),i})()})(),null),L(o=>{var i=s(),a=t.type||"text",m=t.placeholder,v=t.disabled;return i!==o.e&&V(n,o.e=i),a!==o.t&&z(r,"type",o.t=a),m!==o.a&&z(r,"placeholder",o.a=m),v!==o.o&&(r.disabled=o.o=v),o},{e:void 0,t:void 0,a:void 0,o:void 0}),L(()=>r.value=t.value||""),n})()}$e(["input"]);var Hn=y("<span>");function At(e){const[t]=gt(e,["variant","size","children"]),s=()=>t.variant||"default",n=()=>t.size||"medium",l=()=>`badge badge--${n()} badge--${s()}`;return(()=>{var r=Hn();return d(r,()=>t.children),L(()=>V(r,l())),r})()}var Zt=y("<div class=modules__list>"),Yn=y('<div class=modules__empty><svg class=modules__empty-icon width=48 height=48 viewBox="0 0 24 24"fill=currentColor><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l4.59-4.58L18 11l-6 6z"></path></svg><div class=modules__empty-title></div><div class=modules__empty-subtitle>'),Wn=y('<div class=modules><div class=modules__search-row><div class=modules__search-wrapper><svg class=modules__search-icon width=20 height=20 viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">'),qn=y("<div class=modules__item-row><div class=modules__skeleton-content>"),Xn=y('<div class=modules__item-row><div><svg width=22 height=22 viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l4.59-4.58L18 11l-6 6z"></path></svg></div><div class=modules__item-content><div class=modules__item-name></div><div class=modules__item-meta> files</div></div><svg width=20 height=20 viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z">'),jn=y('<div class=modules__details><div class=modules__details-inner><div><div class=modules__detail-label>Path</div><div class=modules__path-value></div></div><div><div class="modules__detail-label modules__detail-label--partitions">Partitions</div><div class=modules__partitions></div></div><div class=modules__stats-row><div><span class=modules__stat-label>Files:</span><span class=modules__stat-value></span></div><div><span class=modules__stat-label>Status:</span><span>'),Jn=y("<span class=modules__partition-badge>/");const vt=()=>u.currentTheme();function Qn(){const[e,t]=T(""),[s,n]=T(null),[l,r]=T(new Set);dt(()=>{u.ksuModules().length===0&&u.scanKsuModules()});const o=()=>{const v=e().toLowerCase();return v?u.ksuModules().filter(c=>c.name.toLowerCase().includes(v)||c.path.toLowerCase().includes(v)):u.ksuModules()},i=async v=>{r(c=>{const b=new Set(c);return b.add(v.path),b});try{v.isLoaded?await u.unloadKsuModule(v.name,v.path):await u.loadKsuModule(v.name,v.path)}finally{r(c=>{const b=new Set(c);return b.delete(v.path),b})}},a=v=>l().has(v),m=v=>{const c=[];return v.hasSystem&&c.push("system"),v.hasVendor&&c.push("vendor"),v.hasProduct&&c.push("product"),c};return(()=>{var v=Wn(),c=v.firstChild,b=c.firstChild,$=b.firstChild;return d(b,p(ss,{placeholder:"Search modules...",get value(){return e()},onInput:A=>t(A.currentTarget.value),fullWidth:!0}),$),d(c,p(fe,{onClick:()=>u.scanKsuModules(),get loading(){return u.loading.modules},style:"white-space: nowrap;",children:"SCAN"}),null),d(v,p(j,{get when(){return u.loading.modules},get children(){var A=Zt();return d(A,p(pe,{each:[1,2,3],children:()=>p(se,{get children(){var f=qn(),g=f.firstChild;return d(f,p(O,{width:"44px",height:"44px",borderRadius:"12px"}),g),d(g,p(O,{width:"140px",height:"18px",borderRadius:"8px"}),null),d(g,p(O,{width:"80px",height:"14px",borderRadius:"6px"}),null),d(f,p(O,{width:"72px",height:"24px",borderRadius:"12px"}),null),f}})})),A}}),null),d(v,p(j,{get when(){return!u.loading.modules},get children(){var A=Zt();return d(A,p(pe,{get each(){return o()},children:(f,g)=>p(se,{hoverable:!0,get style(){return`animation: slideInRight 0.3s ease-out ${g()*.05}s both; cursor: pointer;`},onClick:()=>n(s()===f.path?null:f.path),get children(){return[(()=>{var _=Xn(),w=_.firstChild,x=w.firstChild,k=w.nextSibling,E=k.firstChild,F=E.nextSibling,I=F.firstChild,G=k.nextSibling;return d(E,()=>f.name),d(F,()=>f.fileCount,I),d(_,p(At,{get variant(){return f.isLoaded?"success":"default"},size:"small",get children(){return f.isLoaded?"Loaded":"Not Loaded"}}),G),L(R=>{var W=`modules__item-icon ${f.isLoaded?"modules__item-icon--active":"modules__item-icon--inactive"}`,P=f.isLoaded?"white":vt().textTertiary,ne=`modules__chevron ${s()===f.path?"modules__chevron--expanded":""}`,ee=vt().textTertiary;return W!==R.e&&V(w,R.e=W),P!==R.t&&z(x,"fill",R.t=P),ne!==R.a&&z(G,"class",R.a=ne),ee!==R.o&&z(G,"fill",R.o=ee),R},{e:void 0,t:void 0,a:void 0,o:void 0}),_})(),p(j,{get when(){return s()===f.path},get children(){var _=jn(),w=_.firstChild,x=w.firstChild,k=x.firstChild,E=k.nextSibling,F=x.nextSibling,I=F.firstChild,G=I.nextSibling,R=F.nextSibling,W=R.firstChild,P=W.firstChild,ne=P.nextSibling,ee=W.nextSibling,H=ee.firstChild,re=H.nextSibling;return d(E,()=>f.path),d(G,p(pe,{get each(){return m(f)},children:ae=>(()=>{var ce=Jn();return ce.firstChild,d(ce,ae,null),ce})()})),d(ne,()=>f.fileCount.toLocaleString()),d(re,()=>f.isLoaded?"Active":"Inactive"),d(w,p(fe,{get variant(){return f.isLoaded?"danger":"primary"},size:"small",get loading(){return a(f.path)},onClick:ae=>{ae.stopPropagation(),i(f)},style:"margin-top: 8px;",get children(){return f.isLoaded?"HOT UNLOAD":"HOT LOAD"}}),null),L(()=>V(re,`modules__stat-value ${f.isLoaded?"modules__stat-value--active":"modules__stat-value--inactive"}`)),_}})]}})}),null),d(A,p(j,{get when(){return he(()=>o().length===0)()&&!u.loading.modules},get children(){var f=Yn(),g=f.firstChild,_=g.nextSibling,w=_.nextSibling;return d(_,()=>e()?"No modules match your search":"No modules with system overlays"),d(w,()=>e()?"Try a different search term":"Install KernelSU modules with system/vendor/product directories"),f}}),null),A}}),null),L(()=>z($,"fill",vt().textTertiary)),v})()}var er=y("<button type=button><div></div><div>");function ke(e){const[t,s]=T(!1),[n,l]=T(e.checked?28:2),[r,o]=T(24);ue(()=>{l(e.checked?28:2)});const i=()=>{e.disabled||(o(28),setTimeout(()=>{o(24),e.onChange(!e.checked)},100))},a=()=>u.currentTheme();return(()=>{var m=er(),v=m.firstChild,c=v.nextSibling;return m.addEventListener("mouseleave",()=>s(!1)),m.$$mouseup=()=>s(!1),m.$$mousedown=()=>s(!0),m.$$click=i,L(b=>{var $=e.disabled,A=`
        position: relative;
        width: 56px;
        height: 28px;
        border-radius: 14px;
        border: none;
        cursor: ${e.disabled?"not-allowed":"pointer"};
        background: ${e.checked?a().gradientPrimary:a().bgSurfaceElevated};
        transition: background 0.3s ease;
        opacity: ${e.disabled?"0.5":"1"};
        padding: 0;
        outline: none;
      `,f=`
          position: absolute;
          inset: -4px;
          border-radius: 18px;
          background: ${e.checked?"rgba(var(--accent-rgb), 0.2)":"transparent"};
          filter: blur(8px);
          transition: all 0.3s ease;
          pointer-events: none;
        `,g=`
          position: absolute;
          top: 2px;
          left: ${n()}px;
          width: ${r()}px;
          height: 24px;
          border-radius: 12px;
          background: ${a().textPrimary};
          box-shadow: ${a().shadowSmall};
          transition: left 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), width 0.1s ease;
          transform: ${t()?"scale(0.95)":"scale(1)"};
        `;return $!==b.e&&(m.disabled=b.e=$),b.t=ie(m,A,b.t),b.a=ie(v,f,b.a),b.o=ie(c,g,b.o),b},{e:void 0,t:void 0,a:void 0,o:void 0}),m})()}$e(["click","mousedown","mouseup"]);var tr=y('<div><img class=config__icon-img><svg viewBox="0 0 24 24"class=config__icon-fallback><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z">'),sr=y('<div class=config__section-header><h3 class=config__section-title><svg width=18 height=18 viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"></path></svg>Excluded Apps'),nr=y("<p class=config__section-desc>These apps bypass spoofing and mounts are visible - caution"),Ut=y("<div class=config__apps>"),rr=y('<div class=config__section-header><h3 class=config__section-title><svg width=18 height=18 viewBox="0 0 24 24"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z">'),lr=y("<div class=config__system-toggle><span class=config__system-label>System Apps"),or=y('<div class="config__apps config__apps--scrollable">'),ir=y('<div class=config><div class=config__toolbar><div class=config__search><svg width=20 height=20 viewBox="0 0 24 24"class=config__search-icon><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">'),zt=y("<div class=config__empty>"),ar=y('<div class="config__app config__app--excluded"><div class=config__app-info><div class=config__app-name></div><div class=config__app-package>'),cr=y('<div class="config__app config__app--skeleton"><div class=config__skeleton-info>'),dr=y("<span class=config__sys-badge>SYS"),ur=y('<div class="config__app config__app--available"><div class=config__app-info><div class="config__app-name config__app-name--with-badge"></div><div class="config__app-package config__app-package--small">');const Fe=()=>u.currentTheme(),_t=new Map,at=new Set,gr=(e,t)=>{const s=()=>{t.style.display="none";const n=t.nextElementSibling;n&&(n.style.display="block")};if(_t.has(e)){t.src=_t.get(e),t.style.opacity="1";return}if(typeof globalThis.ksu<"u"&&typeof globalThis.ksu.getPackagesIcons=="function")try{const n=globalThis.ksu.getPackagesIcons(JSON.stringify([e]),100);if(n){const l=JSON.parse(n);if(l?.[0]?.icon){_t.set(e,l[0].icon),t.src=l[0].icon,t.style.opacity="1";return}}}catch(n){console.error("[ZM] Icon error:",e,n)}s()},fr=(e,t)=>{const s=e.querySelector("img");if(!s)return;const n=new IntersectionObserver(l=>{l.forEach(r=>{r.isIntersecting&&(gr(t,s),n.unobserve(e),n.disconnect(),at.delete(n))})},{rootMargin:"100px",threshold:.1});at.add(n),n.observe(e)},Bt=e=>{const t=e.size||40,s=t-8,n=t-12,l=t===40?"config__icon--40":"config__icon--36";return(()=>{var r=tr(),o=r.firstChild,i=o.nextSibling;return Xt(a=>a&&fr(a,e.packageName),r),V(r,`config__icon ${l}`),o.addEventListener("error",a=>{a.target.style.display="none",a.target.nextElementSibling?.removeAttribute("style")}),z(o,"width",s),z(o,"height",s),z(i,"width",n),z(i,"height",n),L(()=>z(i,"fill",Fe().textTertiary)),r})()};function hr(){const[e,t]=T(""),[s,n]=T(""),[l,r]=T(!1);let o;dt(()=>{u.loadInstalledApps()}),ue(()=>{const c=e();clearTimeout(o),o=window.setTimeout(()=>{n(c)},300)}),ut(()=>{o&&clearTimeout(o),u.stopPolling(),at.forEach(c=>c.disconnect()),at.clear()});const i=()=>new Set(u.excludedUids().map(c=>c.uid)),a=()=>{const c=s().toLowerCase(),b=u.excludedUids();return c?b.filter($=>$.appName.toLowerCase().includes(c)||$.packageName.toLowerCase().includes(c)||$.uid.toString().includes(c)):b},m=()=>{const c=s().toLowerCase(),b=i();let $=u.installedApps().filter(A=>!b.has(A.uid));return l()||($=$.filter(A=>!A.isSystemApp)),c&&($=$.filter(A=>A.appName.toLowerCase().includes(c)||A.packageName.toLowerCase().includes(c)||A.uid.toString().includes(c))),$.sort((A,f)=>A.appName.localeCompare(f.appName))},v=async c=>{await u.excludeUid(c.uid,c.packageName,c.appName)};return(()=>{var c=ir(),b=c.firstChild,$=b.firstChild,A=$.firstChild;return d($,p(ss,{placeholder:"Search apps...",get value(){return e()},onInput:f=>t(f.currentTarget.value),fullWidth:!0}),A),d(c,p(se,{get children(){return[(()=>{var f=sr(),g=f.firstChild,_=g.firstChild;return d(f,p(At,{variant:"error",size:"small",get children(){return u.excludedUids().length}}),null),L(()=>z(_,"fill",Fe().colorError)),f})(),nr(),p(j,{get when(){return a().length>0},get fallback(){return(()=>{var f=zt();return d(f,()=>s()?"No matches":"No excluded apps"),f})()},get children(){var f=Ut();return d(f,p(pe,{get each(){return a()},children:g=>(()=>{var _=ar(),w=_.firstChild,x=w.firstChild,k=x.nextSibling;return d(_,p(Bt,{get packageName(){return g.packageName},size:40}),w),d(x,()=>g.appName),d(k,()=>g.packageName),d(_,p(fe,{variant:"ghost",size:"small",onClick:()=>u.includeUid(g.uid),get style(){return`color: ${Fe().colorError}; padding: 6px 10px;`},children:"REMOVE"}),null),_})()})),f}})]}}),null),d(c,p(se,{get children(){return[(()=>{var f=rr(),g=f.firstChild,_=g.firstChild;return d(g,()=>l()?"All Apps":"User Apps",null),d(f,p(At,{variant:"info",size:"small",get children(){return m().length}}),null),L(()=>z(_,"fill",Fe().textAccent)),f})(),(()=>{var f=lr();return f.firstChild,d(f,p(ke,{get checked(){return l()},onChange:r}),null),f})(),p(j,{get when(){return!u.loading.apps},get fallback(){return(()=>{var f=Ut();return d(f,p(pe,{each:[1,2,3,4,5],children:()=>(()=>{var g=cr(),_=g.firstChild;return d(g,p(O,{width:"36px",height:"36px",borderRadius:"10px"}),_),d(_,p(O,{width:"120px",height:"16px",borderRadius:"6px"}),null),d(_,p(O,{width:"180px",height:"12px",borderRadius:"4px"}),null),d(g,p(O,{width:"64px",height:"28px",borderRadius:"14px"}),null),g})()})),f})()},get children(){return p(j,{get when(){return m().length>0},get fallback(){return(()=>{var f=zt();return d(f,(()=>{var g=he(()=>!!s());return()=>g()?"No matches":l()?"No apps found":"No user apps found"})()),f})()},get children(){var f=or();return d(f,p(pe,{get each(){return m()},children:g=>(()=>{var _=ur(),w=_.firstChild,x=w.firstChild,k=x.nextSibling;return d(_,p(Bt,{get packageName(){return g.packageName},size:36}),w),d(x,()=>g.appName,null),d(x,p(j,{get when(){return g.isSystemApp},get children(){return dr()}}),null),d(k,()=>g.packageName),d(_,p(fe,{variant:"ghost",size:"small",onClick:()=>v(g),style:"padding: 6px 10px;",children:"EXCLUDE"}),null),_})()})),f}})}})]}}),null),L(()=>z(A,"fill",Fe().textTertiary)),c})()}var pr=y("<div>"),mr=y("<div><div></div><h2>");function vr(e){const[t,s]=T(!1),[n,l]=T(100),[r,o]=T(0);return ue(()=>{if(e.open){s(!0),setTimeout(()=>{l(0),o(1)},10);const i=a=>{a.key==="Escape"&&e.onClose()};document.addEventListener("keydown",i),ut(()=>document.removeEventListener("keydown",i))}else l(100),o(0),setTimeout(()=>s(!1),300)}),p(j,{get when(){return t()},get children(){return[(()=>{var i=pr();return ft(i,"click",e.onClose),L(a=>ie(i,`
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          backdrop-filter: blur(4px);
          -webkit-backdrop-filter: blur(4px);
          z-index: 200;
          opacity: ${r()};
          transition: opacity 0.3s ease;
        `,a)),i})(),(()=>{var i=mr(),a=i.firstChild,m=a.nextSibling;return d(m,()=>e.title),d(i,()=>e.children,null),L(v=>{var c=`
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: ${u.currentTheme().gradientSecondary};
          border-top-left-radius: ${Ze.radiusXLarge};
          border-top-right-radius: ${Ze.radiusXLarge};
          padding: 24px 20px;
          padding-bottom: calc(24px + env(safe-area-inset-bottom));
          z-index: 201;
          max-height: 85vh;
          overflow-y: auto;
          transform: translateY(${n()}%);
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        `,b=`
            width: 40px;
            height: 4px;
            background: ${u.currentTheme().textTertiary};
            border-radius: 2px;
            margin: 0 auto 20px;
          `,$=`
            font-family: ${Ze.fontDisplay};
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            background: ${u.currentTheme().gradientPrimary};
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 24px;
          `;return v.e=ie(i,c,v.e),v.t=ie(a,b,v.t),v.a=ie(m,$,v.a),v},{e:void 0,t:void 0,a:void 0}),i})()]}})}$e(["click"]);var _r=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></svg>Appearance'),yr=y('<div class=settings__group><div class=settings__label>Theme</div><div class=settings__themes><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M12.43 2.3c-2.38-.59-4.68-.27-6.63.64-.35.16-.41.64-.1.86C8.3 5.6 10 8.6 10 12c0 3.4-1.7 6.4-4.3 8.2-.32.22-.26.7.09.86 1.28.6 2.71.94 4.21.94 6.05 0 10.85-5.38 9.87-11.6-.61-3.92-3.59-7.16-7.44-8.1z"></path></svg></div><div>Dark</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg></div><div>Light</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M12 4V2A10 10 0 0 0 2 12h2a8 8 0 0 1 8-8zm0 16a8 8 0 0 1-8-8H2a10 10 0 0 0 10 10v-2zm8-8a8 8 0 0 1-8 8v2a10 10 0 0 0 10-10h-2zm-8-8a8 8 0 0 1 8 8h2A10 10 0 0 0 12 2v2z"></path></svg></div><div>Auto</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><circle cx=12 cy=12 r=10></circle></svg></div><div>AMOLED'),br=y("<div><div class=settings__label>Accent Color</div><div class=settings__colors>"),wr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Random Accent</div><div class=settings__item-desc>Change accent color each session"),$r=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Animations</div><div class=settings__item-desc>Enable bouncy animations"),xr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Fix Bottom Nav</div><div class=settings__item-desc>Pin navigation to bottom of screen"),Ar=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"></path></svg>Engine'),Sr=y("<div class=settings__engine-controls><div class=settings__item><div class=settings__item-content><div class=settings__item-label>Auto-start on boot</div><div class=settings__item-desc>Start ZeroMount engine automatically</div></div></div><div class=settings__item><div class=settings__item-content><div class=settings__item-label>Verbose logging</div><div class=settings__item-desc>Log detailed operation info"),Mr=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>About'),kr=y('<div class=settings__about><div class=logo-container><div class=logo-ring></div><div class=logo-inner><svg width=56 height=56 viewBox="0 0 24 24"fill=url(#shieldGradient)><defs><linearGradient id=shieldGradient x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#FF6B6B></stop><stop offset=50% style=stop-color:#FF8E53></stop><stop offset=100% style=stop-color:#FFC107></stop></linearGradient></defs><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"></path></svg></div></div><div class=settings__about-title>ZeroMount</div><div class=settings__about-badge>GHOST</div><button class=settings__repo-btn><svg class=settings__repo-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>Repository</button><div class=settings__actions></div><div class=settings__footer>Made with <span class=glow-text>passion</span> for the Android <span class=glow-text>community'),Ir=y("<div class=settings__modal-content><p class=settings__modal-text>This will permanently delete all <!> VFS rules. This action cannot be undone.</p><div class=settings__modal-actions>"),Cr=y("<div class=settings>"),Pr=y("<button>");const Er=[{name:"Orange",color:"#FF8E53"},{name:"Emerald",color:"#00D68F"},{name:"Azure",color:"#00B4D8"},{name:"Slate",color:"#64748B"},{name:"Indigo",color:"#6366F1"},{name:"Coral",color:"#FF6B6B"}];function Tr(){const[e,t]=T(!1),s=()=>u.settings.accentColor,n=i=>{u.updateSettings({theme:i})},l=async()=>{await u.clearAllRules(),t(!1)},r=()=>{const i=`
Zero-Mount
Driver: ${u.systemInfo.driverVersion}
Kernel: ${u.systemInfo.kernelVersion}
SUSFS: ${u.systemInfo.susfsVersion}
Active Rules: ${u.stats.activeRules}
Excluded Apps: ${u.stats.excludedUids}
Engine: ${u.engineActive()?"Active":"Inactive"}
    `.trim();navigator.clipboard.writeText(i).then(()=>{u.showToast("Debug info copied to clipboard","success")})},o=i=>u.settings.theme===i;return(()=>{var i=Cr();return d(i,p(se,{get children(){return[_r(),(()=>{var a=yr(),m=a.firstChild,v=m.nextSibling,c=v.firstChild,b=c.firstChild,$=b.firstChild,A=b.nextSibling,f=c.nextSibling,g=f.firstChild,_=g.firstChild,w=g.nextSibling,x=f.nextSibling,k=x.firstChild,E=k.firstChild,F=k.nextSibling,I=x.nextSibling,G=I.firstChild,R=G.firstChild,W=G.nextSibling;return c.$$click=()=>n("dark"),f.$$click=()=>n("light"),x.$$click=()=>n("auto"),I.$$click=()=>n("amoled"),L(P=>{var ne=`settings__theme ${o("dark")?"settings__theme--active":""}`,ee=o("dark")?"var(--text-accent)":"var(--text-secondary)",H=`settings__theme-label ${o("dark")?"settings__theme-label--active":""}`,re=`settings__theme ${o("light")?"settings__theme--active":""}`,ae=o("light")?"var(--text-accent)":"var(--text-secondary)",ce=`settings__theme-label ${o("light")?"settings__theme-label--active":""}`,ge=`settings__theme ${o("auto")?"settings__theme--active":""}`,Ke=o("auto")?"var(--text-accent)":"var(--text-secondary)",Ee=`settings__theme-label ${o("auto")?"settings__theme-label--active":""}`,U=`settings__theme ${o("amoled")?"settings__theme--active":""}`,Ge=o("amoled")?"var(--text-accent)":"var(--text-secondary)",He=`settings__theme-label ${o("amoled")?"settings__theme-label--active":""}`;return ne!==P.e&&V(c,P.e=ne),ee!==P.t&&z($,"fill",P.t=ee),H!==P.a&&V(A,P.a=H),re!==P.o&&V(f,P.o=re),ae!==P.i&&z(_,"fill",P.i=ae),ce!==P.n&&V(w,P.n=ce),ge!==P.s&&V(x,P.s=ge),Ke!==P.h&&z(E,"fill",P.h=Ke),Ee!==P.r&&V(F,P.r=Ee),U!==P.d&&V(I,P.d=U),Ge!==P.l&&z(R,"fill",P.l=Ge),He!==P.u&&V(W,P.u=He),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),a})(),(()=>{var a=br(),m=a.firstChild,v=m.nextSibling;return d(v,p(pe,{each:Er,children:c=>(()=>{var b=Pr();return b.$$click=()=>{u.settings.autoAccentColor||u.updateSettings({accentColor:c.color})},L($=>{var A=`settings__color ${s()===c.color?"settings__color--active":""} ${u.settings.autoAccentColor?"settings__color--disabled":""}`,f=u.settings.autoAccentColor,g=c.color,_=s()===c.color?`0 0 0 3px ${c.color}40`:"none";return A!==$.e&&V(b,$.e=A),f!==$.t&&(b.disabled=$.t=f),g!==$.a&&te(b,"background",$.a=g),_!==$.o&&te(b,"box-shadow",$.o=_),$},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()})),L(()=>V(a,`settings__group ${u.settings.autoAccentColor?"settings__group--disabled":""}`)),a})(),(()=>{var a=wr();return a.firstChild,d(a,p(ke,{get checked(){return u.settings.autoAccentColor},onChange:async m=>{if(u.updateSettings({autoAccentColor:m}),m){const v=await K.fetchSystemColor();v&&u.updateSettings({accentColor:v})}}}),null),a})(),(()=>{var a=$r();return a.firstChild,d(a,p(ke,{get checked(){return u.settings.animationsEnabled},onChange:m=>u.updateSettings({animationsEnabled:m})}),null),a})(),(()=>{var a=xr();return a.firstChild,d(a,p(ke,{get checked(){return u.settings.fixedNav},onChange:m=>u.updateSettings({fixedNav:m})}),null),a})()]}}),null),d(i,p(se,{get children(){return[Ar(),(()=>{var a=Sr(),m=a.firstChild;m.firstChild;var v=m.nextSibling;return v.firstChild,d(m,p(ke,{get checked(){return u.settings.autoStartOnBoot},onChange:c=>u.updateSettings({autoStartOnBoot:c})}),null),d(v,p(ke,{get checked(){return u.settings.verboseLogging},onChange:async c=>{u.updateSettings({verboseLogging:c}),await K.setVerboseLogging(c)}}),null),d(a,p(fe,{variant:"danger",fullWidth:!0,onClick:()=>t(!0),children:"CLEAR ALL RULES"}),null),a})()]}}),null),d(i,p(se,{get children(){return[Mr(),(()=>{var a=kr(),m=a.firstChild,v=m.nextSibling,c=v.nextSibling,b=c.nextSibling,$=b.nextSibling;return b.$$click=()=>window.open(Ls,"_blank"),d($,p(fe,{variant:"secondary",size:"small",onClick:r,children:"Copy Debug Info"}),null),d($,p(fe,{variant:"secondary",size:"small",onClick:()=>{const A={rules:u.rules(),excludedUids:u.excludedUids(),settings:u.settings,exportDate:new Date().toISOString()},f=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),g=URL.createObjectURL(f),_=document.createElement("a");_.href=g,_.download="zeromount-config.json",_.click(),URL.revokeObjectURL(g),u.showToast("Config exported","success")},children:"Export Config"}),null),a})()]}}),null),d(i,p(vr,{get open(){return e()},onClose:()=>t(!1),title:"Clear All Rules?",get children(){var a=Ir(),m=a.firstChild,v=m.firstChild,c=v.nextSibling;c.nextSibling;var b=m.nextSibling;return d(m,()=>u.stats.activeRules,c),d(b,p(fe,{variant:"ghost",onClick:()=>t(!1),children:"Cancel"}),null),d(b,p(fe,{variant:"danger",onClick:l,get loading(){return u.loading.rules},children:"CLEAR ALL"}),null),a}}),null),i})()}$e(["click"]);var Nr=y("<div><main>"),Lr=y("<div>Loading...");function Fr(){const[e,t]=T(!1);return dt(async()=>{await u.loadInitialData(),t(!0)}),p(j,{get when(){return e()},get fallback(){return(()=>{var s=Lr();return L(n=>ie(s,`
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: ${u.currentTheme().bgPrimary};
            color: ${u.currentTheme().textPrimary};
            font-family: ${u.currentTheme().fontBody};
          `,n)),s})()},get children(){var s=Nr(),n=s.firstChild;return d(s,p(Cs,{}),n),d(n,p(As,{get children(){return[p(je,{get when(){return u.activeTab()==="status"},get children(){return p(On,{})}}),p(je,{get when(){return u.activeTab()==="modules"},get children(){return p(Qn,{})}}),p(je,{get when(){return u.activeTab()==="config"},get children(){return p(hr,{})}}),p(je,{get when(){return u.activeTab()==="settings"},get children(){return p(Tr,{})}})]}})),d(s,p(ln,{get activeTab(){return u.activeTab()},get onTabChange(){return u.setActiveTab}}),null),d(s,p(j,{get when(){return u.toast()},children:l=>p(un,{get message(){return l().message},get type(){return l().type},visible:!0})}),null),L(l=>{var r=`
          min-height: 100vh;
          min-height: 100dvh;
          background: ${u.currentTheme().bgPrimary};
          color: ${u.currentTheme().textPrimary};
          font-family: ${u.currentTheme().fontBody};
          overflow-x: hidden;
        `,o=`
            padding-bottom: ${u.settings.fixedNav?"calc(100px + 48px + env(safe-area-inset-bottom))":"calc(100px + env(safe-area-inset-bottom))"};
          `;return l.e=ie(s,r,l.e),l.t=ie(n,o,l.t),l},{e:void 0,t:void 0}),s}})}const Rr=document.getElementById("root");Ms(()=>p(Fr,{}),Rr);
