(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}})();const ws=!1,$s=(e,t)=>e===t,ve=Symbol("solid-proxy"),xs=typeof Proxy=="function",bt=Symbol("solid-track"),et={equals:$s};let Kt=Wt;const $e=1,tt=2,Ht={owned:null,cleanups:null,context:null,owner:null};var X=null;let mt=null,As=null,Y=null,Q=null,be=null,ct=0;function Fe(e,t){const s=Y,n=X,l=e.length===0,r=t===void 0?n:t,o=l?Ht:{owned:null,cleanups:null,context:r?r.context:null,owner:r},i=l?e:()=>e(()=>_e(()=>Ue(o)));X=o,Y=null;try{return Ee(i,!0)}finally{Y=s,X=n}}function N(e,t){t=t?Object.assign({},et,t):et;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=l=>(typeof l=="function"&&(l=l(s.value)),Yt(s,l));return[Gt.bind(s),n]}function L(e,t,s){const n=Mt(e,t,!1,$e);Ve(n)}function de(e,t,s){Kt=Is;const n=Mt(e,t,!1,$e);n.user=!0,be?be.push(n):Ve(n)}function oe(e,t,s){s=s?Object.assign({},et,s):et;const n=Mt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,Ve(n),Gt.bind(n)}function Ss(e){return Ee(e,!1)}function _e(e){if(Y===null)return e();const t=Y;Y=null;try{return e()}finally{Y=t}}function dt(e){de(()=>_e(e))}function ut(e){return X===null||(X.cleanups===null?X.cleanups=[e]:X.cleanups.push(e)),e}function wt(){return Y}function Ms(e){const t=oe(e),s=oe(()=>$t(t()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}function Gt(){if(this.sources&&this.state)if(this.state===$e)Ve(this);else{const e=Q;Q=null,Ee(()=>nt(this),!1),Q=e}if(Y){const e=this.observers?this.observers.length:0;Y.sources?(Y.sources.push(this),Y.sourceSlots.push(e)):(Y.sources=[this],Y.sourceSlots=[e]),this.observers?(this.observers.push(Y),this.observerSlots.push(Y.sources.length-1)):(this.observers=[Y],this.observerSlots=[Y.sources.length-1])}return this.value}function Yt(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Ee(()=>{for(let l=0;l<e.observers.length;l+=1){const r=e.observers[l],o=mt&&mt.running;o&&mt.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?Q.push(r):be.push(r),r.observers&&qt(r)),o||(r.state=$e)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function Ve(e){if(!e.fn)return;Ue(e);const t=ct;ks(e,e.value,t)}function ks(e,t,s){let n;const l=X,r=Y;Y=X=e;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=$e,e.owned&&e.owned.forEach(Ue),e.owned=null),e.updatedAt=s+1,Xt(o)}finally{Y=r,X=l}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?Yt(e,n):e.value=n,e.updatedAt=s)}function Mt(e,t,s,n=$e,l){const r={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:X,context:X?X.context:null,pure:s};return X===null||X!==Ht&&(X.owned?X.owned.push(r):X.owned=[r]),r}function st(e){if(e.state===0)return;if(e.state===tt)return nt(e);if(e.suspense&&_e(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ct);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===$e)Ve(e);else if(e.state===tt){const n=Q;Q=null,Ee(()=>nt(e,t[0]),!1),Q=n}}function Ee(e,t){if(Q)return e();let s=!1;t||(Q=[]),be?s=!0:be=[],ct++;try{const n=e();return Cs(s),n}catch(n){s||(be=null),Q=null,Xt(n)}}function Cs(e){if(Q&&(Wt(Q),Q=null),e)return;const t=be;be=null,t.length&&Ee(()=>Kt(t),!1)}function Wt(e){for(let t=0;t<e.length;t++)st(e[t])}function Is(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:st(n)}for(t=0;t<s;t++)st(e[t])}function nt(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const n=e.sources[s];if(n.sources){const l=n.state;l===$e?n!==t&&(!n.updatedAt||n.updatedAt<ct)&&st(n):l===tt&&nt(n,t)}}}function qt(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=tt,s.pure?Q.push(s):be.push(s),s.observers&&qt(s))}}function Ue(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),l=s.observers;if(l&&l.length){const r=l.pop(),o=s.observerSlots.pop();n<l.length&&(r.sourceSlots[o]=n,l[n]=r,s.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Ue(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ue(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ps(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Xt(e,t=X){throw Ps(e)}function $t(e){if(typeof e=="function"&&!e.length)return $t(e());if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=$t(e[s]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}const Es=Symbol("fallback");function Rt(e){for(let t=0;t<e.length;t++)e[t]()}function Ts(e,t,s={}){let n=[],l=[],r=[],o=0,i=t.length>1?[]:null;return ut(()=>Rt(r)),()=>{let a=e()||[],p=a.length,m,c;return a[bt],_e(()=>{let x,S,f,g,_,w,A,k,E;if(p===0)o!==0&&(Rt(r),r=[],n=[],l=[],o=0,i&&(i=[])),s.fallback&&(n=[Es],l[0]=Fe(R=>(r[0]=R,s.fallback())),o=1);else if(o===0){for(l=new Array(p),c=0;c<p;c++)n[c]=a[c],l[c]=Fe(b);o=p}else{for(f=new Array(p),g=new Array(p),i&&(_=new Array(p)),w=0,A=Math.min(o,p);w<A&&n[w]===a[w];w++);for(A=o-1,k=p-1;A>=w&&k>=w&&n[A]===a[k];A--,k--)f[k]=l[A],g[k]=r[A],i&&(_[k]=i[A]);for(x=new Map,S=new Array(k+1),c=k;c>=w;c--)E=a[c],m=x.get(E),S[c]=m===void 0?-1:m,x.set(E,c);for(m=w;m<=A;m++)E=n[m],c=x.get(E),c!==void 0&&c!==-1?(f[c]=l[m],g[c]=r[m],i&&(_[c]=i[m]),c=S[c],x.set(E,c)):r[m]();for(c=w;c<p;c++)c in f?(l[c]=f[c],r[c]=g[c],i&&(i[c]=_[c],i[c](c))):l[c]=Fe(b);l=l.slice(0,o=p),n=a.slice(0)}return l});function b(x){if(r[c]=x,i){const[S,f]=N(c);return i[c]=f,t(a[c],S)}return t(a[c])}}}function h(e,t){return _e(()=>e(t||{}))}function Xe(){return!0}const Ft={get(e,t,s){return t===ve?s:e.get(t)},has(e,t){return t===ve?!0:e.has(t)},set:Xe,deleteProperty:Xe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Xe,deleteProperty:Xe}},ownKeys(e){return e.keys()}};function gt(e,...t){const s=t.length;if(xs&&ve in e){const l=s>1?t.flat():t[0],r=t.map(o=>new Proxy({get(i){return o.includes(i)?e[i]:void 0},has(i){return o.includes(i)&&i in e},keys(){return o.filter(i=>i in e)}},Ft));return r.push(new Proxy({get(o){return l.includes(o)?void 0:e[o]},has(o){return l.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!l.includes(o))}},Ft)),r}const n=[];for(let l=0;l<=s;l++)n[l]={};for(const l of Object.getOwnPropertyNames(e)){let r=s;for(let a=0;a<t.length;a++)if(t[a].includes(l)){r=a;break}const o=Object.getOwnPropertyDescriptor(e,l);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?n[r][l]=o.value:Object.defineProperty(n[r],l,o)}return n}const jt=e=>`Stale read from <${e}>.`;function me(e){const t="fallback"in e&&{fallback:()=>e.fallback};return oe(Ts(()=>e.each,e.children,t||void 0))}function j(e){const t=e.keyed,s=oe(()=>e.when,void 0,void 0),n=t?s:oe(s,void 0,{equals:(l,r)=>!l==!r});return oe(()=>{const l=n();if(l){const r=e.children;return typeof r=="function"&&r.length>0?_e(()=>r(t?l:()=>{if(!_e(n))throw jt("Show");return s()})):r}return e.fallback},void 0,void 0)}function Ns(e){const t=Ms(()=>e.children),s=oe(()=>{const n=t(),l=Array.isArray(n)?n:[n];let r=()=>{};for(let o=0;o<l.length;o++){const i=o,a=l[o],p=r,m=oe(()=>p()?void 0:a.when,void 0,void 0),c=a.keyed?m:oe(m,void 0,{equals:(b,x)=>!b==!x});r=()=>p()||(c()?[i,m,a]:void 0)}return r});return oe(()=>{const n=s()();if(!n)return e.fallback;const[l,r,o]=n,i=o.children;return typeof i=="function"&&i.length>0?_e(()=>i(o.keyed?r():()=>{if(_e(s)()?.[0]!==l)throw jt("Match");return r()})):i},void 0,void 0)}function je(e){return e}const pe=e=>oe(()=>e());function Ls(e,t,s){let n=s.length,l=t.length,r=n,o=0,i=0,a=t[l-1].nextSibling,p=null;for(;o<l||i<r;){if(t[o]===s[i]){o++,i++;continue}for(;t[l-1]===s[r-1];)l--,r--;if(l===o){const m=r<n?i?s[i-1].nextSibling:s[r-i]:a;for(;i<r;)e.insertBefore(s[i++],m)}else if(r===i)for(;o<l;)(!p||!p.has(t[o]))&&t[o].remove(),o++;else if(t[o]===s[r-1]&&s[i]===t[l-1]){const m=t[--l].nextSibling;e.insertBefore(s[i++],t[o++].nextSibling),e.insertBefore(s[--r],m),t[l]=s[r]}else{if(!p){p=new Map;let c=i;for(;c<r;)p.set(s[c],c++)}const m=p.get(t[o]);if(m!=null)if(i<m&&m<r){let c=o,b=1,x;for(;++c<l&&c<r&&!((x=p.get(t[c]))==null||x!==m+b);)b++;if(b>m-i){const S=t[o];for(;i<m;)e.insertBefore(s[i++],S)}else e.replaceChild(s[i++],t[o++])}else o++;else t[o++].remove()}}}const Dt="_$DX_DELEGATE";function Rs(e,t,s,n={}){let l;return Fe(r=>{l=r,t===document?e():d(t,e(),t.firstChild?null:void 0,s)},n.owner),()=>{l(),t.textContent=""}}function y(e,t,s,n){let l;const r=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},o=()=>(l||(l=r())).cloneNode(!0);return o.cloneNode=o,o}function xe(e,t=window.document){const s=t[Dt]||(t[Dt]=new Set);for(let n=0,l=e.length;n<l;n++){const r=e[n];s.has(r)||(s.add(r),t.addEventListener(r,Fs))}}function B(e,t,s){s==null?e.removeAttribute(t):e.setAttribute(t,s)}function V(e,t){t==null?e.removeAttribute("class"):e.className=t}function ft(e,t,s,n){Array.isArray(s)?(e[`$$${t}`]=s[0],e[`$$${t}Data`]=s[1]):e[`$$${t}`]=s}function ie(e,t,s){if(!t)return s?B(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof s=="string"&&(n.cssText=s=void 0),s||(s={}),t||(t={});let l,r;for(r in s)t[r]==null&&n.removeProperty(r),delete s[r];for(r in t)l=t[r],l!==s[r]&&(n.setProperty(r,l),s[r]=l);return s}function se(e,t,s){s!=null?e.style.setProperty(t,s):e.style.removeProperty(t)}function Jt(e,t,s){return _e(()=>e(t,s))}function d(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return rt(e,t,n,s);L(l=>rt(e,t(),l,s),n)}function Fs(e){let t=e.target;const s=`$$${e.type}`,n=e.target,l=e.currentTarget,r=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[s];if(a&&!t.disabled){const p=t[`${s}Data`];if(p!==void 0?a.call(t,p,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&r(t.host),!0},i=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();r(a[0]);for(let p=0;p<a.length-2&&(t=a[p],!!o());p++){if(t._$host){t=t._$host,i();break}if(t.parentNode===l)break}}else i();r(n)}function rt(e,t,s,n,l){for(;typeof s=="function";)s=s();if(t===s)return s;const r=typeof t,o=n!==void 0;if(e=o&&s[0]&&s[0].parentNode||e,r==="string"||r==="number"){if(r==="number"&&(t=t.toString(),t===s))return s;if(o){let i=s[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),s=ke(e,s,n,i)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t}else if(t==null||r==="boolean")s=ke(e,s,n);else{if(r==="function")return L(()=>{let i=t();for(;typeof i=="function";)i=i();s=rt(e,i,s,n)}),()=>s;if(Array.isArray(t)){const i=[],a=s&&Array.isArray(s);if(xt(i,t,s,l))return L(()=>s=rt(e,i,s,n,!0)),()=>s;if(i.length===0){if(s=ke(e,s,n),o)return s}else a?s.length===0?Zt(e,i,n):Ls(e,s,i):(s&&ke(e),Zt(e,i));s=i}else if(t.nodeType){if(Array.isArray(s)){if(o)return s=ke(e,s,n,t);ke(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function xt(e,t,s,n){let l=!1;for(let r=0,o=t.length;r<o;r++){let i=t[r],a=s&&s[e.length],p;if(!(i==null||i===!0||i===!1))if((p=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))l=xt(e,i,a)||l;else if(p==="function")if(n){for(;typeof i=="function";)i=i();l=xt(e,Array.isArray(i)?i:[i],Array.isArray(a)?a:[a])||l}else e.push(i),l=!0;else{const m=String(i);a&&a.nodeType===3&&a.data===m?e.push(a):e.push(document.createTextNode(m))}}return l}function Zt(e,t,s=null){for(let n=0,l=t.length;n<l;n++)e.insertBefore(t[n],s)}function ke(e,t,s,n){if(s===void 0)return e.textContent="";const l=n||document.createTextNode("");if(t.length){let r=!1;for(let o=t.length-1;o>=0;o--){const i=t[o];if(l!==i){const a=i.parentNode===e;!r&&!o?a?e.replaceChild(l,i):e.insertBefore(l,s):a&&i.remove()}else r=!0}}else e.insertBefore(l,s);return[l]}var Ds=y("<header class=header><h1 class=header__title>ZEROMOUNT</h1><span class=header__subtitle>Enginex0");function Zs(){return Ds()}const At=Symbol("store-raw"),Ie=Symbol("store-node"),ye=Symbol("store-has"),Qt=Symbol("store-self");function es(e){let t=e[ve];if(!t&&(Object.defineProperty(e,ve,{value:t=new Proxy(e,Bs)}),!Array.isArray(e))){const s=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let l=0,r=s.length;l<r;l++){const o=s[l];n[o].get&&Object.defineProperty(e,o,{enumerable:n[o].enumerable,get:n[o].get.bind(t)})}}return t}function lt(e){let t;return e!=null&&typeof e=="object"&&(e[ve]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function ze(e,t=new Set){let s,n,l,r;if(s=e!=null&&e[At])return s;if(!lt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,i=e.length;o<i;o++)l=e[o],(n=ze(l,t))!==l&&(e[o]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let a=0,p=o.length;a<p;a++)r=o[a],!i[r].get&&(l=e[r],(n=ze(l,t))!==l&&(e[r]=n))}return e}function ot(e,t){let s=e[t];return s||Object.defineProperty(e,t,{value:s=Object.create(null)}),s}function Be(e,t,s){if(e[t])return e[t];const[n,l]=N(s,{equals:!1,internal:!0});return n.$=l,e[t]=n}function Us(e,t){const s=Reflect.getOwnPropertyDescriptor(e,t);return!s||s.get||!s.configurable||t===ve||t===Ie||(delete s.value,delete s.writable,s.get=()=>e[ve][t]),s}function ts(e){wt()&&Be(ot(e,Ie),Qt)()}function zs(e){return ts(e),Reflect.ownKeys(e)}const Bs={get(e,t,s){if(t===At)return e;if(t===ve)return s;if(t===bt)return ts(e),s;const n=ot(e,Ie),l=n[t];let r=l?l():e[t];if(t===Ie||t===ye||t==="__proto__")return r;if(!l){const o=Object.getOwnPropertyDescriptor(e,t);wt()&&(typeof r!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(r=Be(n,t,r)())}return lt(r)?es(r):r},has(e,t){return t===At||t===ve||t===bt||t===Ie||t===ye||t==="__proto__"?!0:(wt()&&Be(ot(e,ye),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:zs,getOwnPropertyDescriptor:Us};function it(e,t,s,n=!1){if(!n&&e[t]===s)return;const l=e[t],r=e.length;s===void 0?(delete e[t],e[ye]&&e[ye][t]&&l!==void 0&&e[ye][t].$()):(e[t]=s,e[ye]&&e[ye][t]&&l===void 0&&e[ye][t].$());let o=ot(e,Ie),i;if((i=Be(o,t,l))&&i.$(()=>s),Array.isArray(e)&&e.length!==r){for(let a=e.length;a<r;a++)(i=o[a])&&i.$();(i=Be(o,"length",r))&&i.$(e.length)}(i=o[Qt])&&i.$()}function ss(e,t){const s=Object.keys(t);for(let n=0;n<s.length;n+=1){const l=s[n];it(e,l,t[l])}}function Os(e,t){if(typeof t=="function"&&(t=t(e)),t=ze(t),Array.isArray(t)){if(e===t)return;let s=0,n=t.length;for(;s<n;s++){const l=t[s];e[s]!==l&&it(e,s,l)}it(e,"length",n)}else ss(e,t)}function Le(e,t,s=[]){let n,l=e;if(t.length>1){n=t.shift();const o=typeof n,i=Array.isArray(e);if(Array.isArray(n)){for(let a=0;a<n.length;a++)Le(e,[n[a]].concat(t),s);return}else if(i&&o==="function"){for(let a=0;a<e.length;a++)n(e[a],a)&&Le(e,[a].concat(t),s);return}else if(i&&o==="object"){const{from:a=0,to:p=e.length-1,by:m=1}=n;for(let c=a;c<=p;c+=m)Le(e,[c].concat(t),s);return}else if(t.length>1){Le(e[n],t,[n].concat(s));return}l=e[n],s=[n].concat(s)}let r=t[0];typeof r=="function"&&(r=r(l,s),r===l)||n===void 0&&r==null||(r=ze(r),n===void 0||lt(l)&&lt(r)&&!Array.isArray(r)?ss(l,r):it(e,n,r))}function Je(...[e,t]){const s=ze(e||{}),n=Array.isArray(s),l=es(s);function r(...o){Ss(()=>{n&&o.length===1?Os(s,o[0]):Le(s,o)})}return[l,r]}const Z={BINARY:"/data/adb/modules/zeromount/bin/zm",DEVICE:"/dev/zeromount",DATA_DIR:"/data/adb/zeromount/",MODULE_PATHS:"/data/adb/zeromount/module_paths",EXCLUSION_FILE:"/data/adb/zeromount/.exclusion_list",EXCLUSION_META:"/data/adb/zeromount/.exclusion_meta.json",ACTIVITY_LOG:"/data/adb/zeromount/activity.log",VERBOSE_FLAG:"/data/adb/zeromount/.verbose",STATUS_CACHE:"/data/adb/zeromount/.status_cache.json"},Vs="https://github.com/backslashxx/zeromount",De="3.0.0",J=e=>new Promise(t=>setTimeout(t,e)),Se=[{id:"1",name:"Hide Magisk Data",source:"/data/adb/magisk",target:"/dev/null",hits:156,createdAt:new Date(Date.now()-7200*1e3),active:!0},{id:"2",name:"Block Detection Paths",source:"/system/bin/su",target:"[BLOCKED]",hits:2341,createdAt:new Date(Date.now()-4320*60*1e3),active:!0},{id:"3",name:"Redirect Config",source:"/data/local/tmp/.config",target:"/data/adb/.hidden",hits:47,createdAt:new Date(Date.now()-720*60*1e3),active:!0}],Ne=[{uid:10234,packageName:"com.example.detector",appName:"Native Detector",excludedAt:new Date(Date.now()-2880*60*1e3)},{uid:10456,packageName:"com.securityapp.holmes",appName:"Holmes Security",excludedAt:new Date(Date.now()-300*60*1e3)},{uid:10789,packageName:"com.momo.detector",appName:"Momo Detector",excludedAt:new Date(Date.now()-1440*60*1e3)}],Ks=[{id:"1",type:"rule_added",message:"Rule added: /data/local -> /null",timestamp:new Date(Date.now()-120*1e3)},{id:"2",type:"uid_excluded",message:"UID 10234 excluded (com.detect.app)",timestamp:new Date(Date.now()-900*1e3)},{id:"3",type:"engine_enabled",message:"Engine enabled",timestamp:new Date(Date.now()-3600*1e3)}],Hs=[{name:"PlayIntegrityFix",ruleCount:12},{name:"LSPosed",ruleCount:8},{name:"FontModule",ruleCount:45}],vt=[{name:"PlayIntegrityFix",path:"/data/adb/modules/playintegrityfix",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!0,fileCount:12},{name:"LSPosed",path:"/data/adb/modules/zygisk_lsposed",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:8},{name:"Font Manager",path:"/data/adb/modules/fontmanager",hasSystem:!0,hasVendor:!0,hasProduct:!1,isLoaded:!0,fileCount:45},{name:"Busybox NDK",path:"/data/adb/modules/busybox-ndk",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:156},{name:"Shamiko",path:"/data/adb/modules/shamiko",hasSystem:!1,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:0}],Gs=[{uid:10001,packageName:"com.android.chrome",appName:"Chrome",isSystemApp:!1,iconPath:"link/icons/com.android.chrome.png"},{uid:10002,packageName:"com.whatsapp",appName:"WhatsApp",isSystemApp:!1,iconPath:"link/icons/com.whatsapp.png"},{uid:10003,packageName:"com.instagram.android",appName:"Instagram",isSystemApp:!1,iconPath:"link/icons/com.instagram.android.png"},{uid:10004,packageName:"com.spotify.music",appName:"Spotify",isSystemApp:!1,iconPath:"link/icons/com.spotify.music.png"},{uid:10005,packageName:"com.twitter.android",appName:"X (Twitter)",isSystemApp:!1,iconPath:"link/icons/com.twitter.android.png"},{uid:10006,packageName:"com.netflix.mediaclient",appName:"Netflix",isSystemApp:!1,iconPath:"link/icons/com.netflix.mediaclient.png"},{uid:10007,packageName:"com.facebook.katana",appName:"Facebook",isSystemApp:!1,iconPath:"link/icons/com.facebook.katana.png"},{uid:10008,packageName:"com.discord",appName:"Discord",isSystemApp:!1,iconPath:"link/icons/com.discord.png"},{uid:10009,packageName:"com.telegram.messenger",appName:"Telegram",isSystemApp:!1,iconPath:"link/icons/com.telegram.messenger.png"},{uid:10010,packageName:"com.google.android.youtube",appName:"YouTube",isSystemApp:!1,iconPath:"link/icons/com.google.android.youtube.png"},{uid:10011,packageName:"io.github.vvb2060.mahoshojo",appName:"Momo Detector",isSystemApp:!1,iconPath:"link/icons/io.github.vvb2060.mahoshojo.png"},{uid:10012,packageName:"rikka.appops",appName:"App Ops",isSystemApp:!1,iconPath:"link/icons/rikka.appops.png"},{uid:10013,packageName:"com.termux",appName:"Termux",isSystemApp:!1,iconPath:"link/icons/com.termux.png"},{uid:10014,packageName:"com.topjohnwu.magisk",appName:"Magisk",isSystemApp:!1,iconPath:"link/icons/com.topjohnwu.magisk.png"},{uid:10015,packageName:"me.weishu.kernelsu",appName:"KernelSU",isSystemApp:!1,iconPath:"link/icons/me.weishu.kernelsu.png"},{uid:1e3,packageName:"com.android.settings",appName:"Settings",isSystemApp:!0,iconPath:"link/icons/com.android.settings.png"},{uid:1001,packageName:"com.android.phone",appName:"Phone",isSystemApp:!0,iconPath:"link/icons/com.android.phone.png"},{uid:10100,packageName:"com.android.systemui",appName:"System UI",isSystemApp:!0,iconPath:"link/icons/com.android.systemui.png"},{uid:10101,packageName:"com.google.android.gms",appName:"Google Play Services",isSystemApp:!0,iconPath:"link/icons/com.google.android.gms.png"},{uid:10102,packageName:"com.google.android.gsf",appName:"Google Services Framework",isSystemApp:!0,iconPath:"link/icons/com.google.android.gsf.png"},{uid:10103,packageName:"com.android.vending",appName:"Play Store",isSystemApp:!0,iconPath:"link/icons/com.android.vending.png"},{uid:10104,packageName:"com.google.android.apps.messaging",appName:"Messages",isSystemApp:!0,iconPath:"link/icons/com.google.android.apps.messaging.png"},{uid:10105,packageName:"com.android.providers.contacts",appName:"Contacts Storage",isSystemApp:!0,iconPath:"link/icons/com.android.providers.contacts.png"}],q={async getVersion(){return await J(100),`v${De}`},async getSystemInfo(){return await J(150),{driverVersion:`v${De}`,kernelVersion:"6.1.75",susfsVersion:"v1.5.2",uptime:"4h 23m",deviceModel:"Pixel 6",androidVersion:"14",selinuxStatus:"Enforcing"}},async getRules(){return await J(200),[...Se]},async addRule(e,t,s){await J(300);const n={id:Date.now().toString(),name:e,source:t,target:s,hits:0,createdAt:new Date,active:!0};return Se.push(n),n},async deleteRule(e){await J(200);const t=Se.findIndex(s=>s.id===e||s.source===e);t>-1&&Se.splice(t,1)},async clearAllRules(){await J(300),Se.length=0},async getExcludedUids(){return await J(200),[...Ne]},async excludeUid(e,t,s){await J(300);const n={uid:e,packageName:t,appName:s,excludedAt:new Date};return Ne.push(n),n},async includeUid(e){await J(200);const t=Ne.findIndex(s=>s.uid===e);t>-1&&Ne.splice(t,1)},async getActivity(){return await J(150),[...Ks]},async getStats(){return await J(100),{activeRules:Se.length,excludedUids:Ne.length,hitsToday:Se.reduce((e,t)=>e+t.hits,0)}},async toggleEngine(e){await J(400)},async setVerboseLogging(e){await J(100)},async getModules(){return await J(100),[...Hs]},async isEngineActive(){return!0},async getInstalledApps(){return await J(300),[...Gs]},async scanKsuModules(){return await J(200),[...vt]},async loadKsuModule(e,t){await J(500);const s=vt.find(n=>n.path===t);return s&&(s.isLoaded=!0),s?.fileCount||0},async unloadKsuModule(e,t){await J(400);const s=vt.find(n=>n.path===t);return s&&(s.isLoaded=!1),s?.fileCount||0},async fetchSystemColor(){return null}};function le(e){return"'"+e.replace(/'/g,"'\\''")+"'"}let Ys=0;function C(){return typeof globalThis.ksu>"u"}async function T(e,t=3e4){const s=globalThis.ksu;if(!s?.exec)throw console.error("[ZM-API] execCommand() FAILED: KSU not available"),new Error("KSU not available");return new Promise((n,l)=>{const r=`exec_cb_${Date.now()}_${Ys++}`,o=setTimeout(()=>{delete window[r],l(new Error(`Command timed out: ${e.substring(0,50)}...`))},t);window[r]=(i,a,p)=>{clearTimeout(o),delete window[r],n({errno:i,stdout:a,stderr:p})};try{s.exec(e,"{}",r)}catch(i){clearTimeout(o),delete window[r],l(i)}})}function Ws(e){console.log("[ZM-API] parseRulesOutput() input:",e?.slice(0,200));const s=e.trim().split(`
`).filter(n=>n.trim()).map((n,l)=>{const r=n.indexOf("->"),o=r===-1?n.trim():n.slice(0,r).trim(),i=r===-1?"[BLOCKED]":n.slice(r+2).trim();return{id:String(l+1),name:o.split("/").pop()||"Rule",source:o,target:i,hits:0,createdAt:new Date,active:!0}});return console.log("[ZM-API] parseRulesOutput() parsed",s.length,"rules"),s}async function qs(){console.log("[ZM-API] parseExclusionFiles() called");try{const{errno:e,stdout:t}=await T(`cat "${Z.EXCLUSION_FILE}"`);if(console.log("[ZM-API] parseExclusionFiles() list result:",{errno:e,stdout:t?.slice(0,100)}),e!==0||!t.trim())return console.log("[ZM-API] parseExclusionFiles() no exclusions found"),[];const s=t.trim().split(`
`).map(r=>parseInt(r.trim(),10)).filter(r=>!isNaN(r));console.log("[ZM-API] parseExclusionFiles() parsed UIDs:",s);let n={};try{const{errno:r,stdout:o}=await T(`cat "${Z.EXCLUSION_META}"`);console.log("[ZM-API] parseExclusionFiles() meta result:",{errno:r,stdout:o?.slice(0,100)}),r===0&&o.trim()&&(n=JSON.parse(o),console.log("[ZM-API] parseExclusionFiles() parsed meta for",Object.keys(n).length,"UIDs"))}catch(r){console.log("[ZM-API] parseExclusionFiles() meta parse error (optional):",r)}const l=s.map(r=>{const o=n[String(r)];return{uid:r,packageName:o?.packageName||`app_${r}`,appName:o?.appName||`UID ${r}`,excludedAt:o?.excludedAt?new Date(o.excludedAt):new Date}});return console.log("[ZM-API] parseExclusionFiles() returning",l.length,"exclusions"),l}catch(e){return console.error("[ZM-API] parseExclusionFiles() error:",e),[]}}async function Xs(){console.log("[ZM-API] parseActivityLog() called");try{const{errno:e,stdout:t}=await T(`tail -50 "${Z.ACTIVITY_LOG}"`);if(console.log("[ZM-API] parseActivityLog() result:",{errno:e,stdout:t?.slice(0,100)}),e!==0||!t.trim())return console.log("[ZM-API] parseActivityLog() no activity found"),[];const s=["rule_added","rule_removed","uid_excluded","uid_included","engine_enabled","engine_disabled"],l=t.trim().split(`
`).filter(r=>r.trim()).map((r,o)=>{const i=r.match(/^\[(.+?)\]\s+(\w+):\s+(.+)$/);if(i){const[,a,p,m]=i,c=p.toLowerCase();return{id:String(o+1),type:s.includes(c)?c:"engine_enabled",message:m,timestamp:new Date(a)}}return{id:String(o+1),type:"engine_enabled",message:r,timestamp:new Date}});return console.log("[ZM-API] parseActivityLog() parsed",l.length,"activity items"),l}catch(e){return console.error("[ZM-API] parseActivityLog() error:",e),[]}}async function we(e,t){if(!C())try{const n=`[${new Date().toISOString()}] ${e.toUpperCase()}: ${t}`;await T(`echo ${le(n)} >> "${Z.ACTIVITY_LOG}"`)}catch(s){console.error("[ZM-API] logActivity() error:",s)}}const U={async getStatusCache(){if(console.log("[ZM-API] getStatusCache() called, mock:",C()),C())return null;try{const{errno:e,stdout:t}=await T(`cat "${Z.STATUS_CACHE}" 2>/dev/null`,2e3);if(e===0&&t.trim()){const s=JSON.parse(t.trim());if(Date.now()-s.timestamp<3e4)return console.log("[ZM-API] getStatusCache() hit:",s),s;console.log("[ZM-API] getStatusCache() stale, age:",Date.now()-s.timestamp)}}catch(e){console.log("[ZM-API] getStatusCache() miss:",e)}return null},async getVersion(){if(console.log("[ZM-API] getVersion() called, mock:",C()),C())return q.getVersion();try{const{errno:e,stdout:t}=await T(`${Z.BINARY} ver`);if(e===0&&t)return console.log("[ZM-API] getVersion() returning:",t.trim()),t.trim();console.log("[ZM-API] getVersion() command failed, using fallback")}catch(e){console.error("[ZM-API] getVersion() error:",e)}return console.log("[ZM-API] getVersion() returning fallback:",`v${De}`),`v${De}`},async getSystemInfo(){if(console.log("[ZM-API] getSystemInfo() called, mock:",C()),C())return q.getSystemInfo();const e={driverVersion:`v${De}`,kernelVersion:"-",susfsVersion:"-",uptime:"-",deviceModel:"-",androidVersion:"-",selinuxStatus:"-"};try{console.log("[ZM-API] getSystemInfo() fetching system info...");const[t,s,n,l,r,o,i]=await Promise.all([T(`${Z.BINARY} ver`).catch(()=>({errno:1,stdout:"",stderr:""})),T("uname -r").catch(()=>({errno:1,stdout:"",stderr:""})),T("cat /proc/uptime").catch(()=>({errno:1,stdout:"",stderr:""})),T("getprop ro.product.model").catch(()=>({errno:1,stdout:"",stderr:""})),T("getprop ro.build.version.release").catch(()=>({errno:1,stdout:"",stderr:""})),T("getenforce").catch(()=>({errno:1,stdout:"",stderr:""})),T('ksu_susfs show version 2>/dev/null || echo ""').catch(()=>({errno:1,stdout:"",stderr:""}))]);if(t.errno===0&&t.stdout&&(e.driverVersion=t.stdout.trim()),s.errno===0&&s.stdout&&(e.kernelVersion=s.stdout.trim()),n.errno===0&&n.stdout){const a=parseInt(n.stdout.split(" ")[0],10);if(!isNaN(a)){const p=Math.floor(a/3600),m=Math.floor(a%3600/60);e.uptime=`${p}h ${m}m`}}l.errno===0&&l.stdout.trim()&&(e.deviceModel=l.stdout.trim()),r.errno===0&&r.stdout.trim()&&(e.androidVersion=r.stdout.trim()),o.errno===0&&o.stdout.trim()&&(e.selinuxStatus=o.stdout.trim()),i.errno===0&&i.stdout.trim()&&(e.susfsVersion=i.stdout.trim()),console.log("[ZM-API] getSystemInfo() returning:",e)}catch(t){console.error("[ZM-API] getSystemInfo() error:",t)}return e},async getRules(){if(console.log("[ZM-API] getRules() called, mock:",C()),C())return q.getRules();try{const{errno:e,stdout:t}=await T(`${Z.BINARY} list`);if(e===0&&t.trim()){const s=Ws(t);return console.log("[ZM-API] getRules() returning",s.length,"rules"),s}console.log("[ZM-API] getRules() command returned no data")}catch(e){console.error("[ZM-API] getRules() error:",e)}return console.log("[ZM-API] getRules() returning empty array"),[]},async addRule(e,t,s){if(console.log("[ZM-API] addRule() called:",{name:e,source:t,target:s,mock:C()}),C())return q.addRule(e,t,s);const n=`${Z.BINARY} add ${le(t)} ${le(s)}`;console.log("[ZM-API] addRule() executing:",n);const{errno:l,stderr:r}=await T(n);if(l!==0)throw console.error("[ZM-API] addRule() failed:",{errno:l,stderr:r}),new Error(r||"Failed to add rule");const o={id:Date.now().toString(),name:e,source:t,target:s,hits:0,createdAt:new Date,active:!0};return console.log("[ZM-API] addRule() success, returning:",o.id),await we("RULE_ADDED",`${e}: ${t} -> ${s}`),o},async deleteRule(e){if(console.log("[ZM-API] deleteRule() called:",{sourcePath:e,mock:C()}),C())return q.deleteRule(e);const t=`${Z.BINARY} del ${le(e)}`;console.log("[ZM-API] deleteRule() executing:",t);const{errno:s,stderr:n}=await T(t);if(s!==0)throw console.error("[ZM-API] deleteRule() failed:",{errno:s,stderr:n}),new Error(n||"Failed to delete rule");console.log("[ZM-API] deleteRule() success"),await we("RULE_REMOVED",e)},async clearAllRules(){if(console.log("[ZM-API] clearAllRules() called, mock:",C()),C())return q.clearAllRules();const e=`${Z.BINARY} clear`;console.log("[ZM-API] clearAllRules() executing:",e);const{errno:t,stderr:s}=await T(e);if(t!==0)throw console.error("[ZM-API] clearAllRules() failed:",{errno:t,stderr:s}),new Error(s||"Failed to clear rules");console.log("[ZM-API] clearAllRules() success"),await we("RULES_CLEARED","All rules cleared")},async getExcludedUids(){if(console.log("[ZM-API] getExcludedUids() called, mock:",C()),C())return q.getExcludedUids();const e=await qs();return console.log("[ZM-API] getExcludedUids() returning",e.length,"exclusions"),e},async excludeUid(e,t,s){if(console.log("[ZM-API] excludeUid() called:",{uid:e,packageName:t,appName:s,mock:C()}),C())return q.excludeUid(e,t,s);if(!Number.isInteger(e)||e<0)throw new Error("Invalid UID");const n=`${Z.BINARY} blk ${le(String(e))}`;console.log("[ZM-API] excludeUid() executing:",n);const{errno:l,stderr:r}=await T(n);if(l!==0)throw console.error("[ZM-API] excludeUid() failed:",{errno:l,stderr:r}),new Error(r||"Failed to exclude UID");console.log("[ZM-API] excludeUid() success"),await T(`echo ${le(String(e))} >> "${Z.EXCLUSION_FILE}"`).catch(o=>console.error("[ZM-API] Exclusion persistence failed:",o));try{let o={};const{errno:i,stdout:a}=await T(`cat "${Z.EXCLUSION_META}" 2>/dev/null`);if(i===0&&a.trim())try{o=JSON.parse(a)}catch(p){console.error("[ZM-API] Metadata parse error, starting fresh:",p),o={}}o[String(e)]={packageName:t,appName:s,excludedAt:new Date().toISOString()},await T(`echo ${le(JSON.stringify(o))} > "${Z.EXCLUSION_META}"`)}catch(o){console.error("[ZM-API] Metadata save failed:",o)}return await we("UID_EXCLUDED",`${s} (${e})`),{uid:e,packageName:t,appName:s,excludedAt:new Date}},async includeUid(e){if(console.log("[ZM-API] includeUid() called:",{uid:e,mock:C()}),C())return q.includeUid(e);const t=`${Z.BINARY} unb ${le(String(e))}`;console.log("[ZM-API] includeUid() executing:",t);const{errno:s,stderr:n}=await T(t);if(s!==0)throw console.error("[ZM-API] includeUid() failed:",{errno:s,stderr:n}),new Error(n||"Failed to include UID");console.log("[ZM-API] includeUid() success"),await T(`sed -i '/^${e}$/d' "${Z.EXCLUSION_FILE}"`).catch(l=>console.error("[ZM-API] Exclusion removal failed:",l));try{const{errno:l,stdout:r}=await T(`cat "${Z.EXCLUSION_META}" 2>/dev/null`);if(l===0&&r.trim())try{const o=JSON.parse(r);delete o[String(e)],await T(`echo ${le(JSON.stringify(o))} > "${Z.EXCLUSION_META}"`)}catch(o){console.error("[ZM-API] Metadata parse error during cleanup:",o)}}catch(l){console.error("[ZM-API] Metadata cleanup failed:",l)}await we("UID_INCLUDED",`UID ${e}`)},async getActivity(){if(console.log("[ZM-API] getActivity() called, mock:",C()),C())return q.getActivity();const e=await Xs();return console.log("[ZM-API] getActivity() returning",e.length,"items"),e},async getStats(){if(console.log("[ZM-API] getStats() called, mock:",C()),C())return q.getStats();const[e,t]=await Promise.all([this.getRules(),this.getExcludedUids()]),s={activeRules:e.length,excludedUids:t.length,hitsToday:e.reduce((n,l)=>n+l.hits,0)};return console.log("[ZM-API] getStats() returning:",s),s},async toggleEngine(e){if(console.log("[ZM-API] toggleEngine() called:",{enable:e,mock:C()}),C())return q.toggleEngine(e);const t=e?`${Z.BINARY} enable`:`${Z.BINARY} disable`;console.log("[ZM-API] toggleEngine() executing:",t);const{errno:s,stderr:n}=await T(t);if(s!==0)throw console.error("[ZM-API] toggleEngine() failed:",{errno:s,stderr:n}),new Error(n||"Failed to toggle engine");console.log("[ZM-API] toggleEngine() success"),await we(e?"ENGINE_ENABLED":"ENGINE_DISABLED",e?"Engine activated":"Engine deactivated")},async setVerboseLogging(e){if(console.log("[ZM-API] setVerboseLogging() called:",{enabled:e,mock:C()}),C())return q.setVerboseLogging(e);const t=e?`touch "${Z.VERBOSE_FLAG}"`:`rm -f "${Z.VERBOSE_FLAG}"`;console.log("[ZM-API] setVerboseLogging() executing:",t);const{errno:s,stderr:n}=await T(t);if(s!==0)throw console.error("[ZM-API] setVerboseLogging() failed:",{errno:s,stderr:n}),new Error(n||"Failed to set verbose logging");console.log("[ZM-API] setVerboseLogging() success")},async getModules(){if(console.log("[ZM-API] getModules() called, mock:",C()),C())return q.getModules();try{const{errno:e,stdout:t}=await T(`ls "${Z.MODULE_PATHS}" 2>/dev/null`);if(e!==0||!t.trim())return console.log("[ZM-API] getModules() no modules found"),[];const s=t.trim().split(`
`).filter(Boolean);console.log("[ZM-API] getModules() found",s.length,"module names");const n=await Promise.all(s.map(async l=>{const r=`${Z.MODULE_PATHS}/${l}`,{stdout:o}=await T(`wc -l < ${le(r)} 2>/dev/null || echo 0`);return{name:l,ruleCount:parseInt(o.trim(),10)||0}}));return console.log("[ZM-API] getModules() returning",n.length,"modules"),n}catch(e){return console.error("[ZM-API] getModules() error:",e),[]}},async isEngineActive(){if(console.log("[ZM-API] isEngineActive() called, mock:",C()),C())return q.isEngineActive();try{const{errno:e}=await T(`[ -e "${Z.DEVICE}" ]`),t=e===0;return console.log("[ZM-API] isEngineActive() returning:",t),t}catch(e){return console.error("[ZM-API] isEngineActive() error:",e),!1}},async getInstalledApps(){if(console.log("[ZM-API] getInstalledApps() called, mock:",C()),C())return q.getInstalledApps();try{const e=await fetch("link/installed_apps.json?t="+Date.now());if(e.ok){const t=await e.text();try{const s=JSON.parse(t);if(Array.isArray(s))return console.log("[ZM-API] getInstalledApps() loaded",s.length,"apps"),s}catch(s){console.error("[ZM-API] JSON parse error in getInstalledApps:",s)}}}catch{console.log("[ZM-API] getInstalledApps() file not ready")}return[]},async refreshInstalledApps(){console.log("[ZM-API] refreshInstalledApps() called (no-op)")},async checkAppListStale(e){if(console.log("[ZM-API] checkAppListStale() cached:",e),C())return!1;try{const{errno:t,stdout:s}=await T("pm list packages -3 | wc -l");if(t===0){const n=parseInt(s.trim(),10);return console.log("[ZM-API] checkAppListStale() current:",n),n!==e}}catch(t){console.error("[ZM-API] checkAppListStale() error:",t)}return!1},async getRefreshTrigger(){if(C())return null;try{const e=await fetch("link/.refresh_trigger?t="+Date.now());if(e.ok){const t=await e.text(),s=parseInt(t.trim(),10);if(!isNaN(s))return s}}catch{}return null},async scanKsuModules(){if(console.log("[ZM-API] scanKsuModules() called, mock:",C()),C())return q.scanKsuModules();try{const e=`
# Extract unique module base paths from zm list sources (format: source->target)
loaded_modules=$(${Z.BINARY} list 2>/dev/null | awk -F'->' '{print $1}' | grep -oE '/data/adb/modules/[^/]+' | sort -u || echo "")
echo "["
first=1
for dir in /data/adb/modules/*/; do
  [ -d "$dir" ] || continue
  name=$(basename "$dir")
  path="/data/adb/modules/$name"

  has_sys=0; has_ven=0; has_prod=0
  [ -d "$path/system" ] && has_sys=1
  [ -d "$path/vendor" ] && has_ven=1
  [ -d "$path/product" ] && has_prod=1

  [ $has_sys -eq 0 ] && [ $has_ven -eq 0 ] && [ $has_prod -eq 0 ] && continue

  count=$(find "$path" -type f \\( -path "*/system/*" -o -path "*/vendor/*" -o -path "*/product/*" \\) 2>/dev/null | wc -l)

  display_name="$name"
  if [ -f "$path/module.prop" ]; then
    prop_name=$(grep "^name=" "$path/module.prop" 2>/dev/null | cut -d= -f2)
    [ -n "$prop_name" ] && display_name="$prop_name"
  fi

  is_loaded=0
  echo "$loaded_modules" | grep -qx "$path" && is_loaded=1

  [ $first -eq 0 ] && echo ","
  first=0
  printf '{"name":"%s","path":"%s","hasSystem":%s,"hasVendor":%s,"hasProduct":%s,"isLoaded":%s,"fileCount":%d}' \\
    "$display_name" "$path" \\
    $([ $has_sys -eq 1 ] && echo true || echo false) \\
    $([ $has_ven -eq 1 ] && echo true || echo false) \\
    $([ $has_prod -eq 1 ] && echo true || echo false) \\
    $([ $is_loaded -eq 1 ] && echo true || echo false) \\
    "$count"
done
echo "]"
`,{errno:t,stdout:s}=await T(e);if(t!==0)return console.log("[ZM-API] scanKsuModules() script failed"),[];const n=JSON.parse(s.trim());return console.log("[ZM-API] scanKsuModules() returning",n.length,"modules"),n}catch(e){return console.error("[ZM-API] scanKsuModules() error:",e),[]}},async loadKsuModule(e,t){if(console.log("[ZM-API] loadKsuModule() called:",{moduleName:e,modulePath:t,mock:C()}),C())return q.loadKsuModule(e,t);try{const{stdout:s}=await T(`find ${le(t)} -type f \\( -path "*/system/*" -o -path "*/vendor/*" -o -path "*/product/*" \\) 2>/dev/null`),n=s.trim().split(`
`).filter(Boolean);let l=0;for(const r of n){const o=r.replace(t,"");let i="";if(o.startsWith("/system/"))i=o;else if(o.startsWith("/vendor/"))i=o;else if(o.startsWith("/product/"))i=o;else continue;const a=`${Z.BINARY} add ${le(r)} ${le(i)}`,{errno:p}=await T(a);p===0&&l++}return await we("MODULE_LOADED",`${e}: ${l} rules added`),console.log("[ZM-API] loadKsuModule() added",l,"rules"),l}catch(s){throw console.error("[ZM-API] loadKsuModule() error:",s),s}},async unloadKsuModule(e,t){if(console.log("[ZM-API] unloadKsuModule() called:",{moduleName:e,modulePath:t,mock:C()}),C())return q.unloadKsuModule(e,t);try{const n=(await this.getRules()).filter(r=>r.source.startsWith(t));let l=0;for(const r of n){const o=`${Z.BINARY} del ${le(r.source)}`,{errno:i}=await T(o);i===0&&l++}return await we("MODULE_UNLOADED",`${e}: ${l} rules removed`),console.log("[ZM-API] unloadKsuModule() removed",l,"rules"),l}catch(s){throw console.error("[ZM-API] unloadKsuModule() error:",s),s}},async fetchSystemColor(){if(console.log("[ZM-API] fetchSystemColor() called, mock:",C()),C())return q.fetchSystemColor();try{const{errno:e,stdout:t}=await T("settings get secure theme_customization_overlay_packages");if(e!==0||!t.trim())return console.log("[ZM-API] fetchSystemColor() no system color found"),null;const s=/#?([0-9a-fA-F]{6,8})/i.exec(t);if(s){const n="#"+s[1].slice(0,6);return console.log("[ZM-API] fetchSystemColor() found:",n),n}return console.log("[ZM-API] fetchSystemColor() no hex color in output"),null}catch(e){return console.error("[ZM-API] fetchSystemColor() error:",e),null}}};let js=0;const Js=/^[a-zA-Z][a-zA-Z0-9_.]*$/;function Qs(e){return typeof e=="object"&&e!==null&&"packageName"in e&&typeof e.packageName=="string"}function ns(e){return Js.test(e)&&e.length<=256}async function kt(e,t=3e4){const s=globalThis.ksu;return s?.exec?new Promise(n=>{const l=`ksu_api_cb_${Date.now()}_${js++}`,r=setTimeout(()=>{delete window[l],n({errno:-1,stdout:"",stderr:"timeout"})},t);window[l]=(o,i,a)=>{clearTimeout(r),delete window[l],n({errno:o,stdout:i,stderr:a})};try{s.exec(e,"{}",l)}catch{clearTimeout(r),delete window[l],n({errno:-1,stdout:"",stderr:"exec failed"})}}):{errno:-1,stdout:"",stderr:"KSU not available"}}async function Qe(e){const t=globalThis.ksu,n={all:"listAllPackages",user:"listUserPackages",system:"listSystemPackages"}[e];if(t?.[n])try{const i=t[n]();if(i){const a=JSON.parse(i);if(Array.isArray(a))return a}}catch{}const l={all:"",user:"-3",system:"-s"},{stdout:r,errno:o}=await kt(`pm list packages ${l[e]} | sed 's/package://'`);return o===0&&r.trim()?r.trim().split(`
`).filter(Boolean):[]}async function en(e){if(!e.length)return[];const t=globalThis.ksu;if(t?.getPackagesInfo)try{const n=t.getPackagesInfo(JSON.stringify(e));if(n){const l=JSON.parse(n);if(Array.isArray(l)&&l.every(Qs))return l}}catch{}const s=[];for(const n of e){if(!ns(n)){s.push({packageName:n,appLabel:n});continue}const{stdout:l,errno:r}=await kt(`pm path ${n} 2>/dev/null | head -1 | sed 's/package://' | xargs -I{} aapt dump badging {} 2>/dev/null | grep "application-label:" | head -1 | sed "s/application-label:'\\(.*\\)'/\\1/"`);s.push({packageName:n,appLabel:r===0&&l.trim()?l.trim():n})}return s}async function tn(e){if(!ns(e))return null;const{stdout:t,errno:s}=await kt(`pm path ${e} 2>/dev/null | head -1 | sed 's/package://' | xargs -I{} aapt dump badging {} 2>/dev/null | grep "application-label:" | head -1 | sed "s/application-label:'\\(.*\\)'/\\1/"`);return s===0&&t.trim()?t.trim():null}const Pe={"#FF8E53":{gradient:"linear-gradient(135deg, #FF8E53 0%, #FF7B3D 50%, #E85D04 100%)",textAccent:"#FF8E53",rgb:"255, 142, 83",textOnAccent:"#1A1A2E"},"#00D68F":{gradient:"linear-gradient(135deg, #00D68F 0%, #00E5A0 50%, #69F0AE 100%)",textAccent:"#00D68F",rgb:"0, 214, 143",textOnAccent:"#1A1A2E"},"#00B4D8":{gradient:"linear-gradient(135deg, #00B4D8 0%, #48CAE4 50%, #90E0EF 100%)",textAccent:"#00B4D8",rgb:"0, 180, 216",textOnAccent:"#1A1A2E"},"#64748B":{gradient:"linear-gradient(135deg, #64748B 0%, #94A3B8 50%, #CBD5E1 100%)",textAccent:"#94A3B8",rgb:"100, 116, 139",textOnAccent:"#1A1A2E"},"#6366F1":{gradient:"linear-gradient(135deg, #6366F1 0%, #818CF8 50%, #A5B4FC 100%)",textAccent:"#818CF8",rgb:"99, 102, 241",textOnAccent:"#FFFFFF"},"#FF6B6B":{gradient:"linear-gradient(135deg, #FF6B6B 0%, #FF8A80 50%, #FFAB91 100%)",textAccent:"#FF6B6B",rgb:"255, 107, 107",textOnAccent:"#1A1A2E"}};function sn(e){const t=Pe[e];if(!t)return!1;const[s,n,l]=t.rgb.split(",").map(r=>parseInt(r.trim()));return(.299*s+.587*n+.114*l)/255>.6}function Ct(e){return Pe[e]||Pe["#FF8E53"]}const Oe={gradientPrimary:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 50%, #E85D04 100%)",gradientSecondary:"linear-gradient(180deg, #1A1A2E 0%, #0F0F1A 100%)",colorSuccess:"#00D68F",colorSuccessGlow:"rgba(0, 214, 143, 0.4)",colorWarning:"#FFB800",colorWarningGlow:"rgba(255, 184, 0, 0.4)",colorError:"#FF3D71",colorErrorGlow:"rgba(255, 61, 113, 0.4)",colorInfo:"#00B4D8",colorInfoGlow:"rgba(0, 180, 216, 0.4)",bgPrimary:"linear-gradient(180deg, #0F0F1A 0%, #1A1A2E 100%)",bgSurface:"rgba(255, 255, 255, 0.05)",bgSurfaceElevated:"rgba(255, 255, 255, 0.08)",bgSurfaceHover:"rgba(255, 255, 255, 0.12)",glassBg:"rgba(255, 255, 255, 0.06)",glassBorder:"rgba(255, 255, 255, 0.1)",glassBlur:"blur(20px)",textPrimary:"#FFFFFF",textSecondary:"rgba(255, 255, 255, 0.7)",textTertiary:"rgba(255, 255, 255, 0.5)",textAccent:"#FF8E53",fontDisplay:"'Space Grotesk', system-ui, sans-serif",fontBody:"'Inter', system-ui, sans-serif",fontMono:"'JetBrains Mono', 'Fira Code', monospace",radiusSmall:"8px",radiusMedium:"12px",radiusLarge:"16px",radiusXLarge:"24px",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.2)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.3)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.4)",shadowGlow:"0 0 20px rgba(255, 107, 107, 0.3)",accentRgb:"255, 107, 107"},Ut={...Oe,gradientSecondary:"linear-gradient(180deg, #FFFFFF 0%, #F5F5F5 100%)",bgPrimary:"linear-gradient(180deg, #F5F5F5 0%, #FFFFFF 100%)",bgSurface:"rgba(0, 0, 0, 0.03)",bgSurfaceElevated:"rgba(0, 0, 0, 0.05)",bgSurfaceHover:"rgba(0, 0, 0, 0.08)",glassBg:"rgba(0, 0, 0, 0.03)",glassBorder:"rgba(0, 0, 0, 0.1)",textPrimary:"#1A1A2E",textSecondary:"rgba(0, 0, 0, 0.7)",textTertiary:"rgba(0, 0, 0, 0.5)",textAccent:"#E65100",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.1)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.15)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.2)",shadowGlow:"0 0 20px rgba(255, 107, 107, 0.4)"},nn={...Oe,gradientSecondary:"linear-gradient(180deg, #000000 0%, #050505 100%)",bgPrimary:"#000000",bgSurface:"rgba(255, 255, 255, 0.03)",bgSurfaceElevated:"rgba(255, 255, 255, 0.05)",bgSurfaceHover:"rgba(255, 255, 255, 0.08)",glassBg:"rgba(255, 255, 255, 0.02)",glassBorder:"rgba(255, 255, 255, 0.08)",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.5)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.6)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.7)"},Ze=Oe;function rn(e,t){const s=document.documentElement;s.style.setProperty("--bg-primary",e.bgPrimary),s.style.setProperty("--bg-surface",e.bgSurface),s.style.setProperty("--bg-surface-elevated",e.bgSurfaceElevated),s.style.setProperty("--bg-surface-hover",e.bgSurfaceHover),s.style.setProperty("--glass-bg",e.glassBg),s.style.setProperty("--glass-border",e.glassBorder),s.style.setProperty("--text-primary",e.textPrimary),s.style.setProperty("--text-secondary",e.textSecondary),s.style.setProperty("--text-tertiary",e.textTertiary),s.style.setProperty("--gradient-secondary",e.gradientSecondary),s.style.setProperty("--color-success",e.colorSuccess),s.style.setProperty("--color-success-glow",e.colorSuccessGlow),s.style.setProperty("--color-warning",e.colorWarning),s.style.setProperty("--color-warning-glow",e.colorWarningGlow),s.style.setProperty("--color-error",e.colorError),s.style.setProperty("--color-error-glow",e.colorErrorGlow),s.style.setProperty("--color-info",e.colorInfo),s.style.setProperty("--color-info-glow",e.colorInfoGlow),s.style.setProperty("--shadow-small",e.shadowSmall),s.style.setProperty("--shadow-medium",e.shadowMedium),s.style.setProperty("--shadow-large",e.shadowLarge);const n=Ct(t||"#FF6B6B");s.style.setProperty("--gradient-primary",n.gradient),s.style.setProperty("--text-accent",n.textAccent),s.style.setProperty("--accent-rgb",n.rgb),s.style.setProperty("--text-on-accent",n.textOnAccent),s.style.setProperty("--shadow-glow",`0 0 20px rgba(${n.rgb}, 0.3)`)}function ln(e){const t=document.documentElement,s=Ct(e);t.style.setProperty("--gradient-primary",s.gradient),t.style.setProperty("--text-accent",s.textAccent),t.style.setProperty("--accent-rgb",s.rgb),t.style.setProperty("--text-on-accent",s.textOnAccent),t.style.setProperty("--shadow-glow",`0 0 20px rgba(${s.rgb}, 0.3)`)}function on(){console.log("[ZM-Store] createAppStore() initializing...");const[e,t]=N("status"),[s,n]=N(!0),[l,r]=Je({status:!1,modules:!1,apps:!1,rules:!1,activity:!1,engine:!1}),[o,i]=Je({activeRules:0,excludedUids:0,hitsToday:0}),[a,p]=Je({driverVersion:"",kernelVersion:"",susfsVersion:"",uptime:"",deviceModel:"",androidVersion:"",selinuxStatus:""}),[m,c]=N([]),[b,x]=N([]),[S,f]=N([]),[g,_]=N([]),[w,A]=N([]),[k,E]=N([]),R=typeof window<"u"?localStorage.getItem("zeromount-theme"):null,I=typeof window<"u"?localStorage.getItem("zeromount-fixedNav")==="true":!0,H=typeof window<"u"?localStorage.getItem("zeromount-autoAccent"):null,F=H===null?!0:H==="true",W=typeof window<"u"?localStorage.getItem("zeromount-accent"):null,P=Object.keys(Pe),re=P[Math.floor(Math.random()*P.length)],ee=F?re:W&&Pe[W]?W:"#FF8E53",[G,te]=Je({theme:R||"amoled",accentColor:ee,autoAccentColor:F,animationsEnabled:!0,autoStartOnBoot:!0,verboseLogging:!1,fixedNav:I}),[ae,ce]=N(typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!0);typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",$=>ce($.matches));const fe=oe(()=>{const v=G.theme,$=v==="light"?Ut:v==="amoled"?nn:v==="auto"?ae()?Oe:Ut:Oe,M=Ct(G.accentColor);return{...$,gradientPrimary:M.gradient,textAccent:M.textAccent,textOnAccent:M.textOnAccent,accentRgb:M.rgb,shadowGlow:`0 0 20px rgba(${M.rgb}, 0.3)`}});de(()=>{rn(fe(),G.accentColor)}),de(()=>{ln(G.accentColor)}),de(()=>{typeof window<"u"&&localStorage.setItem("zeromount-theme",G.theme)}),de(()=>{typeof window<"u"&&localStorage.setItem("zeromount-accent",G.accentColor)}),de(()=>{typeof window<"u"&&localStorage.setItem("zeromount-fixedNav",String(G.fixedNav))}),de(()=>{typeof window<"u"&&localStorage.setItem("zeromount-autoAccent",String(G.autoAccentColor))}),typeof window<"u"&&document.addEventListener("visibilitychange",()=>{if(document.visibilityState==="visible"&&G.autoAccentColor){const v=Object.keys(Pe),$=v[Math.floor(Math.random()*v.length)];te({accentColor:$})}});const[Ke,Te]=N(null),z=(v,$="info")=>{Te({message:v,type:$}),setTimeout(()=>Te(null),3e3)},He=async()=>{console.log("[ZM-Store] loadInitialData() starting..."),r({status:!0,rules:!0,activity:!0});try{const v=await U.getStatusCache();if(v){console.log("[ZM-Store] loadInitialData() CACHE HIT - instant load"),n(v.engineActive),i({activeRules:v.rulesCount,excludedUids:v.excludedCount,hitsToday:0}),p({driverVersion:v.driverVersion,kernelVersion:v.kernelVersion,susfsVersion:v.susfsVersion,uptime:v.uptime,deviceModel:v.deviceModel,androidVersion:v.androidVersion,selinuxStatus:v.selinuxStatus});const Tt=v.loadedModules?v.loadedModules.split(",").filter(Boolean):[];r({status:!1,rules:!1,activity:!1}),Promise.allSettled([U.getRules(),U.getExcludedUids(),U.getActivity(),U.scanKsuModules(),G.autoAccentColor?U.fetchSystemColor():Promise.resolve(null)]).then(ge=>{const pt=ge[0].status==="fulfilled"?ge[0].value:[],Nt=ge[1].status==="fulfilled"?ge[1].value:[],vs=ge[2].status==="fulfilled"?ge[2].value:[],_s=ge[3].status==="fulfilled"?ge[3].value:[],Lt=ge[4].status==="fulfilled"?ge[4].value:null;c(pt),x(Nt),f(vs),i({activeRules:pt.length,excludedUids:Nt.length,hitsToday:pt.reduce((ys,bs)=>ys+bs.hits,0)}),E(_s),Lt&&te({accentColor:Lt}),console.log("[ZM-Store] loadInitialData() background refresh complete")});return}console.log("[ZM-Store] loadInitialData() CACHE MISS - full load");const $=await Promise.allSettled([U.getRules(),U.getExcludedUids(),U.getActivity(),U.getSystemInfo(),U.getModules(),U.isEngineActive(),U.scanKsuModules(),G.autoAccentColor?U.fetchSystemColor():Promise.resolve(null)]),M=$[0].status==="fulfilled"?$[0].value:[],D=$[1].status==="fulfilled"?$[1].value:[],K=$[2].status==="fulfilled"?$[2].value:[],ue=$[3].status==="fulfilled"?$[3].value:{driverVersion:"",kernelVersion:"",susfsVersion:"",uptime:"",deviceModel:"",androidVersion:"",selinuxStatus:""},fs=$[4].status==="fulfilled"?$[4].value:[],hs=$[5].status==="fulfilled"?$[5].value:!1,ps=$[6].status==="fulfilled"?$[6].value:[],Et=$[7].status==="fulfilled"?$[7].value:null,ms={activeRules:M.length,excludedUids:D.length,hitsToday:M.reduce((Tt,ge)=>Tt+ge.hits,0)};c(M),x(D),f(K),i(ms),p(ue),_(fs),n(hs),E(ps),Et&&te({accentColor:Et}),console.log("[ZM-Store] loadInitialData() full load complete")}catch(v){console.error("[ZM-Store] loadInitialData() error:",v),z("Failed to load data","error")}finally{r({status:!1,rules:!1,activity:!1})}},Ge=async()=>{console.log("[ZM-Store] refreshModules() called");try{const v=await U.getModules();_(v),console.log("[ZM-Store] refreshModules() updated with",v.length,"modules")}catch(v){console.log("[ZM-Store] refreshModules() silent fail:",v)}},ls=async()=>{if(l.engine)return;const v=!s();console.log("[ZM-Store] toggleEngine() called, newState:",v),r("engine",!0);try{await U.toggleEngine(v),n(v),console.log("[ZM-Store] toggleEngine() success, engine now:",v),z(v?"Engine activated":"Engine deactivated","success")}catch($){console.error("[ZM-Store] toggleEngine() error:",$),z("Failed to toggle engine","error")}finally{r("engine",!1)}},os=async(v,$,M)=>{console.log("[ZM-Store] addRule() called:",{name:v,source:$,target:M}),r("rules",!0);try{const D=await U.addRule(v,$,M);return c(K=>[...K,D]),i("activeRules",K=>K+1),console.log("[ZM-Store] addRule() success, rule id:",D.id),z("Rule created successfully","success"),D}catch(D){throw console.error("[ZM-Store] addRule() error:",D),z("Failed to create rule","error"),D}finally{r("rules",!1)}},is=async v=>{console.log("[ZM-Store] deleteRule() called:",v),r("rules",!0);try{await U.deleteRule(v),c($=>$.filter(M=>M.source!==v)),i("activeRules",$=>$-1),console.log("[ZM-Store] deleteRule() success"),z("Rule deleted","success")}catch($){console.error("[ZM-Store] deleteRule() error:",$),z("Failed to delete rule","error")}finally{r("rules",!1)}},as=async(v,$,M)=>{if(console.log("[ZM-Store] excludeUid() called:",{uid:v,packageName:$,appName:M}),v<=0)return console.warn("[ZM-Store] Cannot exclude invalid UID:",v),z("Cannot exclude app with unknown UID","error"),null;if(Me.has(v))return console.log("[ZM-Store] Operation pending for UID:",v),null;Me.add(v),r("apps",!0);try{const D=await U.excludeUid(v,$,M);return x(K=>[...K,D]),i("excludedUids",K=>K+1),console.log("[ZM-Store] excludeUid() success"),z(`Excluded ${M}`,"success"),D}catch(D){throw console.error("[ZM-Store] excludeUid() error:",D),z("Failed to exclude UID","error"),D}finally{Me.delete(v),r("apps",!1)}},cs=async v=>{if(console.log("[ZM-Store] includeUid() called:",v),v<=0){console.warn("[ZM-Store] Cannot include invalid UID:",v),z("Cannot include app with unknown UID","error");return}if(Me.has(v)){console.log("[ZM-Store] Operation pending for UID:",v);return}Me.add(v),r("apps",!0);try{await U.includeUid(v),x($=>$.filter(M=>M.uid!==v)),i("excludedUids",$=>$-1),console.log("[ZM-Store] includeUid() success"),z("UID included","success")}catch($){console.error("[ZM-Store] includeUid() error:",$),z("Failed to include UID","error")}finally{Me.delete(v),r("apps",!1)}},ds=async()=>{console.log("[ZM-Store] clearAllRules() called"),r("rules",!0);try{await U.clearAllRules(),c([]),i("activeRules",0),console.log("[ZM-Store] clearAllRules() success"),z("All rules cleared","success")}catch(v){console.error("[ZM-Store] clearAllRules() error:",v),z("Failed to clear rules","error")}finally{r("rules",!1)}},us=v=>{console.log("[ZM-Store] updateSettings() called:",v),te(v)};let Ye=null,We=null,qe,ht=!1,Ae=!1;const Me=new Set,It=async()=>{const[v,$]=await Promise.all([Qe("user"),Qe("system")]),M=[...new Set([...v,...$])];if(M.length===0)return[];const D=await en(M),K=new Set($);return D.map(ue=>({packageName:ue.packageName,appName:ue.appLabel||ue.packageName,uid:ue.uid??-1,isSystemApp:ue.isSystemApp??K.has(ue.packageName)}))},Pt=async()=>{if(!Ae){Ae=!0;try{const v=await It();A(v),Ye=new Set(v.map(M=>M.packageName));const $=v.filter(M=>M.appName===M.packageName);if($.length>0&&$.length<10)for(const M of $)tn(M.packageName).then(D=>{D&&D!==M.packageName&&A(K=>K.map(ue=>ue.packageName===M.packageName?{...ue,appName:D}:ue))})}finally{Ae=!1}}},gs=()=>{ht||(ht=!0,qe=window.setInterval(async()=>{if(!Ae)try{const v=await U.getRefreshTrigger();if(v===null){if(Ye!==null){const[$,M]=await Promise.all([Qe("user"),Qe("system")]),D=new Set([...$,...M]).size,K=Ye.size;D!==K&&(console.log("[ZM-Store] Package count changed, refreshing"),await Pt())}return}if(We===null){We=v;return}v!==We&&(console.log("[ZM-Store] Trigger file changed, refreshing app list"),We=v,await Pt())}catch(v){console.error("[ZM-Store] Polling error:",v)}},2e3))};return{activeTab:e,setActiveTab:t,engineActive:s,loading:l,stats:o,systemInfo:a,rules:m,excludedUids:b,activity:S,modules:g,installedApps:w,ksuModules:k,settings:G,currentTheme:fe,toast:Ke,loadInitialData:He,refreshModules:Ge,loadInstalledApps:async()=>{if(Ae){console.log("[ZM-Store] App fetch already in progress, skipping");return}Ae=!0,console.log("[ZM-Store] loadInstalledApps() called"),r("apps",!0);try{if(C()){const $=await U.getInstalledApps();A($),console.log("[ZM-Store] loadInstalledApps() loaded",$.length,"mock apps");return}const v=await It();A(v),console.log("[ZM-Store] loadInstalledApps() loaded",v.length,"apps via KSU API"),Ye=new Set(v.map($=>$.packageName)),gs()}catch(v){console.error("[ZM-Store] loadInstalledApps() error:",v),z("Failed to load apps","error")}finally{Ae=!1,r("apps",!1)}},scanKsuModules:async()=>{console.log("[ZM-Store] scanKsuModules() called"),r("modules",!0);try{const v=await U.scanKsuModules();E(v),console.log("[ZM-Store] scanKsuModules() loaded",v.length,"modules")}catch(v){console.error("[ZM-Store] scanKsuModules() error:",v),z("Failed to scan modules","error")}finally{r("modules",!1)}},loadKsuModule:async(v,$)=>{console.log("[ZM-Store] loadKsuModule() called:",{moduleName:v,modulePath:$});try{const M=await U.loadKsuModule(v,$);return E(D=>D.map(K=>K.path===$?{...K,isLoaded:!0}:K)),i("activeRules",D=>D+M),console.log("[ZM-Store] loadKsuModule() success, added",M,"rules"),z(`Loaded ${v} (${M} rules)`,"success"),M}catch(M){throw console.error("[ZM-Store] loadKsuModule() error:",M),z(`Failed to load ${v}`,"error"),M}},unloadKsuModule:async(v,$)=>{console.log("[ZM-Store] unloadKsuModule() called:",{moduleName:v,modulePath:$});try{const M=await U.unloadKsuModule(v,$);return E(D=>D.map(K=>K.path===$?{...K,isLoaded:!1}:K)),i("activeRules",D=>Math.max(0,D-M)),console.log("[ZM-Store] unloadKsuModule() success, removed",M,"rules"),z(`Unloaded ${v} (${M} rules)`,"success"),M}catch(M){throw console.error("[ZM-Store] unloadKsuModule() error:",M),z(`Failed to unload ${v}`,"error"),M}},toggleEngine:ls,addRule:os,deleteRule:is,excludeUid:as,includeUid:cs,clearAllRules:ds,updateSettings:us,showToast:z,stopPolling:()=>{qe&&(clearInterval(qe),qe=void 0),ht=!1}}}console.log("[ZM-Store] Creating store root...");const u=Fe(on);console.log("[ZM-Store] Store created successfully");var an=y("<nav><div class=navbar__tabs><div>"),cn=y("<button><span class=navbar__icon></span><span class=navbar__label>"),dn=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z">'),un=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z">'),gn=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z">'),fn=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z">');const hn=[{id:"status",label:"Status",icon:"power_settings_new"},{id:"modules",label:"Modules",icon:"folder"},{id:"config",label:"Config",icon:"tune"},{id:"settings",label:"Settings",icon:"settings"}];function pn(e){const[t,s]=N(0),[n,l]=N(0),[r,o]=N(!1);let i={};de(()=>{const p=i[e.activeTab];if(p){const m=p.getBoundingClientRect(),c=p.parentElement?.getBoundingClientRect();c&&(o(!0),setTimeout(()=>{s(m.left-c.left),l(m.width),setTimeout(()=>o(!1),200)},50))}});const a=()=>u.settings.fixedNav;return(()=>{var p=an(),m=p.firstChild,c=m.firstChild;return d(m,h(me,{each:hn,children:b=>(()=>{var x=cn(),S=x.firstChild,f=S.nextSibling;return x.$$click=()=>e.onTabChange(b.id),Jt(g=>i[b.id]=g,x),d(S,(()=>{var g=pe(()=>b.icon==="power_settings_new");return()=>g()&&dn()})(),null),d(S,(()=>{var g=pe(()=>b.icon==="folder");return()=>g()&&un()})(),null),d(S,(()=>{var g=pe(()=>b.icon==="tune");return()=>g()&&gn()})(),null),d(S,(()=>{var g=pe(()=>b.icon==="settings");return()=>g()&&fn()})(),null),d(f,()=>b.label),L(()=>V(x,`navbar__tab ${e.activeTab===b.id?"navbar__tab--active":""}`)),x})()}),null),L(b=>{var x=`navbar ${a()?"navbar--fixed-nav":""}`,S=`navbar__indicator ${r()?"navbar__indicator--stretching":""}`,f=`${t()}px`,g=`${n()}px`;return x!==b.e&&V(p,b.e=x),S!==b.t&&V(c,b.t=S),f!==b.a&&se(c,"left",b.a=f),g!==b.o&&se(c,"width",b.o=g),b},{e:void 0,t:void 0,a:void 0,o:void 0}),p})()}xe(["click"]);var mn=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z">'),vn=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z">'),_n=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z">'),yn=y("<div>");function bn(e){const[t,s]=N(!1),[n,l]=N(100);de(()=>{e.visible?(s(!0),setTimeout(()=>l(0),10)):(l(100),setTimeout(()=>s(!1),300))});const r=()=>{const i=u.currentTheme();switch(e.type){case"success":return`
          background: ${i.colorSuccess};
          box-shadow: 0 8px 24px ${i.colorSuccessGlow};
        `;case"error":return`
          background: ${i.colorError};
          box-shadow: 0 8px 24px ${i.colorErrorGlow};
        `;default:return`
          background: ${i.colorInfo};
          box-shadow: 0 8px 24px ${i.colorInfoGlow};
        `}},o=()=>{switch(e.type){case"success":return mn();case"error":return vn();default:return _n()}};return h(j,{get when(){return t()},get children(){var i=yn();return d(i,o,null),d(i,()=>e.message,null),L(a=>ie(i,`
          position: fixed;
          bottom: 100px;
          left: 50%;
          transform: translateX(-50%) translateY(${n()}px);
          z-index: 1000;
          display: flex;
          align-items: center;
          gap: 10px;
          padding: 14px 20px;
          border-radius: ${Ze.radiusLarge};
          color: #FFFFFF;
          font-family: ${Ze.fontBody};
          font-size: 14px;
          font-weight: 500;
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
          ${r()}
        `,a)),i}})}var wn=y("<div>");function ne(e){const[t]=gt(e,["variant","padding","hoverable","children","style","onClick"]),s=()=>t.variant||"glass",n=()=>t.padding||"medium",l=()=>{const r=["card"];return r.push(`card--${s()}`),r.push(`card--padding-${n()}`),t.hoverable&&r.push("card--hoverable"),r.join(" ")};return(()=>{var r=wn();return ft(r,"click",t.onClick),d(r,()=>t.children),L(o=>{var i=l(),a=t.style||void 0;return i!==o.e&&V(r,o.e=i),o.t=ie(r,a,o.t),o},{e:void 0,t:void 0}),r})()}xe(["click"]);var $n=y("<span class=button__spinner>"),xn=y("<button>");function he(e){const[t]=gt(e,["variant","size","loading","fullWidth","children","disabled","onClick","style","type","class"]),s=()=>t.variant||"primary",n=()=>t.size||"medium",l=()=>{const o=["button",`button--${s()}`,`button--${n()}`];return t.fullWidth&&o.push("button--full-width"),t.class&&o.push(t.class),o.join(" ")},r=()=>s()==="primary"?`color: ${sn(u.settings.accentColor)?"#1A1A2E":"#FFFFFF"};`:"";return(()=>{var o=xn();return ft(o,"click",t.onClick),d(o,h(j,{get when(){return t.loading},get children(){return $n()}}),null),d(o,h(j,{get when(){return!t.loading},get children(){return t.children}}),null),L(i=>{var a=t.type||"button",p=l(),m=t.loading||t.disabled,c=`${r()} ${t.style||""}`;return a!==i.e&&B(o,"type",i.e=a),p!==i.t&&V(o,i.t=p),m!==i.a&&(o.disabled=i.a=m),i.o=ie(o,c,i.o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()}xe(["click"]);var An=y("<div>");function O(e){const t={"--skeleton-width":e.width||"100%","--skeleton-height":e.height||"20px","--skeleton-radius":e.borderRadius||"12px"};return(()=>{var s=An();return L(n=>{var l=`skeleton ${e.class||""}`,r=t;return l!==n.e&&V(s,n.e=l),n.t=ie(s,r,n.t),n},{e:void 0,t:void 0}),s})()}var Sn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z">'),Mn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z">'),kn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z">'),Cn=y('<div class=status-hero><div class=status-hero__indicator><span></span></div><div><div></div><svg width=100 height=100 viewBox="0 0 24 24"class=status-hero__shield-svg><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z">'),In=y('<h3 class="status-section__header color-text-secondary">Quick Stats'),Pn=y('<div class=status-stats><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Active Rules</div></div><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Excluded Apps</div></div><div class="status-stats__card bg-surface"><div class="status-stats__value status-stats__value--small"></div><div class="status-stats__label color-text-tertiary">Uptime'),En=y('<h3 class="status-section__header color-text-secondary">Mode Statistics'),Tn=y('<div class=status-mode><div class=status-mode__row><div class=status-mode__label><span class=status-mode__dot></span><span class="status-mode__text color-text-primary">VFS Redirection</span></div><span class="status-mode__value color-text-accent"></span></div><div class=status-mode__row><div class=status-mode__label><span class=status-mode__dot></span><span class="status-mode__text color-text-primary">SUSFS Available</span></div><span class="status-mode__value color-text-accent">'),Nn=y('<h3 class="status-section__header color-text-secondary">Mount Info'),Ln=y('<div class=status-mount__cards><div class="status-mount__card bg-surface"><div class="status-mount__card-label color-text-tertiary">Modules</div><div class="status-mount__card-value color-text-primary"> active</div></div><div class="status-mount__card bg-surface"><div class="status-mount__card-label color-text-tertiary">Source</div><div class="status-mount__card-value color-text-accent">KSU'),Rn=y('<div class="status-mount__paths-label color-text-tertiary">Redirected Paths'),Fn=y("<div class=status-mount__paths>"),Dn=y('<h3 class="status-section__header color-text-secondary">System Health'),Zn=y('<div><div class=status-health__item-header><span class=status-health__level>WARNING</span><span class="status-health__title color-text-primary">Rules</span></div><div class="status-health__message status-health__message--warning color-text-secondary">No redirection rules configured'),Un=y('<div class=status-health><div><div class=status-health__item-header><span class=status-health__level>INFO</span><span class="status-health__title color-text-primary">System</span></div><div class="status-health__message color-text-secondary">SUSFS integration active'),zn=y('<div class=status-activity__header><h3 class="status-section__header status-activity__title color-text-secondary">Recent Activity</h3><button class="status-activity__toggle color-text-accent">'),Bn=y("<div class=status-activity__list>"),On=y('<h3 class="status-section__header color-text-secondary">System Info'),Vn=y('<div class=status-info__grid><div><span class="status-info__label color-text-tertiary">Device:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">Android:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">SELinux:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">Kernel:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">Driver:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">SUSFS:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">misc:</span><span class=color-text-primary>/dev/zeromount'),Kn=y("<div class=status>"),Hn=y("<div class=status-hero>"),Gn=y('<div class=status-stats><div class="status-stats__card bg-surface"></div><div class="status-stats__card bg-surface"></div><div class="status-stats__card bg-surface">'),Yn=y('<div class="status-mount__empty color-text-tertiary">No paths redirected'),Wn=y('<div class="status-mount__chip bg-surface color-text-primary">'),qn=y('<div class="status-activity__item bg-surface"><div class=status-activity__icon></div><div class=status-activity__content><div class="status-activity__message color-text-primary"></div><div class="status-activity__time color-text-tertiary">'),Xn=y("<div class=status-info__grid><div></div><div></div><div></div><div></div><div></div><div></div><div>");function jn(){const[e,t]=N(1),[s,n]=N(0),[l,r]=N(0),[o,i]=N(0),[a,p]=N(!1);de(()=>{if(u.engineActive()){const f=setInterval(()=>{t(1.03),setTimeout(()=>t(1),150)},3e3);ut(()=>clearInterval(f))}}),dt(()=>{const f=(g,_,w=500)=>{const k=performance.now(),E=R=>{const I=R-k,H=Math.min(I/w,1),F=1-Math.pow(1-H,3);_(Math.round(0+(g-0)*F)),H<1&&requestAnimationFrame(E)};requestAnimationFrame(E)};setTimeout(()=>{f(u.stats.activeRules,n),f(u.stats.excludedUids,r),f(u.stats.hitsToday,i)},300)});const m=f=>{const g=Math.floor((Date.now()-f.getTime())/1e3);if(g<60)return"Just now";const _=Math.floor(g/60);if(_<60)return`${_} min ago`;const w=Math.floor(_/60);return w<24?`${w}h ago`:`${Math.floor(w/24)} days ago`},c=f=>{const g=u.currentTheme();switch(f){case"rule_added":case"rule_removed":return(()=>{var _=Sn();return L(()=>B(_,"fill",g.colorSuccess)),_})();case"uid_excluded":case"uid_included":return(()=>{var _=Mn();return L(()=>B(_,"fill",g.colorError)),_})();default:return(()=>{var _=kn();return L(()=>B(_,"fill",g.colorWarning)),_})()}},b=oe(()=>{const f=new Set;return u.rules().forEach(g=>{const _=g.target.split("/").filter(Boolean);if(_.length>0){const w="/"+_[0];w!=="/[BLOCKED]"&&f.add(w)}}),Array.from(f).sort()}),x=oe(()=>u.ksuModules().filter(f=>f.isLoaded).length),S=()=>u.loading.status&&!u.systemInfo.driverVersion;return(()=>{var f=Kn();return d(f,h(j,{get when(){return!S()},get fallback(){return h(ne,{variant:"gradient-border",padding:"large",get children(){var g=Hn();return d(g,h(O,{width:"120px",height:"24px",borderRadius:"12px"}),null),d(g,h(O,{width:"100px",height:"100px",borderRadius:"50%",class:"status-hero__skeleton-shield"}),null),d(g,h(O,{width:"200px",height:"48px",borderRadius:"24px"}),null),g}})},get children(){return h(ne,{variant:"gradient-border",padding:"large",get style(){return u.engineActive()?"animation: glowPulse 3s ease-in-out infinite;":""},get children(){var g=Cn(),_=g.firstChild,w=_.firstChild,A=_.nextSibling,k=A.firstChild,E=k.nextSibling,R=E.firstChild;return d(_,()=>u.engineActive()?"Engine Active":"Engine Inactive",null),d(g,h(he,{size:"large",onClick:()=>u.toggleEngine(),get loading(){return u.loading.engine},get style(){return`min-width: 200px; ${u.engineActive()?"":"opacity: 0.8; filter: grayscale(20%);"}`},get children(){return u.engineActive()?"DISABLE ENGINE":"ENABLE ENGINE"}}),null),L(I=>{var H=u.engineActive()?u.currentTheme().textOnAccent:u.currentTheme().textTertiary,F=`status-hero__dot ${u.engineActive()?"status-hero__dot--active":""}`,W=u.engineActive()?u.currentTheme().textOnAccent:u.currentTheme().textTertiary,P=u.engineActive()?`0 0 12px rgba(${u.currentTheme().accentRgb}, 0.5)`:"none",re=`status-hero__shield ${u.engineActive()?"status-hero__shield--active":""}`,ee=`scale(${e()})`,G=`status-hero__glow ${u.engineActive()?"status-hero__glow--active":"status-hero__glow--inactive"}`,te=u.engineActive()?`radial-gradient(circle, ${u.currentTheme().colorSuccessGlow} 0%, transparent 70%)`:"transparent",ae=u.engineActive()?`drop-shadow(0 0 20px ${u.currentTheme().colorSuccessGlow})`:"none",ce=u.engineActive()?u.currentTheme().textOnAccent:u.currentTheme().textTertiary,fe=u.engineActive()?.9:.5;return H!==I.e&&se(_,"color",I.e=H),F!==I.t&&V(w,I.t=F),W!==I.a&&se(w,"background",I.a=W),P!==I.o&&se(w,"box-shadow",I.o=P),re!==I.i&&V(A,I.i=re),ee!==I.n&&se(A,"transform",I.n=ee),G!==I.s&&V(k,I.s=G),te!==I.h&&se(k,"background",I.h=te),ae!==I.r&&se(E,"filter",I.r=ae),ce!==I.d&&B(R,"fill",I.d=ce),fe!==I.l&&B(R,"opacity",I.l=fe),I},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0}),g}})}}),null),d(f,h(ne,{get children(){return[In(),h(j,{get when(){return!S()},get fallback(){return(()=>{var g=Gn(),_=g.firstChild,w=_.nextSibling,A=w.nextSibling;return d(_,h(O,{width:"48px",height:"32px",borderRadius:"8px"}),null),d(_,h(O,{width:"72px",height:"14px",borderRadius:"6px"}),null),d(w,h(O,{width:"48px",height:"32px",borderRadius:"8px"}),null),d(w,h(O,{width:"80px",height:"14px",borderRadius:"6px"}),null),d(A,h(O,{width:"48px",height:"32px",borderRadius:"8px"}),null),d(A,h(O,{width:"64px",height:"14px",borderRadius:"6px"}),null),g})()},get children(){var g=Pn(),_=g.firstChild,w=_.firstChild,A=_.nextSibling,k=A.firstChild,E=A.nextSibling,R=E.firstChild;return d(w,s),d(k,l),d(R,()=>u.systemInfo.uptime||""),g}})]}}),null),d(f,h(ne,{get children(){return[En(),(()=>{var g=Tn(),_=g.firstChild,w=_.firstChild,A=w.firstChild,k=w.nextSibling,E=_.nextSibling,R=E.firstChild,I=R.firstChild,H=R.nextSibling;return d(k,()=>u.rules().length),d(H,(()=>{var F=pe(()=>!!(u.systemInfo.susfsVersion&&u.systemInfo.susfsVersion!=="N/A"));return()=>F()?`Yes (${u.systemInfo.susfsVersion})`:"No"})()),L(F=>{var W=u.currentTheme().colorSuccess,P=u.currentTheme().colorInfo||"#3b82f6";return W!==F.e&&se(A,"background",F.e=W),P!==F.t&&se(I,"background",F.t=P),F},{e:void 0,t:void 0}),g})()]}}),null),d(f,h(ne,{get children(){return[Nn(),(()=>{var g=Ln(),_=g.firstChild,w=_.firstChild,A=w.nextSibling,k=A.firstChild;return d(A,x,k),g})(),Rn(),h(j,{get when(){return b().length>0},get fallback(){return Yn()},get children(){var g=Fn();return d(g,h(me,{get each(){return b()},children:_=>(()=>{var w=Wn();return d(w,_),w})()})),g}})]}}),null),d(f,h(ne,{get children(){return[Dn(),(()=>{var g=Un(),_=g.firstChild,w=_.firstChild,A=w.firstChild;return d(g,h(j,{get when(){return u.rules().length===0},get children(){var k=Zn(),E=k.firstChild,R=E.firstChild;return L(I=>se(R,"color",u.currentTheme().colorWarning)),k}}),null),L(k=>se(A,"color",u.currentTheme().colorInfo||"#3b82f6")),g})()]}}),null),d(f,h(ne,{get children(){return[(()=>{var g=zn(),_=g.firstChild,w=_.nextSibling;return w.$$click=()=>p(!a()),d(w,()=>a()?"Show Less":"View All"),g})(),(()=>{var g=Bn();return d(g,h(me,{get each(){return pe(()=>!!a())()?u.activity():u.activity().slice(0,3)},children:(_,w)=>(()=>{var A=qn(),k=A.firstChild,E=k.nextSibling,R=E.firstChild,I=R.nextSibling;return d(k,()=>c(_.type)),d(R,()=>_.message),d(I,()=>m(_.timestamp)),L(H=>se(A,"animation",`slideInRight 0.3s ease-out ${w()*.1}s both`)),A})()})),g})()]}}),null),d(f,h(ne,{get children(){return[On(),h(j,{get when(){return!S()},get fallback(){return(()=>{var g=Xn(),_=g.firstChild,w=_.nextSibling,A=w.nextSibling,k=A.nextSibling,E=k.nextSibling,R=E.nextSibling,I=R.nextSibling;return d(_,h(O,{width:"140px",height:"16px"})),d(w,h(O,{width:"100px",height:"16px"})),d(A,h(O,{width:"90px",height:"16px"})),d(k,h(O,{width:"160px",height:"16px"})),d(E,h(O,{width:"80px",height:"16px"})),d(R,h(O,{width:"70px",height:"16px"})),d(I,h(O,{width:"100px",height:"16px"})),g})()},get children(){var g=Vn(),_=g.firstChild,w=_.firstChild,A=w.nextSibling,k=_.nextSibling,E=k.firstChild,R=E.nextSibling,I=k.nextSibling,H=I.firstChild,F=H.nextSibling,W=I.nextSibling,P=W.firstChild,re=P.nextSibling,ee=W.nextSibling,G=ee.firstChild,te=G.nextSibling,ae=ee.nextSibling,ce=ae.firstChild,fe=ce.nextSibling;return d(A,()=>u.systemInfo.deviceModel),d(R,()=>u.systemInfo.androidVersion),d(F,()=>u.systemInfo.selinuxStatus),d(re,()=>u.systemInfo.kernelVersion),d(te,()=>u.systemInfo.driverVersion),d(fe,()=>u.systemInfo.susfsVersion),g}})]}}),null),f})()}xe(["click"]);var Jn=y("<div><div class=input__wrapper><input class=input__field>"),Qn=y("<label class=input__label>"),er=y("<span class=input__error>");function rs(e){const[t]=gt(e,["label","error","fullWidth","placeholder","value","onInput","type","disabled"]),s=()=>{const n=["input"];return t.fullWidth&&n.push("input--full-width"),t.error&&n.push("input--error"),n.join(" ")};return(()=>{var n=Jn(),l=n.firstChild,r=l.firstChild;return d(n,(()=>{var o=pe(()=>!!t.label);return()=>o()&&(()=>{var i=Qn();return d(i,()=>t.label),i})()})(),l),ft(r,"input",t.onInput),d(n,(()=>{var o=pe(()=>!!t.error);return()=>o()&&(()=>{var i=er();return d(i,()=>t.error),i})()})(),null),L(o=>{var i=s(),a=t.type||"text",p=t.placeholder,m=t.disabled;return i!==o.e&&V(n,o.e=i),a!==o.t&&B(r,"type",o.t=a),p!==o.a&&B(r,"placeholder",o.a=p),m!==o.o&&(r.disabled=o.o=m),o},{e:void 0,t:void 0,a:void 0,o:void 0}),L(()=>r.value=t.value||""),n})()}xe(["input"]);var tr=y("<span>");function St(e){const[t]=gt(e,["variant","size","children"]),s=()=>t.variant||"default",n=()=>t.size||"medium",l=()=>`badge badge--${n()} badge--${s()}`;return(()=>{var r=tr();return d(r,()=>t.children),L(()=>V(r,l())),r})()}var zt=y("<div class=modules__list>"),sr=y('<div class=modules__empty><svg class=modules__empty-icon width=48 height=48 viewBox="0 0 24 24"fill=currentColor><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l4.59-4.58L18 11l-6 6z"></path></svg><div class=modules__empty-title></div><div class=modules__empty-subtitle>'),nr=y('<div class=modules><div class=modules__search-row><div class=modules__search-wrapper><svg class=modules__search-icon width=20 height=20 viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">'),rr=y("<div class=modules__item-row><div class=modules__skeleton-content>"),lr=y('<div class=modules__item-row><div><svg width=22 height=22 viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l4.59-4.58L18 11l-6 6z"></path></svg></div><div class=modules__item-content><div class=modules__item-name></div><div class=modules__item-meta> files</div></div><svg width=20 height=20 viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z">'),or=y('<div class=modules__details><div class=modules__details-inner><div><div class=modules__detail-label>Path</div><div class=modules__path-value></div></div><div><div class="modules__detail-label modules__detail-label--partitions">Partitions</div><div class=modules__partitions></div></div><div class=modules__stats-row><div><span class=modules__stat-label>Files:</span><span class=modules__stat-value></span></div><div><span class=modules__stat-label>Status:</span><span>'),ir=y("<span class=modules__partition-badge>/");const _t=()=>u.currentTheme();function ar(){const[e,t]=N(""),[s,n]=N(null),[l,r]=N(new Set);dt(()=>{u.ksuModules().length===0&&u.scanKsuModules()});const o=()=>{const m=e().toLowerCase();return m?u.ksuModules().filter(c=>c.name.toLowerCase().includes(m)||c.path.toLowerCase().includes(m)):u.ksuModules()},i=async m=>{r(c=>{const b=new Set(c);return b.add(m.path),b});try{m.isLoaded?await u.unloadKsuModule(m.name,m.path):await u.loadKsuModule(m.name,m.path)}finally{r(c=>{const b=new Set(c);return b.delete(m.path),b})}},a=m=>l().has(m),p=m=>{const c=[];return m.hasSystem&&c.push("system"),m.hasVendor&&c.push("vendor"),m.hasProduct&&c.push("product"),c};return(()=>{var m=nr(),c=m.firstChild,b=c.firstChild,x=b.firstChild;return d(b,h(rs,{placeholder:"Search modules...",get value(){return e()},onInput:S=>t(S.currentTarget.value),fullWidth:!0}),x),d(c,h(he,{onClick:()=>u.scanKsuModules(),get loading(){return u.loading.modules},style:"white-space: nowrap;",children:"SCAN"}),null),d(m,h(j,{get when(){return u.loading.modules},get children(){var S=zt();return d(S,h(me,{each:[1,2,3],children:()=>h(ne,{get children(){var f=rr(),g=f.firstChild;return d(f,h(O,{width:"44px",height:"44px",borderRadius:"12px"}),g),d(g,h(O,{width:"140px",height:"18px",borderRadius:"8px"}),null),d(g,h(O,{width:"80px",height:"14px",borderRadius:"6px"}),null),d(f,h(O,{width:"72px",height:"24px",borderRadius:"12px"}),null),f}})})),S}}),null),d(m,h(j,{get when(){return!u.loading.modules},get children(){var S=zt();return d(S,h(me,{get each(){return o()},children:(f,g)=>h(ne,{hoverable:!0,get style(){return`animation: slideInRight 0.3s ease-out ${g()*.05}s both; cursor: pointer;`},onClick:()=>n(s()===f.path?null:f.path),get children(){return[(()=>{var _=lr(),w=_.firstChild,A=w.firstChild,k=w.nextSibling,E=k.firstChild,R=E.nextSibling,I=R.firstChild,H=k.nextSibling;return d(E,()=>f.name),d(R,()=>f.fileCount,I),d(_,h(St,{get variant(){return f.isLoaded?"success":"default"},size:"small",get children(){return f.isLoaded?"Loaded":"Not Loaded"}}),H),L(F=>{var W=`modules__item-icon ${f.isLoaded?"modules__item-icon--active":"modules__item-icon--inactive"}`,P=f.isLoaded?"white":_t().textTertiary,re=`modules__chevron ${s()===f.path?"modules__chevron--expanded":""}`,ee=_t().textTertiary;return W!==F.e&&V(w,F.e=W),P!==F.t&&B(A,"fill",F.t=P),re!==F.a&&B(H,"class",F.a=re),ee!==F.o&&B(H,"fill",F.o=ee),F},{e:void 0,t:void 0,a:void 0,o:void 0}),_})(),h(j,{get when(){return s()===f.path},get children(){var _=or(),w=_.firstChild,A=w.firstChild,k=A.firstChild,E=k.nextSibling,R=A.nextSibling,I=R.firstChild,H=I.nextSibling,F=R.nextSibling,W=F.firstChild,P=W.firstChild,re=P.nextSibling,ee=W.nextSibling,G=ee.firstChild,te=G.nextSibling;return d(E,()=>f.path),d(H,h(me,{get each(){return p(f)},children:ae=>(()=>{var ce=ir();return ce.firstChild,d(ce,ae,null),ce})()})),d(re,()=>f.fileCount.toLocaleString()),d(te,()=>f.isLoaded?"Active":"Inactive"),d(w,h(he,{get variant(){return f.isLoaded?"danger":"primary"},size:"small",get loading(){return a(f.path)},onClick:ae=>{ae.stopPropagation(),i(f)},style:"margin-top: 8px;",get children(){return f.isLoaded?"HOT UNLOAD":"HOT LOAD"}}),null),L(()=>V(te,`modules__stat-value ${f.isLoaded?"modules__stat-value--active":"modules__stat-value--inactive"}`)),_}})]}})}),null),d(S,h(j,{get when(){return pe(()=>o().length===0)()&&!u.loading.modules},get children(){var f=sr(),g=f.firstChild,_=g.nextSibling,w=_.nextSibling;return d(_,()=>e()?"No modules match your search":"No modules with system overlays"),d(w,()=>e()?"Try a different search term":"Install KernelSU modules with system/vendor/product directories"),f}}),null),S}}),null),L(()=>B(x,"fill",_t().textTertiary)),m})()}var cr=y("<button type=button><div></div><div>");function Ce(e){const[t,s]=N(!1),[n,l]=N(e.checked?28:2),[r,o]=N(24);de(()=>{l(e.checked?28:2)});const i=()=>{e.disabled||(o(28),setTimeout(()=>{o(24),e.onChange(!e.checked)},100))},a=()=>u.currentTheme();return(()=>{var p=cr(),m=p.firstChild,c=m.nextSibling;return p.addEventListener("mouseleave",()=>s(!1)),p.$$mouseup=()=>s(!1),p.$$mousedown=()=>s(!0),p.$$click=i,L(b=>{var x=e.disabled,S=`
        position: relative;
        width: 56px;
        height: 28px;
        border-radius: 14px;
        border: none;
        cursor: ${e.disabled?"not-allowed":"pointer"};
        background: ${e.checked?a().gradientPrimary:a().bgSurfaceElevated};
        transition: background 0.3s ease;
        opacity: ${e.disabled?"0.5":"1"};
        padding: 0;
        outline: none;
      `,f=`
          position: absolute;
          inset: -4px;
          border-radius: 18px;
          background: ${e.checked?"rgba(var(--accent-rgb), 0.2)":"transparent"};
          filter: blur(8px);
          transition: all 0.3s ease;
          pointer-events: none;
        `,g=`
          position: absolute;
          top: 2px;
          left: ${n()}px;
          width: ${r()}px;
          height: 24px;
          border-radius: 12px;
          background: ${a().textPrimary};
          box-shadow: ${a().shadowSmall};
          transition: left 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), width 0.1s ease;
          transform: ${t()?"scale(0.95)":"scale(1)"};
        `;return x!==b.e&&(p.disabled=b.e=x),b.t=ie(p,S,b.t),b.a=ie(m,f,b.a),b.o=ie(c,g,b.o),b},{e:void 0,t:void 0,a:void 0,o:void 0}),p})()}xe(["click","mousedown","mouseup"]);var dr=y('<div><img class=config__icon-img><svg viewBox="0 0 24 24"class=config__icon-fallback><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z">'),ur=y('<div class=config__section-header><h3 class=config__section-title><svg width=18 height=18 viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"></path></svg>Excluded Apps'),gr=y("<p class=config__section-desc>These apps bypass spoofing and mounts are visible - caution"),Bt=y("<div class=config__apps>"),fr=y('<div class=config__section-header><h3 class=config__section-title><svg width=18 height=18 viewBox="0 0 24 24"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z">'),hr=y("<div class=config__system-toggle><span class=config__system-label>System Apps"),pr=y('<div class="config__apps config__apps--scrollable">'),mr=y('<div class=config><div class=config__toolbar><div class=config__search><svg width=20 height=20 viewBox="0 0 24 24"class=config__search-icon><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">'),Ot=y("<div class=config__empty>"),vr=y('<div class="config__app config__app--excluded"><div class=config__app-info><div class=config__app-name></div><div class=config__app-package>'),_r=y('<div class="config__app config__app--skeleton"><div class=config__skeleton-info>'),yr=y("<span class=config__sys-badge>SYS"),br=y('<div class="config__app config__app--available"><div class=config__app-info><div class="config__app-name config__app-name--with-badge"></div><div class="config__app-package config__app-package--small">');const Re=()=>u.currentTheme(),yt=new Map,at=new Set,wr=(e,t)=>{const s=()=>{t.style.display="none";const n=t.nextElementSibling;n&&(n.style.display="block")};if(yt.has(e)){t.src=yt.get(e),t.style.opacity="1";return}if(typeof globalThis.ksu<"u"&&typeof globalThis.ksu.getPackagesIcons=="function")try{const n=globalThis.ksu.getPackagesIcons(JSON.stringify([e]),100);if(n){const l=JSON.parse(n);if(l?.[0]?.icon){yt.set(e,l[0].icon),t.src=l[0].icon,t.style.opacity="1";return}}}catch(n){console.error("[ZM] Icon error:",e,n)}s()},$r=(e,t)=>{const s=e.querySelector("img");if(!s)return;const n=new IntersectionObserver(l=>{l.forEach(r=>{r.isIntersecting&&(wr(t,s),n.unobserve(e),n.disconnect(),at.delete(n))})},{rootMargin:"100px",threshold:.1});at.add(n),n.observe(e)},Vt=e=>{const t=e.size||40,s=t-8,n=t-12,l=t===40?"config__icon--40":"config__icon--36";return(()=>{var r=dr(),o=r.firstChild,i=o.nextSibling;return Jt(a=>a&&$r(a,e.packageName),r),V(r,`config__icon ${l}`),o.addEventListener("error",a=>{a.target.style.display="none",a.target.nextElementSibling?.removeAttribute("style")}),B(o,"width",s),B(o,"height",s),B(i,"width",n),B(i,"height",n),L(()=>B(i,"fill",Re().textTertiary)),r})()};function xr(){const[e,t]=N(""),[s,n]=N(""),[l,r]=N(!1);let o;dt(()=>{u.loadInstalledApps()}),de(()=>{const c=e();clearTimeout(o),o=window.setTimeout(()=>{n(c)},300)}),ut(()=>{o&&clearTimeout(o),u.stopPolling(),at.forEach(c=>c.disconnect()),at.clear()});const i=()=>new Set(u.excludedUids().map(c=>c.uid)),a=()=>{const c=s().toLowerCase(),b=u.excludedUids();return c?b.filter(x=>x.appName.toLowerCase().includes(c)||x.packageName.toLowerCase().includes(c)||x.uid.toString().includes(c)):b},p=()=>{const c=s().toLowerCase(),b=i();let x=u.installedApps().filter(S=>!b.has(S.uid));return l()||(x=x.filter(S=>!S.isSystemApp)),c&&(x=x.filter(S=>S.appName.toLowerCase().includes(c)||S.packageName.toLowerCase().includes(c)||S.uid.toString().includes(c))),x.sort((S,f)=>S.appName.localeCompare(f.appName))},m=async c=>{await u.excludeUid(c.uid,c.packageName,c.appName)};return(()=>{var c=mr(),b=c.firstChild,x=b.firstChild,S=x.firstChild;return d(x,h(rs,{placeholder:"Search apps...",get value(){return e()},onInput:f=>t(f.currentTarget.value),fullWidth:!0}),S),d(c,h(ne,{get children(){return[(()=>{var f=ur(),g=f.firstChild,_=g.firstChild;return d(f,h(St,{variant:"error",size:"small",get children(){return u.excludedUids().length}}),null),L(()=>B(_,"fill",Re().colorError)),f})(),gr(),h(j,{get when(){return a().length>0},get fallback(){return(()=>{var f=Ot();return d(f,()=>s()?"No matches":"No excluded apps"),f})()},get children(){var f=Bt();return d(f,h(me,{get each(){return a()},children:g=>(()=>{var _=vr(),w=_.firstChild,A=w.firstChild,k=A.nextSibling;return d(_,h(Vt,{get packageName(){return g.packageName},size:40}),w),d(A,()=>g.appName),d(k,()=>g.packageName),d(_,h(he,{variant:"ghost",size:"small",onClick:()=>u.includeUid(g.uid),get style(){return`color: ${Re().colorError}; padding: 6px 10px;`},children:"REMOVE"}),null),_})()})),f}})]}}),null),d(c,h(ne,{get children(){return[(()=>{var f=fr(),g=f.firstChild,_=g.firstChild;return d(g,()=>l()?"All Apps":"User Apps",null),d(f,h(St,{variant:"info",size:"small",get children(){return p().length}}),null),L(()=>B(_,"fill",Re().textAccent)),f})(),(()=>{var f=hr();return f.firstChild,d(f,h(Ce,{get checked(){return l()},onChange:r}),null),f})(),h(j,{get when(){return!u.loading.apps},get fallback(){return(()=>{var f=Bt();return d(f,h(me,{each:[1,2,3,4,5],children:()=>(()=>{var g=_r(),_=g.firstChild;return d(g,h(O,{width:"36px",height:"36px",borderRadius:"10px"}),_),d(_,h(O,{width:"120px",height:"16px",borderRadius:"6px"}),null),d(_,h(O,{width:"180px",height:"12px",borderRadius:"4px"}),null),d(g,h(O,{width:"64px",height:"28px",borderRadius:"14px"}),null),g})()})),f})()},get children(){return h(j,{get when(){return p().length>0},get fallback(){return(()=>{var f=Ot();return d(f,(()=>{var g=pe(()=>!!s());return()=>g()?"No matches":l()?"No apps found":"No user apps found"})()),f})()},get children(){var f=pr();return d(f,h(me,{get each(){return p()},children:g=>(()=>{var _=br(),w=_.firstChild,A=w.firstChild,k=A.nextSibling;return d(_,h(Vt,{get packageName(){return g.packageName},size:36}),w),d(A,()=>g.appName,null),d(A,h(j,{get when(){return g.isSystemApp},get children(){return yr()}}),null),d(k,()=>g.packageName),d(_,h(he,{variant:"ghost",size:"small",onClick:()=>m(g),style:"padding: 6px 10px;",children:"EXCLUDE"}),null),_})()})),f}})}})]}}),null),L(()=>B(S,"fill",Re().textTertiary)),c})()}var Ar=y("<div>"),Sr=y("<div><div></div><h2>");function Mr(e){const[t,s]=N(!1),[n,l]=N(100),[r,o]=N(0);return de(()=>{if(e.open){s(!0),setTimeout(()=>{l(0),o(1)},10);const i=a=>{a.key==="Escape"&&e.onClose()};document.addEventListener("keydown",i),ut(()=>document.removeEventListener("keydown",i))}else l(100),o(0),setTimeout(()=>s(!1),300)}),h(j,{get when(){return t()},get children(){return[(()=>{var i=Ar();return ft(i,"click",e.onClose),L(a=>ie(i,`
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          backdrop-filter: blur(4px);
          -webkit-backdrop-filter: blur(4px);
          z-index: 200;
          opacity: ${r()};
          transition: opacity 0.3s ease;
        `,a)),i})(),(()=>{var i=Sr(),a=i.firstChild,p=a.nextSibling;return d(p,()=>e.title),d(i,()=>e.children,null),L(m=>{var c=`
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: ${u.currentTheme().gradientSecondary};
          border-top-left-radius: ${Ze.radiusXLarge};
          border-top-right-radius: ${Ze.radiusXLarge};
          padding: 24px 20px;
          padding-bottom: calc(24px + env(safe-area-inset-bottom));
          z-index: 201;
          max-height: 85vh;
          overflow-y: auto;
          transform: translateY(${n()}%);
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        `,b=`
            width: 40px;
            height: 4px;
            background: ${u.currentTheme().textTertiary};
            border-radius: 2px;
            margin: 0 auto 20px;
          `,x=`
            font-family: ${Ze.fontDisplay};
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            background: ${u.currentTheme().gradientPrimary};
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 24px;
          `;return m.e=ie(i,c,m.e),m.t=ie(a,b,m.t),m.a=ie(p,x,m.a),m},{e:void 0,t:void 0,a:void 0}),i})()]}})}xe(["click"]);var kr=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></svg>Appearance'),Cr=y('<div class=settings__group><div class=settings__label>Theme</div><div class=settings__themes><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M12.43 2.3c-2.38-.59-4.68-.27-6.63.64-.35.16-.41.64-.1.86C8.3 5.6 10 8.6 10 12c0 3.4-1.7 6.4-4.3 8.2-.32.22-.26.7.09.86 1.28.6 2.71.94 4.21.94 6.05 0 10.85-5.38 9.87-11.6-.61-3.92-3.59-7.16-7.44-8.1z"></path></svg></div><div>Dark</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg></div><div>Light</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M12 4V2A10 10 0 0 0 2 12h2a8 8 0 0 1 8-8zm0 16a8 8 0 0 1-8-8H2a10 10 0 0 0 10 10v-2zm8-8a8 8 0 0 1-8 8v2a10 10 0 0 0 10-10h-2zm-8-8a8 8 0 0 1 8 8h2A10 10 0 0 0 12 2v2z"></path></svg></div><div>Auto</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><circle cx=12 cy=12 r=10></circle></svg></div><div>AMOLED'),Ir=y("<div><div class=settings__label>Accent Color</div><div class=settings__colors>"),Pr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Random Accent</div><div class=settings__item-desc>Change accent color each session"),Er=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Animations</div><div class=settings__item-desc>Enable bouncy animations"),Tr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Fix Bottom Nav</div><div class=settings__item-desc>Pin navigation to bottom of screen"),Nr=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"></path></svg>Engine'),Lr=y("<div class=settings__engine-controls><div class=settings__item><div class=settings__item-content><div class=settings__item-label>Auto-start on boot</div><div class=settings__item-desc>Start ZeroMount engine automatically</div></div></div><div class=settings__item><div class=settings__item-content><div class=settings__item-label>Verbose logging</div><div class=settings__item-desc>Log detailed operation info"),Rr=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>About'),Fr=y('<div class=settings__about><div class=logo-container><div class=logo-ring></div><div class=logo-inner><svg width=56 height=56 viewBox="0 0 24 24"fill=url(#shieldGradient)><defs><linearGradient id=shieldGradient x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#FF6B6B></stop><stop offset=50% style=stop-color:#FF8E53></stop><stop offset=100% style=stop-color:#FFC107></stop></linearGradient></defs><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"></path></svg></div></div><div class=settings__about-title>ZeroMount</div><div class=settings__about-badge>GHOST</div><button class=settings__repo-btn><svg class=settings__repo-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>Repository</button><div class=settings__actions></div><div class=settings__footer>Made with <span class=glow-text>passion</span> for the Android <span class=glow-text>community'),Dr=y("<div class=settings__modal-content><p class=settings__modal-text>This will permanently delete all <!> VFS rules. This action cannot be undone.</p><div class=settings__modal-actions>"),Zr=y("<div class=settings>"),Ur=y("<button>");const zr=[{name:"Orange",color:"#FF8E53"},{name:"Emerald",color:"#00D68F"},{name:"Azure",color:"#00B4D8"},{name:"Slate",color:"#64748B"},{name:"Indigo",color:"#6366F1"},{name:"Coral",color:"#FF6B6B"}];function Br(){const[e,t]=N(!1),s=()=>u.settings.accentColor,n=i=>{u.updateSettings({theme:i})},l=async()=>{await u.clearAllRules(),t(!1)},r=()=>{const i=`
Zero-Mount
Driver: ${u.systemInfo.driverVersion}
Kernel: ${u.systemInfo.kernelVersion}
SUSFS: ${u.systemInfo.susfsVersion}
Active Rules: ${u.stats.activeRules}
Excluded Apps: ${u.stats.excludedUids}
Engine: ${u.engineActive()?"Active":"Inactive"}
    `.trim();navigator.clipboard.writeText(i).then(()=>{u.showToast("Debug info copied to clipboard","success")})},o=i=>u.settings.theme===i;return(()=>{var i=Zr();return d(i,h(ne,{get children(){return[kr(),(()=>{var a=Cr(),p=a.firstChild,m=p.nextSibling,c=m.firstChild,b=c.firstChild,x=b.firstChild,S=b.nextSibling,f=c.nextSibling,g=f.firstChild,_=g.firstChild,w=g.nextSibling,A=f.nextSibling,k=A.firstChild,E=k.firstChild,R=k.nextSibling,I=A.nextSibling,H=I.firstChild,F=H.firstChild,W=H.nextSibling;return c.$$click=()=>n("dark"),f.$$click=()=>n("light"),A.$$click=()=>n("auto"),I.$$click=()=>n("amoled"),L(P=>{var re=`settings__theme ${o("dark")?"settings__theme--active":""}`,ee=o("dark")?"var(--text-accent)":"var(--text-secondary)",G=`settings__theme-label ${o("dark")?"settings__theme-label--active":""}`,te=`settings__theme ${o("light")?"settings__theme--active":""}`,ae=o("light")?"var(--text-accent)":"var(--text-secondary)",ce=`settings__theme-label ${o("light")?"settings__theme-label--active":""}`,fe=`settings__theme ${o("auto")?"settings__theme--active":""}`,Ke=o("auto")?"var(--text-accent)":"var(--text-secondary)",Te=`settings__theme-label ${o("auto")?"settings__theme-label--active":""}`,z=`settings__theme ${o("amoled")?"settings__theme--active":""}`,He=o("amoled")?"var(--text-accent)":"var(--text-secondary)",Ge=`settings__theme-label ${o("amoled")?"settings__theme-label--active":""}`;return re!==P.e&&V(c,P.e=re),ee!==P.t&&B(x,"fill",P.t=ee),G!==P.a&&V(S,P.a=G),te!==P.o&&V(f,P.o=te),ae!==P.i&&B(_,"fill",P.i=ae),ce!==P.n&&V(w,P.n=ce),fe!==P.s&&V(A,P.s=fe),Ke!==P.h&&B(E,"fill",P.h=Ke),Te!==P.r&&V(R,P.r=Te),z!==P.d&&V(I,P.d=z),He!==P.l&&B(F,"fill",P.l=He),Ge!==P.u&&V(W,P.u=Ge),P},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),a})(),(()=>{var a=Ir(),p=a.firstChild,m=p.nextSibling;return d(m,h(me,{each:zr,children:c=>(()=>{var b=Ur();return b.$$click=()=>{u.settings.autoAccentColor||u.updateSettings({accentColor:c.color})},L(x=>{var S=`settings__color ${s()===c.color?"settings__color--active":""} ${u.settings.autoAccentColor?"settings__color--disabled":""}`,f=u.settings.autoAccentColor,g=c.color,_=s()===c.color?`0 0 0 3px ${c.color}40`:"none";return S!==x.e&&V(b,x.e=S),f!==x.t&&(b.disabled=x.t=f),g!==x.a&&se(b,"background",x.a=g),_!==x.o&&se(b,"box-shadow",x.o=_),x},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()})),L(()=>V(a,`settings__group ${u.settings.autoAccentColor?"settings__group--disabled":""}`)),a})(),(()=>{var a=Pr();return a.firstChild,d(a,h(Ce,{get checked(){return u.settings.autoAccentColor},onChange:async p=>{if(u.updateSettings({autoAccentColor:p}),p){const m=await U.fetchSystemColor();m&&u.updateSettings({accentColor:m})}}}),null),a})(),(()=>{var a=Er();return a.firstChild,d(a,h(Ce,{get checked(){return u.settings.animationsEnabled},onChange:p=>u.updateSettings({animationsEnabled:p})}),null),a})(),(()=>{var a=Tr();return a.firstChild,d(a,h(Ce,{get checked(){return u.settings.fixedNav},onChange:p=>u.updateSettings({fixedNav:p})}),null),a})()]}}),null),d(i,h(ne,{get children(){return[Nr(),(()=>{var a=Lr(),p=a.firstChild;p.firstChild;var m=p.nextSibling;return m.firstChild,d(p,h(Ce,{get checked(){return u.settings.autoStartOnBoot},onChange:c=>u.updateSettings({autoStartOnBoot:c})}),null),d(m,h(Ce,{get checked(){return u.settings.verboseLogging},onChange:async c=>{u.updateSettings({verboseLogging:c}),await U.setVerboseLogging(c)}}),null),d(a,h(he,{variant:"danger",fullWidth:!0,onClick:()=>t(!0),children:"CLEAR ALL RULES"}),null),a})()]}}),null),d(i,h(ne,{get children(){return[Rr(),(()=>{var a=Fr(),p=a.firstChild,m=p.nextSibling,c=m.nextSibling,b=c.nextSibling,x=b.nextSibling;return b.$$click=()=>window.open(Vs,"_blank"),d(x,h(he,{variant:"secondary",size:"small",onClick:r,children:"Copy Debug Info"}),null),d(x,h(he,{variant:"secondary",size:"small",onClick:()=>{const S={rules:u.rules(),excludedUids:u.excludedUids(),settings:u.settings,exportDate:new Date().toISOString()},f=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),g=URL.createObjectURL(f),_=document.createElement("a");_.href=g,_.download="zeromount-config.json",_.click(),URL.revokeObjectURL(g),u.showToast("Config exported","success")},children:"Export Config"}),null),a})()]}}),null),d(i,h(Mr,{get open(){return e()},onClose:()=>t(!1),title:"Clear All Rules?",get children(){var a=Dr(),p=a.firstChild,m=p.firstChild,c=m.nextSibling;c.nextSibling;var b=p.nextSibling;return d(p,()=>u.stats.activeRules,c),d(b,h(he,{variant:"ghost",onClick:()=>t(!1),children:"Cancel"}),null),d(b,h(he,{variant:"danger",onClick:l,get loading(){return u.loading.rules},children:"CLEAR ALL"}),null),a}}),null),i})()}xe(["click"]);var Or=y("<div><main>"),Vr=y("<div>Loading...");function Kr(){const[e,t]=N(!1);return dt(async()=>{await u.loadInitialData(),t(!0)}),h(j,{get when(){return e()},get fallback(){return(()=>{var s=Vr();return L(n=>ie(s,`
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: ${u.currentTheme().bgPrimary};
            color: ${u.currentTheme().textPrimary};
            font-family: ${u.currentTheme().fontBody};
          `,n)),s})()},get children(){var s=Or(),n=s.firstChild;return d(s,h(Zs,{}),n),d(n,h(Ns,{get children(){return[h(je,{get when(){return u.activeTab()==="status"},get children(){return h(jn,{})}}),h(je,{get when(){return u.activeTab()==="modules"},get children(){return h(ar,{})}}),h(je,{get when(){return u.activeTab()==="config"},get children(){return h(xr,{})}}),h(je,{get when(){return u.activeTab()==="settings"},get children(){return h(Br,{})}})]}})),d(s,h(pn,{get activeTab(){return u.activeTab()},get onTabChange(){return u.setActiveTab}}),null),d(s,h(j,{get when(){return u.toast()},children:l=>h(bn,{get message(){return l().message},get type(){return l().type},visible:!0})}),null),L(l=>{var r=`
          min-height: 100vh;
          min-height: 100dvh;
          background: ${u.currentTheme().bgPrimary};
          color: ${u.currentTheme().textPrimary};
          font-family: ${u.currentTheme().fontBody};
          overflow-x: hidden;
        `,o=`
            padding-bottom: ${u.settings.fixedNav?"calc(100px + 48px + env(safe-area-inset-bottom))":"calc(100px + env(safe-area-inset-bottom))"};
          `;return l.e=ie(s,r,l.e),l.t=ie(n,o,l.t),l},{e:void 0,t:void 0}),s}})}const Hr=document.getElementById("root");Rs(()=>h(Kr,{}),Hr);
