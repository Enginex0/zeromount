(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const r of l)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const r={};return l.integrity&&(r.integrity=l.integrity),l.referrerPolicy&&(r.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?r.credentials="include":l.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(l){if(l.ep)return;l.ep=!0;const r=s(l);fetch(l.href,r)}})();const os=!1,is=(e,t)=>e===t,pe=Symbol("solid-proxy"),as=typeof Proxy=="function",vt=Symbol("solid-track"),qe={equals:is};let Bt=Vt;const xe=1,Qe=2,Ut={owned:null,cleanups:null,context:null,owner:null};var Y=null;let ht=null,cs=null,G=null,Q=null,be=null,at=0;function Be(e,t){const s=G,n=Y,l=e.length===0,r=t===void 0?n:t,o=l?Ut:{owned:null,cleanups:null,context:r?r.context:null,owner:r},i=l?e:()=>e(()=>me(()=>Oe(o)));Y=o,G=null;try{return Fe(i,!0)}finally{G=s,Y=n}}function T(e,t){t=t?Object.assign({},qe,t):qe;const s={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=l=>(typeof l=="function"&&(l=l(s.value)),Ot(s,l));return[zt.bind(s),n]}function N(e,t,s){const n=xt(e,t,!1,xe);He(n)}function ie(e,t,s){Bt=hs;const n=xt(e,t,!1,xe);n.user=!0,be?be.push(n):He(n)}function le(e,t,s){s=s?Object.assign({},qe,s):qe;const n=xt(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=s.equals||void 0,He(n),zt.bind(n)}function ds(e){return Fe(e,!1)}function me(e){if(G===null)return e();const t=G;G=null;try{return e()}finally{G=t}}function ct(e){ie(()=>me(e))}function dt(e){return Y===null||(Y.cleanups===null?Y.cleanups=[e]:Y.cleanups.push(e)),e}function _t(){return G}function us(e){const t=le(e),s=le(()=>yt(t()));return s.toArray=()=>{const n=s();return Array.isArray(n)?n:n!=null?[n]:[]},s}function zt(){if(this.sources&&this.state)if(this.state===xe)He(this);else{const e=Q;Q=null,Fe(()=>tt(this),!1),Q=e}if(G){const e=this.observers?this.observers.length:0;G.sources?(G.sources.push(this),G.sourceSlots.push(e)):(G.sources=[this],G.sourceSlots=[e]),this.observers?(this.observers.push(G),this.observerSlots.push(G.sources.length-1)):(this.observers=[G],this.observerSlots=[G.sources.length-1])}return this.value}function Ot(e,t,s){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&Fe(()=>{for(let l=0;l<e.observers.length;l+=1){const r=e.observers[l],o=ht&&ht.running;o&&ht.disposed.has(r),(o?!r.tState:!r.state)&&(r.pure?Q.push(r):be.push(r),r.observers&&Kt(r)),o||(r.state=xe)}if(Q.length>1e6)throw Q=[],new Error},!1)),t}function He(e){if(!e.fn)return;Oe(e);const t=at;gs(e,e.value,t)}function gs(e,t,s){let n;const l=Y,r=G;G=Y=e;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=xe,e.owned&&e.owned.forEach(Oe),e.owned=null),e.updatedAt=s+1,Gt(o)}finally{G=r,Y=l}(!e.updatedAt||e.updatedAt<=s)&&(e.updatedAt!=null&&"observers"in e?Ot(e,n):e.value=n,e.updatedAt=s)}function xt(e,t,s,n=xe,l){const r={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Y,context:Y?Y.context:null,pure:s};return Y===null||Y!==Ut&&(Y.owned?Y.owned.push(r):Y.owned=[r]),r}function et(e){if(e.state===0)return;if(e.state===Qe)return tt(e);if(e.suspense&&me(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<at);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if(e=t[s],e.state===xe)He(e);else if(e.state===Qe){const n=Q;Q=null,Fe(()=>tt(e,t[0]),!1),Q=n}}function Fe(e,t){if(Q)return e();let s=!1;t||(Q=[]),be?s=!0:be=[],at++;try{const n=e();return fs(s),n}catch(n){s||(be=null),Q=null,Gt(n)}}function fs(e){if(Q&&(Vt(Q),Q=null),e)return;const t=be;be=null,t.length&&Fe(()=>Bt(t),!1)}function Vt(e){for(let t=0;t<e.length;t++)et(e[t])}function hs(e){let t,s=0;for(t=0;t<e.length;t++){const n=e[t];n.user?e[s++]=n:et(n)}for(t=0;t<s;t++)et(e[t])}function tt(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const n=e.sources[s];if(n.sources){const l=n.state;l===xe?n!==t&&(!n.updatedAt||n.updatedAt<at)&&et(n):l===Qe&&tt(n,t)}}}function Kt(e){for(let t=0;t<e.observers.length;t+=1){const s=e.observers[t];s.state||(s.state=Qe,s.pure?Q.push(s):be.push(s),s.observers&&Kt(s))}}function Oe(e){let t;if(e.sources)for(;e.sources.length;){const s=e.sources.pop(),n=e.sourceSlots.pop(),l=s.observers;if(l&&l.length){const r=l.pop(),o=s.observerSlots.pop();n<l.length&&(r.sourceSlots[o]=n,l[n]=r,s.observerSlots[n]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)Oe(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Oe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function ps(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Gt(e,t=Y){throw ps(e)}function yt(e){if(typeof e=="function"&&!e.length)return yt(e());if(Array.isArray(e)){const t=[];for(let s=0;s<e.length;s++){const n=yt(e[s]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}const ms=Symbol("fallback");function It(e){for(let t=0;t<e.length;t++)e[t]()}function vs(e,t,s={}){let n=[],l=[],r=[],o=0,i=t.length>1?[]:null;return dt(()=>It(r)),()=>{let a=e()||[],h=a.length,m,c;return a[vt],me(()=>{let x,S,f,g,v,w,A,M,E;if(h===0)o!==0&&(It(r),r=[],n=[],l=[],o=0,i&&(i=[])),s.fallback&&(n=[ms],l[0]=Be(F=>(r[0]=F,s.fallback())),o=1);else if(o===0){for(l=new Array(h),c=0;c<h;c++)n[c]=a[c],l[c]=Be(b);o=h}else{for(f=new Array(h),g=new Array(h),i&&(v=new Array(h)),w=0,A=Math.min(o,h);w<A&&n[w]===a[w];w++);for(A=o-1,M=h-1;A>=w&&M>=w&&n[A]===a[M];A--,M--)f[M]=l[A],g[M]=r[A],i&&(v[M]=i[A]);for(x=new Map,S=new Array(M+1),c=M;c>=w;c--)E=a[c],m=x.get(E),S[c]=m===void 0?-1:m,x.set(E,c);for(m=w;m<=A;m++)E=n[m],c=x.get(E),c!==void 0&&c!==-1?(f[c]=l[m],g[c]=r[m],i&&(v[c]=i[m]),c=S[c],x.set(E,c)):r[m]();for(c=w;c<h;c++)c in f?(l[c]=f[c],r[c]=g[c],i&&(i[c]=v[c],i[c](c))):l[c]=Be(b);l=l.slice(0,o=h),n=a.slice(0)}return l});function b(x){if(r[c]=x,i){const[S,f]=T(c);return i[c]=f,t(a[c],S)}return t(a[c])}}}function p(e,t){return me(()=>e(t||{}))}function Xe(){return!0}const kt={get(e,t,s){return t===pe?s:e.get(t)},has(e,t){return t===pe?!0:e.has(t)},set:Xe,deleteProperty:Xe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Xe,deleteProperty:Xe}},ownKeys(e){return e.keys()}};function ut(e,...t){const s=t.length;if(as&&pe in e){const l=s>1?t.flat():t[0],r=t.map(o=>new Proxy({get(i){return o.includes(i)?e[i]:void 0},has(i){return o.includes(i)&&i in e},keys(){return o.filter(i=>i in e)}},kt));return r.push(new Proxy({get(o){return l.includes(o)?void 0:e[o]},has(o){return l.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!l.includes(o))}},kt)),r}const n=[];for(let l=0;l<=s;l++)n[l]={};for(const l of Object.getOwnPropertyNames(e)){let r=s;for(let a=0;a<t.length;a++)if(t[a].includes(l)){r=a;break}const o=Object.getOwnPropertyDescriptor(e,l);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?n[r][l]=o.value:Object.defineProperty(n[r],l,o)}return n}const Ht=e=>`Stale read from <${e}>.`;function he(e){const t="fallback"in e&&{fallback:()=>e.fallback};return le(vs(()=>e.each,e.children,t||void 0))}function X(e){const t=e.keyed,s=le(()=>e.when,void 0,void 0),n=t?s:le(s,void 0,{equals:(l,r)=>!l==!r});return le(()=>{const l=n();if(l){const r=e.children;return typeof r=="function"&&r.length>0?me(()=>r(t?l:()=>{if(!me(n))throw Ht("Show");return s()})):r}return e.fallback},void 0,void 0)}function _s(e){const t=us(()=>e.children),s=le(()=>{const n=t(),l=Array.isArray(n)?n:[n];let r=()=>{};for(let o=0;o<l.length;o++){const i=o,a=l[o],h=r,m=le(()=>h()?void 0:a.when,void 0,void 0),c=a.keyed?m:le(m,void 0,{equals:(b,x)=>!b==!x});r=()=>h()||(c()?[i,m,a]:void 0)}return r});return le(()=>{const n=s()();if(!n)return e.fallback;const[l,r,o]=n,i=o.children;return typeof i=="function"&&i.length>0?me(()=>i(o.keyed?r():()=>{if(me(s)()?.[0]!==l)throw Ht("Match");return r()})):i},void 0,void 0)}function je(e){return e}const fe=e=>le(()=>e());function ys(e,t,s){let n=s.length,l=t.length,r=n,o=0,i=0,a=t[l-1].nextSibling,h=null;for(;o<l||i<r;){if(t[o]===s[i]){o++,i++;continue}for(;t[l-1]===s[r-1];)l--,r--;if(l===o){const m=r<n?i?s[i-1].nextSibling:s[r-i]:a;for(;i<r;)e.insertBefore(s[i++],m)}else if(r===i)for(;o<l;)(!h||!h.has(t[o]))&&t[o].remove(),o++;else if(t[o]===s[r-1]&&s[i]===t[l-1]){const m=t[--l].nextSibling;e.insertBefore(s[i++],t[o++].nextSibling),e.insertBefore(s[--r],m),t[l]=s[r]}else{if(!h){h=new Map;let c=i;for(;c<r;)h.set(s[c],c++)}const m=h.get(t[o]);if(m!=null)if(i<m&&m<r){let c=o,b=1,x;for(;++c<l&&c<r&&!((x=h.get(t[c]))==null||x!==m+b);)b++;if(b>m-i){const S=t[o];for(;i<m;)e.insertBefore(s[i++],S)}else e.replaceChild(s[i++],t[o++])}else o++;else t[o++].remove()}}}const Pt="_$DX_DELEGATE";function bs(e,t,s,n={}){let l;return Be(r=>{l=r,t===document?e():u(t,e(),t.firstChild?null:void 0,s)},n.owner),()=>{l(),t.textContent=""}}function y(e,t,s,n){let l;const r=()=>{const i=document.createElement("template");return i.innerHTML=e,i.content.firstChild},o=()=>(l||(l=r())).cloneNode(!0);return o.cloneNode=o,o}function Ae(e,t=window.document){const s=t[Pt]||(t[Pt]=new Set);for(let n=0,l=e.length;n<l;n++){const r=e[n];s.has(r)||(s.add(r),t.addEventListener(r,ws))}}function H(e,t,s){s==null?e.removeAttribute(t):e.setAttribute(t,s)}function z(e,t){t==null?e.removeAttribute("class"):e.className=t}function gt(e,t,s,n){Array.isArray(s)?(e[`$$${t}`]=s[0],e[`$$${t}Data`]=s[1]):e[`$$${t}`]=s}function q(e,t,s){if(!t)return s?H(e,"style"):t;const n=e.style;if(typeof t=="string")return n.cssText=t;typeof s=="string"&&(n.cssText=s=void 0),s||(s={}),t||(t={});let l,r;for(r in s)t[r]==null&&n.removeProperty(r),delete s[r];for(r in t)l=t[r],l!==s[r]&&(n.setProperty(r,l),s[r]=l);return s}function te(e,t,s){s!=null?e.style.setProperty(t,s):e.style.removeProperty(t)}function Wt(e,t,s){return me(()=>e(t,s))}function u(e,t,s,n){if(s!==void 0&&!n&&(n=[]),typeof t!="function")return st(e,t,n,s);N(l=>st(e,t(),l,s),n)}function ws(e){let t=e.target;const s=`$$${e.type}`,n=e.target,l=e.currentTarget,r=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[s];if(a&&!t.disabled){const h=t[`${s}Data`];if(h!==void 0?a.call(t,h,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&r(t.host),!0},i=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();r(a[0]);for(let h=0;h<a.length-2&&(t=a[h],!!o());h++){if(t._$host){t=t._$host,i();break}if(t.parentNode===l)break}}else i();r(n)}function st(e,t,s,n,l){for(;typeof s=="function";)s=s();if(t===s)return s;const r=typeof t,o=n!==void 0;if(e=o&&s[0]&&s[0].parentNode||e,r==="string"||r==="number"){if(r==="number"&&(t=t.toString(),t===s))return s;if(o){let i=s[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),s=Ee(e,s,n,i)}else s!==""&&typeof s=="string"?s=e.firstChild.data=t:s=e.textContent=t}else if(t==null||r==="boolean")s=Ee(e,s,n);else{if(r==="function")return N(()=>{let i=t();for(;typeof i=="function";)i=i();s=st(e,i,s,n)}),()=>s;if(Array.isArray(t)){const i=[],a=s&&Array.isArray(s);if(bt(i,t,s,l))return N(()=>s=st(e,i,s,n,!0)),()=>s;if(i.length===0){if(s=Ee(e,s,n),o)return s}else a?s.length===0?Et(e,i,n):ys(e,s,i):(s&&Ee(e),Et(e,i));s=i}else if(t.nodeType){if(Array.isArray(s)){if(o)return s=Ee(e,s,n,t);Ee(e,s,null,t)}else s==null||s===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);s=t}}return s}function bt(e,t,s,n){let l=!1;for(let r=0,o=t.length;r<o;r++){let i=t[r],a=s&&s[e.length],h;if(!(i==null||i===!0||i===!1))if((h=typeof i)=="object"&&i.nodeType)e.push(i);else if(Array.isArray(i))l=bt(e,i,a)||l;else if(h==="function")if(n){for(;typeof i=="function";)i=i();l=bt(e,Array.isArray(i)?i:[i],Array.isArray(a)?a:[a])||l}else e.push(i),l=!0;else{const m=String(i);a&&a.nodeType===3&&a.data===m?e.push(a):e.push(document.createTextNode(m))}}return l}function Et(e,t,s=null){for(let n=0,l=t.length;n<l;n++)e.insertBefore(t[n],s)}function Ee(e,t,s,n){if(s===void 0)return e.textContent="";const l=n||document.createTextNode("");if(t.length){let r=!1;for(let o=t.length-1;o>=0;o--){const i=t[o];if(l!==i){const a=i.parentNode===e;!r&&!o?a?e.replaceChild(l,i):e.insertBefore(l,s):a&&i.remove()}else r=!0}}else e.insertBefore(l,s);return[l]}var $s=y("<header class=header><h1 class=header__title>ZEROMOUNT</h1><span class=header__subtitle>GHOST MODE ðŸ‘»");function xs(){return $s()}const wt=Symbol("store-raw"),Ne=Symbol("store-node"),ye=Symbol("store-has"),Yt=Symbol("store-self");function Xt(e){let t=e[pe];if(!t&&(Object.defineProperty(e,pe,{value:t=new Proxy(e,Ms)}),!Array.isArray(e))){const s=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let l=0,r=s.length;l<r;l++){const o=s[l];n[o].get&&Object.defineProperty(e,o,{enumerable:n[o].enumerable,get:n[o].get.bind(t)})}}return t}function nt(e){let t;return e!=null&&typeof e=="object"&&(e[pe]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Ve(e,t=new Set){let s,n,l,r;if(s=e!=null&&e[wt])return s;if(!nt(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,i=e.length;o<i;o++)l=e[o],(n=Ve(l,t))!==l&&(e[o]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let a=0,h=o.length;a<h;a++)r=o[a],!i[r].get&&(l=e[r],(n=Ve(l,t))!==l&&(e[r]=n))}return e}function rt(e,t){let s=e[t];return s||Object.defineProperty(e,t,{value:s=Object.create(null)}),s}function Ke(e,t,s){if(e[t])return e[t];const[n,l]=T(s,{equals:!1,internal:!0});return n.$=l,e[t]=n}function As(e,t){const s=Reflect.getOwnPropertyDescriptor(e,t);return!s||s.get||!s.configurable||t===pe||t===Ne||(delete s.value,delete s.writable,s.get=()=>e[pe][t]),s}function jt(e){_t()&&Ke(rt(e,Ne),Yt)()}function Ss(e){return jt(e),Reflect.ownKeys(e)}const Ms={get(e,t,s){if(t===wt)return e;if(t===pe)return s;if(t===vt)return jt(e),s;const n=rt(e,Ne),l=n[t];let r=l?l():e[t];if(t===Ne||t===ye||t==="__proto__")return r;if(!l){const o=Object.getOwnPropertyDescriptor(e,t);_t()&&(typeof r!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(r=Ke(n,t,r)())}return nt(r)?Xt(r):r},has(e,t){return t===wt||t===pe||t===vt||t===Ne||t===ye||t==="__proto__"?!0:(_t()&&Ke(rt(e,ye),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Ss,getOwnPropertyDescriptor:As};function lt(e,t,s,n=!1){if(!n&&e[t]===s)return;const l=e[t],r=e.length;s===void 0?(delete e[t],e[ye]&&e[ye][t]&&l!==void 0&&e[ye][t].$()):(e[t]=s,e[ye]&&e[ye][t]&&l===void 0&&e[ye][t].$());let o=rt(e,Ne),i;if((i=Ke(o,t,l))&&i.$(()=>s),Array.isArray(e)&&e.length!==r){for(let a=e.length;a<r;a++)(i=o[a])&&i.$();(i=Ke(o,"length",r))&&i.$(e.length)}(i=o[Yt])&&i.$()}function Jt(e,t){const s=Object.keys(t);for(let n=0;n<s.length;n+=1){const l=s[n];lt(e,l,t[l])}}function Cs(e,t){if(typeof t=="function"&&(t=t(e)),t=Ve(t),Array.isArray(t)){if(e===t)return;let s=0,n=t.length;for(;s<n;s++){const l=t[s];e[s]!==l&&lt(e,s,l)}lt(e,"length",n)}else Jt(e,t)}function Re(e,t,s=[]){let n,l=e;if(t.length>1){n=t.shift();const o=typeof n,i=Array.isArray(e);if(Array.isArray(n)){for(let a=0;a<n.length;a++)Re(e,[n[a]].concat(t),s);return}else if(i&&o==="function"){for(let a=0;a<e.length;a++)n(e[a],a)&&Re(e,[a].concat(t),s);return}else if(i&&o==="object"){const{from:a=0,to:h=e.length-1,by:m=1}=n;for(let c=a;c<=h;c+=m)Re(e,[c].concat(t),s);return}else if(t.length>1){Re(e[n],t,[n].concat(s));return}l=e[n],s=[n].concat(s)}let r=t[0];typeof r=="function"&&(r=r(l,s),r===l)||n===void 0&&r==null||(r=Ve(r),n===void 0||nt(l)&&nt(r)&&!Array.isArray(r)?Jt(l,r):lt(e,n,r))}function Je(...[e,t]){const s=Ve(e||{}),n=Array.isArray(s),l=Xt(s);function r(...o){ds(()=>{n&&o.length===1?Cs(s,o[0]):Re(s,o)})}return[l,r]}const R={BINARY:"/data/adb/modules/zeromount/bin/zm",DEVICE:"/dev/zeromount",DATA_DIR:"/data/adb/zeromount/",MODULE_PATHS:"/data/adb/zeromount/module_paths",EXCLUSION_FILE:"/data/adb/zeromount/.exclusion_list",EXCLUSION_META:"/data/adb/zeromount/.exclusion_meta.json",ACTIVITY_LOG:"/data/adb/zeromount/activity.log",VERBOSE_FLAG:"/data/adb/zeromount/.verbose"},Is="https://github.com/backslashxx/zeromount",Ue="3.0.0",j=e=>new Promise(t=>setTimeout(t,e)),Me=[{id:"1",name:"Hide Magisk Data",source:"/data/adb/magisk",target:"/dev/null",hits:156,createdAt:new Date(Date.now()-7200*1e3),active:!0},{id:"2",name:"Block Detection Paths",source:"/system/bin/su",target:"[BLOCKED]",hits:2341,createdAt:new Date(Date.now()-4320*60*1e3),active:!0},{id:"3",name:"Redirect Config",source:"/data/local/tmp/.config",target:"/data/adb/.hidden",hits:47,createdAt:new Date(Date.now()-720*60*1e3),active:!0}],Le=[{uid:10234,packageName:"com.example.detector",appName:"Native Detector",excludedAt:new Date(Date.now()-2880*60*1e3)},{uid:10456,packageName:"com.securityapp.holmes",appName:"Holmes Security",excludedAt:new Date(Date.now()-300*60*1e3)},{uid:10789,packageName:"com.momo.detector",appName:"Momo Detector",excludedAt:new Date(Date.now()-1440*60*1e3)}],ks=[{id:"1",type:"rule_added",message:"Rule added: /data/local -> /null",timestamp:new Date(Date.now()-120*1e3)},{id:"2",type:"uid_excluded",message:"UID 10234 excluded (com.detect.app)",timestamp:new Date(Date.now()-900*1e3)},{id:"3",type:"engine_enabled",message:"Engine enabled",timestamp:new Date(Date.now()-3600*1e3)}],Ps=[{name:"PlayIntegrityFix",ruleCount:12},{name:"LSPosed",ruleCount:8},{name:"FontModule",ruleCount:45}],pt=[{name:"PlayIntegrityFix",path:"/data/adb/modules/playintegrityfix",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!0,fileCount:12},{name:"LSPosed",path:"/data/adb/modules/zygisk_lsposed",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:8},{name:"Font Manager",path:"/data/adb/modules/fontmanager",hasSystem:!0,hasVendor:!0,hasProduct:!1,isLoaded:!0,fileCount:45},{name:"Busybox NDK",path:"/data/adb/modules/busybox-ndk",hasSystem:!0,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:156},{name:"Shamiko",path:"/data/adb/modules/shamiko",hasSystem:!1,hasVendor:!1,hasProduct:!1,isLoaded:!1,fileCount:0}],Es=[{uid:10001,packageName:"com.android.chrome",appName:"Chrome",isSystemApp:!1,iconPath:"link/icons/com.android.chrome.png"},{uid:10002,packageName:"com.whatsapp",appName:"WhatsApp",isSystemApp:!1,iconPath:"link/icons/com.whatsapp.png"},{uid:10003,packageName:"com.instagram.android",appName:"Instagram",isSystemApp:!1,iconPath:"link/icons/com.instagram.android.png"},{uid:10004,packageName:"com.spotify.music",appName:"Spotify",isSystemApp:!1,iconPath:"link/icons/com.spotify.music.png"},{uid:10005,packageName:"com.twitter.android",appName:"X (Twitter)",isSystemApp:!1,iconPath:"link/icons/com.twitter.android.png"},{uid:10006,packageName:"com.netflix.mediaclient",appName:"Netflix",isSystemApp:!1,iconPath:"link/icons/com.netflix.mediaclient.png"},{uid:10007,packageName:"com.facebook.katana",appName:"Facebook",isSystemApp:!1,iconPath:"link/icons/com.facebook.katana.png"},{uid:10008,packageName:"com.discord",appName:"Discord",isSystemApp:!1,iconPath:"link/icons/com.discord.png"},{uid:10009,packageName:"com.telegram.messenger",appName:"Telegram",isSystemApp:!1,iconPath:"link/icons/com.telegram.messenger.png"},{uid:10010,packageName:"com.google.android.youtube",appName:"YouTube",isSystemApp:!1,iconPath:"link/icons/com.google.android.youtube.png"},{uid:10011,packageName:"io.github.vvb2060.mahoshojo",appName:"Momo Detector",isSystemApp:!1,iconPath:"link/icons/io.github.vvb2060.mahoshojo.png"},{uid:10012,packageName:"rikka.appops",appName:"App Ops",isSystemApp:!1,iconPath:"link/icons/rikka.appops.png"},{uid:10013,packageName:"com.termux",appName:"Termux",isSystemApp:!1,iconPath:"link/icons/com.termux.png"},{uid:10014,packageName:"com.topjohnwu.magisk",appName:"Magisk",isSystemApp:!1,iconPath:"link/icons/com.topjohnwu.magisk.png"},{uid:10015,packageName:"me.weishu.kernelsu",appName:"KernelSU",isSystemApp:!1,iconPath:"link/icons/me.weishu.kernelsu.png"},{uid:1e3,packageName:"com.android.settings",appName:"Settings",isSystemApp:!0,iconPath:"link/icons/com.android.settings.png"},{uid:1001,packageName:"com.android.phone",appName:"Phone",isSystemApp:!0,iconPath:"link/icons/com.android.phone.png"},{uid:10100,packageName:"com.android.systemui",appName:"System UI",isSystemApp:!0,iconPath:"link/icons/com.android.systemui.png"},{uid:10101,packageName:"com.google.android.gms",appName:"Google Play Services",isSystemApp:!0,iconPath:"link/icons/com.google.android.gms.png"},{uid:10102,packageName:"com.google.android.gsf",appName:"Google Services Framework",isSystemApp:!0,iconPath:"link/icons/com.google.android.gsf.png"},{uid:10103,packageName:"com.android.vending",appName:"Play Store",isSystemApp:!0,iconPath:"link/icons/com.android.vending.png"},{uid:10104,packageName:"com.google.android.apps.messaging",appName:"Messages",isSystemApp:!0,iconPath:"link/icons/com.google.android.apps.messaging.png"},{uid:10105,packageName:"com.android.providers.contacts",appName:"Contacts Storage",isSystemApp:!0,iconPath:"link/icons/com.android.providers.contacts.png"}],W={async getVersion(){return await j(100),`v${Ue}`},async getSystemInfo(){return await j(150),{driverVersion:`v${Ue}`,kernelVersion:"6.1.75",susfsVersion:"v1.5.2",uptime:"4h 23m",deviceModel:"Pixel 6",androidVersion:"14",selinuxStatus:"Enforcing"}},async getRules(){return await j(200),[...Me]},async addRule(e,t,s){await j(300);const n={id:Date.now().toString(),name:e,source:t,target:s,hits:0,createdAt:new Date,active:!0};return Me.push(n),n},async deleteRule(e){await j(200);const t=Me.findIndex(s=>s.id===e||s.source===e);t>-1&&Me.splice(t,1)},async clearAllRules(){await j(300),Me.length=0},async getExcludedUids(){return await j(200),[...Le]},async excludeUid(e,t,s){await j(300);const n={uid:e,packageName:t,appName:s,excludedAt:new Date};return Le.push(n),n},async includeUid(e){await j(200);const t=Le.findIndex(s=>s.uid===e);t>-1&&Le.splice(t,1)},async getActivity(){return await j(150),[...ks]},async getStats(){return await j(100),{activeRules:Me.length,excludedUids:Le.length,hitsToday:Me.reduce((e,t)=>e+t.hits,0)}},async toggleEngine(e){await j(400)},async setVerboseLogging(e){await j(100)},async getModules(){return await j(100),[...Ps]},async isEngineActive(){return!0},async getInstalledApps(){return await j(300),[...Es]},async scanKsuModules(){return await j(200),[...pt]},async loadKsuModule(e,t){await j(500);const s=pt.find(n=>n.path===t);return s&&(s.isLoaded=!0),s?.fileCount||0},async unloadKsuModule(e,t){await j(400);const s=pt.find(n=>n.path===t);return s&&(s.isLoaded=!1),s?.fileCount||0},async fetchSystemColor(){return null}};function ee(e){return"'"+e.replace(/'/g,"'\\''")+"'"}let Ts=0;function I(){return typeof globalThis.ksu>"u"}async function P(e,t=3e4){const s=globalThis.ksu;if(!s?.exec)throw console.error("[ZM-API] execCommand() FAILED: KSU not available"),new Error("KSU not available");return new Promise((n,l)=>{const r=`exec_cb_${Date.now()}_${Ts++}`,o=setTimeout(()=>{delete window[r],l(new Error(`Command timed out: ${e.substring(0,50)}...`))},t);window[r]=(i,a,h)=>{clearTimeout(o),delete window[r],n({errno:i,stdout:a,stderr:h})};try{s.exec(e,"{}",r)}catch(i){clearTimeout(o),delete window[r],l(i)}})}function Ns(e){console.log("[ZM-API] parseRulesOutput() input:",e?.slice(0,200));const s=e.trim().split(`
`).filter(n=>n.trim()).map((n,l)=>{const r=n.indexOf("->"),o=r===-1?n.trim():n.slice(0,r).trim(),i=r===-1?"[BLOCKED]":n.slice(r+2).trim();return{id:String(l+1),name:o.split("/").pop()||"Rule",source:o,target:i,hits:0,createdAt:new Date,active:!0}});return console.log("[ZM-API] parseRulesOutput() parsed",s.length,"rules"),s}async function Fs(){console.log("[ZM-API] parseExclusionFiles() called");try{const{errno:e,stdout:t}=await P(`cat "${R.EXCLUSION_FILE}"`);if(console.log("[ZM-API] parseExclusionFiles() list result:",{errno:e,stdout:t?.slice(0,100)}),e!==0||!t.trim())return console.log("[ZM-API] parseExclusionFiles() no exclusions found"),[];const s=t.trim().split(`
`).map(r=>parseInt(r.trim(),10)).filter(r=>!isNaN(r));console.log("[ZM-API] parseExclusionFiles() parsed UIDs:",s);let n={};try{const{errno:r,stdout:o}=await P(`cat "${R.EXCLUSION_META}"`);console.log("[ZM-API] parseExclusionFiles() meta result:",{errno:r,stdout:o?.slice(0,100)}),r===0&&o.trim()&&(n=JSON.parse(o),console.log("[ZM-API] parseExclusionFiles() parsed meta for",Object.keys(n).length,"UIDs"))}catch(r){console.log("[ZM-API] parseExclusionFiles() meta parse error (optional):",r)}const l=s.map(r=>{const o=n[String(r)];return{uid:r,packageName:o?.packageName||`app_${r}`,appName:o?.appName||`UID ${r}`,excludedAt:o?.excludedAt?new Date(o.excludedAt):new Date}});return console.log("[ZM-API] parseExclusionFiles() returning",l.length,"exclusions"),l}catch(e){return console.error("[ZM-API] parseExclusionFiles() error:",e),[]}}async function Ds(){console.log("[ZM-API] parseActivityLog() called");try{const{errno:e,stdout:t}=await P(`tail -50 "${R.ACTIVITY_LOG}"`);if(console.log("[ZM-API] parseActivityLog() result:",{errno:e,stdout:t?.slice(0,100)}),e!==0||!t.trim())return console.log("[ZM-API] parseActivityLog() no activity found"),[];const s=["rule_added","rule_removed","uid_excluded","uid_included","engine_enabled","engine_disabled"],l=t.trim().split(`
`).filter(r=>r.trim()).map((r,o)=>{const i=r.match(/^\[(.+?)\]\s+(\w+):\s+(.+)$/);if(i){const[,a,h,m]=i,c=h.toLowerCase();return{id:String(o+1),type:s.includes(c)?c:"engine_enabled",message:m,timestamp:new Date(a)}}return{id:String(o+1),type:"engine_enabled",message:r,timestamp:new Date}});return console.log("[ZM-API] parseActivityLog() parsed",l.length,"activity items"),l}catch(e){return console.error("[ZM-API] parseActivityLog() error:",e),[]}}async function $e(e,t){if(!I())try{const n=`[${new Date().toISOString()}] ${e.toUpperCase()}: ${t}`;await P(`echo ${ee(n)} >> "${R.ACTIVITY_LOG}"`)}catch(s){console.error("[ZM-API] logActivity() error:",s)}}const K={async getVersion(){if(console.log("[ZM-API] getVersion() called, mock:",I()),I())return W.getVersion();try{const{errno:e,stdout:t}=await P(`${R.BINARY} ver`);if(e===0&&t)return console.log("[ZM-API] getVersion() returning:",t.trim()),t.trim();console.log("[ZM-API] getVersion() command failed, using fallback")}catch(e){console.error("[ZM-API] getVersion() error:",e)}return console.log("[ZM-API] getVersion() returning fallback:",`v${Ue}`),`v${Ue}`},async getSystemInfo(){if(console.log("[ZM-API] getSystemInfo() called, mock:",I()),I())return W.getSystemInfo();const e={driverVersion:`v${Ue}`,kernelVersion:"-",susfsVersion:"-",uptime:"-",deviceModel:"-",androidVersion:"-",selinuxStatus:"-"};try{console.log("[ZM-API] getSystemInfo() fetching system info...");const[t,s,n,l,r,o]=await Promise.all([P(`${R.BINARY} ver`).catch(()=>({errno:1,stdout:"",stderr:""})),P("uname -r").catch(()=>({errno:1,stdout:"",stderr:""})),P("cat /proc/uptime").catch(()=>({errno:1,stdout:"",stderr:""})),P("getprop ro.product.model").catch(()=>({errno:1,stdout:"",stderr:""})),P("getprop ro.build.version.release").catch(()=>({errno:1,stdout:"",stderr:""})),P("getenforce").catch(()=>({errno:1,stdout:"",stderr:""}))]);if(t.errno===0&&t.stdout&&(e.driverVersion=t.stdout.trim()),s.errno===0&&s.stdout&&(e.kernelVersion=s.stdout.trim()),n.errno===0&&n.stdout){const a=parseInt(n.stdout.split(" ")[0],10);if(!isNaN(a)){const h=Math.floor(a/3600),m=Math.floor(a%3600/60);e.uptime=`${h}h ${m}m`}}l.errno===0&&l.stdout.trim()&&(e.deviceModel=l.stdout.trim()),r.errno===0&&r.stdout.trim()&&(e.androidVersion=r.stdout.trim()),o.errno===0&&o.stdout.trim()&&(e.selinuxStatus=o.stdout.trim());const i=await P('cat /sys/kernel/susfs/version 2>/dev/null || echo ""').catch(()=>({errno:1,stdout:"",stderr:""}));i.errno===0&&i.stdout.trim()&&(e.susfsVersion=i.stdout.trim()),console.log("[ZM-API] getSystemInfo() returning:",e)}catch(t){console.error("[ZM-API] getSystemInfo() error:",t)}return e},async getRules(){if(console.log("[ZM-API] getRules() called, mock:",I()),I())return W.getRules();try{const{errno:e,stdout:t}=await P(`${R.BINARY} list`);if(e===0&&t.trim()){const s=Ns(t);return console.log("[ZM-API] getRules() returning",s.length,"rules"),s}console.log("[ZM-API] getRules() command returned no data")}catch(e){console.error("[ZM-API] getRules() error:",e)}return console.log("[ZM-API] getRules() returning empty array"),[]},async addRule(e,t,s){if(console.log("[ZM-API] addRule() called:",{name:e,source:t,target:s,mock:I()}),I())return W.addRule(e,t,s);const n=`${R.BINARY} add ${ee(t)} ${ee(s)}`;console.log("[ZM-API] addRule() executing:",n);const{errno:l,stderr:r}=await P(n);if(l!==0)throw console.error("[ZM-API] addRule() failed:",{errno:l,stderr:r}),new Error(r||"Failed to add rule");const o={id:Date.now().toString(),name:e,source:t,target:s,hits:0,createdAt:new Date,active:!0};return console.log("[ZM-API] addRule() success, returning:",o.id),await $e("RULE_ADDED",`${e}: ${t} -> ${s}`),o},async deleteRule(e){if(console.log("[ZM-API] deleteRule() called:",{sourcePath:e,mock:I()}),I())return W.deleteRule(e);const t=`${R.BINARY} del ${ee(e)}`;console.log("[ZM-API] deleteRule() executing:",t);const{errno:s,stderr:n}=await P(t);if(s!==0)throw console.error("[ZM-API] deleteRule() failed:",{errno:s,stderr:n}),new Error(n||"Failed to delete rule");console.log("[ZM-API] deleteRule() success"),await $e("RULE_REMOVED",e)},async clearAllRules(){if(console.log("[ZM-API] clearAllRules() called, mock:",I()),I())return W.clearAllRules();const e=`${R.BINARY} clear`;console.log("[ZM-API] clearAllRules() executing:",e);const{errno:t,stderr:s}=await P(e);if(t!==0)throw console.error("[ZM-API] clearAllRules() failed:",{errno:t,stderr:s}),new Error(s||"Failed to clear rules");console.log("[ZM-API] clearAllRules() success"),await $e("RULES_CLEARED","All rules cleared")},async getExcludedUids(){if(console.log("[ZM-API] getExcludedUids() called, mock:",I()),I())return W.getExcludedUids();const e=await Fs();return console.log("[ZM-API] getExcludedUids() returning",e.length,"exclusions"),e},async excludeUid(e,t,s){if(console.log("[ZM-API] excludeUid() called:",{uid:e,packageName:t,appName:s,mock:I()}),I())return W.excludeUid(e,t,s);if(!Number.isInteger(e)||e<0)throw new Error("Invalid UID");const n=`${R.BINARY} blk ${ee(String(e))}`;console.log("[ZM-API] excludeUid() executing:",n);const{errno:l,stderr:r}=await P(n);if(l!==0)throw console.error("[ZM-API] excludeUid() failed:",{errno:l,stderr:r}),new Error(r||"Failed to exclude UID");console.log("[ZM-API] excludeUid() success"),await P(`echo ${ee(String(e))} >> "${R.EXCLUSION_FILE}"`).catch(o=>console.error("[ZM-API] Exclusion persistence failed:",o));try{let o={};const{errno:i,stdout:a}=await P(`cat "${R.EXCLUSION_META}" 2>/dev/null`);if(i===0&&a.trim())try{o=JSON.parse(a)}catch(h){console.error("[ZM-API] Metadata parse error, starting fresh:",h),o={}}o[String(e)]={packageName:t,appName:s,excludedAt:new Date().toISOString()},await P(`echo ${ee(JSON.stringify(o))} > "${R.EXCLUSION_META}"`)}catch(o){console.error("[ZM-API] Metadata save failed:",o)}return await $e("UID_EXCLUDED",`${s} (${e})`),{uid:e,packageName:t,appName:s,excludedAt:new Date}},async includeUid(e){if(console.log("[ZM-API] includeUid() called:",{uid:e,mock:I()}),I())return W.includeUid(e);const t=`${R.BINARY} unb ${ee(String(e))}`;console.log("[ZM-API] includeUid() executing:",t);const{errno:s,stderr:n}=await P(t);if(s!==0)throw console.error("[ZM-API] includeUid() failed:",{errno:s,stderr:n}),new Error(n||"Failed to include UID");console.log("[ZM-API] includeUid() success"),await P(`sed -i '/^${e}$/d' "${R.EXCLUSION_FILE}"`).catch(l=>console.error("[ZM-API] Exclusion removal failed:",l));try{const{errno:l,stdout:r}=await P(`cat "${R.EXCLUSION_META}" 2>/dev/null`);if(l===0&&r.trim())try{const o=JSON.parse(r);delete o[String(e)],await P(`echo ${ee(JSON.stringify(o))} > "${R.EXCLUSION_META}"`)}catch(o){console.error("[ZM-API] Metadata parse error during cleanup:",o)}}catch(l){console.error("[ZM-API] Metadata cleanup failed:",l)}await $e("UID_INCLUDED",`UID ${e}`)},async getActivity(){if(console.log("[ZM-API] getActivity() called, mock:",I()),I())return W.getActivity();const e=await Ds();return console.log("[ZM-API] getActivity() returning",e.length,"items"),e},async getStats(){if(console.log("[ZM-API] getStats() called, mock:",I()),I())return W.getStats();const[e,t]=await Promise.all([this.getRules(),this.getExcludedUids()]),s={activeRules:e.length,excludedUids:t.length,hitsToday:e.reduce((n,l)=>n+l.hits,0)};return console.log("[ZM-API] getStats() returning:",s),s},async toggleEngine(e){if(console.log("[ZM-API] toggleEngine() called:",{enable:e,mock:I()}),I())return W.toggleEngine(e);const t=e?`${R.BINARY} enable`:`${R.BINARY} disable`;console.log("[ZM-API] toggleEngine() executing:",t);const{errno:s,stderr:n}=await P(t);if(s!==0)throw console.error("[ZM-API] toggleEngine() failed:",{errno:s,stderr:n}),new Error(n||"Failed to toggle engine");console.log("[ZM-API] toggleEngine() success"),await $e(e?"ENGINE_ENABLED":"ENGINE_DISABLED",e?"Engine activated":"Engine deactivated")},async setVerboseLogging(e){if(console.log("[ZM-API] setVerboseLogging() called:",{enabled:e,mock:I()}),I())return W.setVerboseLogging(e);const t=e?`touch "${R.VERBOSE_FLAG}"`:`rm -f "${R.VERBOSE_FLAG}"`;console.log("[ZM-API] setVerboseLogging() executing:",t);const{errno:s,stderr:n}=await P(t);if(s!==0)throw console.error("[ZM-API] setVerboseLogging() failed:",{errno:s,stderr:n}),new Error(n||"Failed to set verbose logging");console.log("[ZM-API] setVerboseLogging() success")},async getModules(){if(console.log("[ZM-API] getModules() called, mock:",I()),I())return W.getModules();try{const{errno:e,stdout:t}=await P(`ls "${R.MODULE_PATHS}" 2>/dev/null`);if(e!==0||!t.trim())return console.log("[ZM-API] getModules() no modules found"),[];const s=t.trim().split(`
`).filter(Boolean);console.log("[ZM-API] getModules() found",s.length,"module names");const n=await Promise.all(s.map(async l=>{const r=`${R.MODULE_PATHS}/${l}`,{stdout:o}=await P(`wc -l < ${ee(r)} 2>/dev/null || echo 0`);return{name:l,ruleCount:parseInt(o.trim(),10)||0}}));return console.log("[ZM-API] getModules() returning",n.length,"modules"),n}catch(e){return console.error("[ZM-API] getModules() error:",e),[]}},async isEngineActive(){if(console.log("[ZM-API] isEngineActive() called, mock:",I()),I())return W.isEngineActive();try{const{errno:e}=await P(`[ -e "${R.DEVICE}" ]`),t=e===0;return console.log("[ZM-API] isEngineActive() returning:",t),t}catch(e){return console.error("[ZM-API] isEngineActive() error:",e),!1}},async getInstalledApps(){if(console.log("[ZM-API] getInstalledApps() called, mock:",I()),I())return W.getInstalledApps();try{const e=await fetch("link/installed_apps.json?t="+Date.now());if(e.ok){const t=await e.text();try{const s=JSON.parse(t);if(Array.isArray(s))return console.log("[ZM-API] getInstalledApps() loaded",s.length,"apps"),s}catch(s){console.error("[ZM-API] JSON parse error in getInstalledApps:",s)}}}catch{console.log("[ZM-API] getInstalledApps() file not ready")}return[]},async refreshInstalledApps(){console.log("[ZM-API] refreshInstalledApps() called (no-op)")},async checkAppListStale(e){if(console.log("[ZM-API] checkAppListStale() cached:",e),I())return!1;try{const{errno:t,stdout:s}=await P("pm list packages -3 | wc -l");if(t===0){const n=parseInt(s.trim(),10);return console.log("[ZM-API] checkAppListStale() current:",n),n!==e}}catch(t){console.error("[ZM-API] checkAppListStale() error:",t)}return!1},async getRefreshTrigger(){if(I())return null;try{const e=await fetch("link/.refresh_trigger?t="+Date.now());if(e.ok){const t=await e.text(),s=parseInt(t.trim(),10);if(!isNaN(s))return s}}catch{}return null},async scanKsuModules(){if(console.log("[ZM-API] scanKsuModules() called, mock:",I()),I())return W.scanKsuModules();try{const{errno:e,stdout:t}=await P("ls -1 /data/adb/modules 2>/dev/null");if(e!==0||!t.trim())return console.log("[ZM-API] scanKsuModules() no modules found"),[];const s=t.trim().split(`
`).filter(Boolean),n=await this.getRules(),l=new Set(n.map(o=>o.source)),r=[];for(const o of s){const i=`/data/adb/modules/${o}`,[a,h,m]=await Promise.all([P(`[ -d "${i}/system" ] && echo 1 || echo 0`).catch(()=>({stdout:"0"})),P(`[ -d "${i}/vendor" ] && echo 1 || echo 0`).catch(()=>({stdout:"0"})),P(`[ -d "${i}/product" ] && echo 1 || echo 0`).catch(()=>({stdout:"0"}))]),c=a.stdout.trim()==="1",b=h.stdout.trim()==="1",x=m.stdout.trim()==="1";if(!c&&!b&&!x)continue;const{stdout:S}=await P(`find ${ee(i)} -type f \\( -path "*/system/*" -o -path "*/vendor/*" -o -path "*/product/*" \\) 2>/dev/null | wc -l`).catch(()=>({stdout:"0"})),f=parseInt(S.trim(),10)||0,g=Array.from(l).some(w=>w.startsWith(i));let v=o;try{const{stdout:w}=await P(`cat "${i}/module.prop" 2>/dev/null | grep "^name=" | cut -d= -f2`);w.trim()&&(v=w.trim())}catch{}r.push({name:v,path:i,hasSystem:c,hasVendor:b,hasProduct:x,isLoaded:g,fileCount:f})}return console.log("[ZM-API] scanKsuModules() returning",r.length,"modules"),r}catch(e){return console.error("[ZM-API] scanKsuModules() error:",e),[]}},async loadKsuModule(e,t){if(console.log("[ZM-API] loadKsuModule() called:",{moduleName:e,modulePath:t,mock:I()}),I())return W.loadKsuModule(e,t);try{const{stdout:s}=await P(`find ${ee(t)} -type f \\( -path "*/system/*" -o -path "*/vendor/*" -o -path "*/product/*" \\) 2>/dev/null`),n=s.trim().split(`
`).filter(Boolean);let l=0;for(const r of n){const o=r.replace(t,"");let i="";if(o.startsWith("/system/"))i=o;else if(o.startsWith("/vendor/"))i=o;else if(o.startsWith("/product/"))i=o;else continue;const a=`${R.BINARY} add ${ee(r)} ${ee(i)}`,{errno:h}=await P(a);h===0&&l++}return await $e("MODULE_LOADED",`${e}: ${l} rules added`),console.log("[ZM-API] loadKsuModule() added",l,"rules"),l}catch(s){throw console.error("[ZM-API] loadKsuModule() error:",s),s}},async unloadKsuModule(e,t){if(console.log("[ZM-API] unloadKsuModule() called:",{moduleName:e,modulePath:t,mock:I()}),I())return W.unloadKsuModule(e,t);try{const n=(await this.getRules()).filter(r=>r.source.startsWith(t));let l=0;for(const r of n){const o=`${R.BINARY} del ${ee(r.source)}`,{errno:i}=await P(o);i===0&&l++}return await $e("MODULE_UNLOADED",`${e}: ${l} rules removed`),console.log("[ZM-API] unloadKsuModule() removed",l,"rules"),l}catch(s){throw console.error("[ZM-API] unloadKsuModule() error:",s),s}},async fetchSystemColor(){if(console.log("[ZM-API] fetchSystemColor() called, mock:",I()),I())return W.fetchSystemColor();try{const{errno:e,stdout:t}=await P("settings get secure theme_customization_overlay_packages");if(e!==0||!t.trim())return console.log("[ZM-API] fetchSystemColor() no system color found"),null;const s=/#?([0-9a-fA-F]{6,8})/i.exec(t);if(s){const n="#"+s[1].slice(0,6);return console.log("[ZM-API] fetchSystemColor() found:",n),n}return console.log("[ZM-API] fetchSystemColor() no hex color in output"),null}catch(e){return console.error("[ZM-API] fetchSystemColor() error:",e),null}}};let Ls=0;const Rs=/^[a-zA-Z][a-zA-Z0-9_.]*$/;function Zs(e){return typeof e=="object"&&e!==null&&"packageName"in e&&typeof e.packageName=="string"}function Bs(e){return Rs.test(e)&&e.length<=256}async function qt(e,t=3e4){const s=globalThis.ksu;return s?.exec?new Promise(n=>{const l=`ksu_api_cb_${Date.now()}_${Ls++}`,r=setTimeout(()=>{delete window[l],n({errno:-1,stdout:"",stderr:"timeout"})},t);window[l]=(o,i,a)=>{clearTimeout(r),delete window[l],n({errno:o,stdout:i,stderr:a})};try{s.exec(e,"{}",l)}catch{clearTimeout(r),delete window[l],n({errno:-1,stdout:"",stderr:"exec failed"})}}):{errno:-1,stdout:"",stderr:"KSU not available"}}async function Tt(e){const t=globalThis.ksu,n={all:"listAllPackages",user:"listUserPackages",system:"listSystemPackages"}[e];if(t?.[n])try{const i=t[n]();if(i){const a=JSON.parse(i);if(Array.isArray(a))return a}}catch{}const l={all:"",user:"-3",system:"-s"},{stdout:r,errno:o}=await qt(`pm list packages ${l[e]} | sed 's/package://'`);return o===0&&r.trim()?r.trim().split(`
`).filter(Boolean):[]}async function Us(e){if(!e.length)return[];const t=globalThis.ksu;if(t?.getPackagesInfo)try{const n=t.getPackagesInfo(JSON.stringify(e));if(n){const l=JSON.parse(n);if(Array.isArray(l)&&l.every(Zs))return l}}catch{}const s=[];for(const n of e){if(!Bs(n)){s.push({packageName:n,appLabel:n});continue}const{stdout:l,errno:r}=await qt(`pm path ${n} 2>/dev/null | head -1 | sed 's/package://' | xargs -I{} aapt dump badging {} 2>/dev/null | grep "application-label:" | head -1 | sed "s/application-label:'\\(.*\\)'/\\1/"`);s.push({packageName:n,appLabel:r===0&&l.trim()?l.trim():n})}return s}const ot={"#00BCD4":{gradient:"linear-gradient(135deg, #00BCD4 0%, #00E5FF 50%, #18FFFF 100%)",textAccent:"#00E5FF",rgb:"0, 188, 212"},"#FF8E53":{gradient:"linear-gradient(135deg, #FF8E53 0%, #FFA040 50%, #FFD93D 100%)",textAccent:"#FF8E53",rgb:"255, 142, 83"},"#FFC107":{gradient:"linear-gradient(135deg, #FFC107 0%, #FFD54F 50%, #FFEB3B 100%)",textAccent:"#FFC107",rgb:"255, 193, 7"},"#00D68F":{gradient:"linear-gradient(135deg, #00D68F 0%, #00E5A0 50%, #69F0AE 100%)",textAccent:"#00D68F",rgb:"0, 214, 143"},"#00B4D8":{gradient:"linear-gradient(135deg, #00B4D8 0%, #48CAE4 50%, #90E0EF 100%)",textAccent:"#00B4D8",rgb:"0, 180, 216"},"#764BA2":{gradient:"linear-gradient(135deg, #764BA2 0%, #9B59B6 50%, #C084FC 100%)",textAccent:"#9B59B6",rgb:"118, 75, 162"},"#FFFFFF":{gradient:"linear-gradient(135deg, #E0E0E0 0%, #BDBDBD 50%, #9E9E9E 100%)",textAccent:"#BDBDBD",rgb:"189, 189, 189"},"#64748B":{gradient:"linear-gradient(135deg, #64748B 0%, #94A3B8 50%, #CBD5E1 100%)",textAccent:"#94A3B8",rgb:"100, 116, 139"}};function Qt(e){const t=ot[e];if(!t)return!1;const[s,n,l]=t.rgb.split(",").map(r=>parseInt(r.trim()));return(.299*s+.587*n+.114*l)/255>.6}function At(e){return ot[e]||ot["#00BCD4"]}const Ge={gradientPrimary:"linear-gradient(135deg, #FF6B6B 0%, #FF8E53 50%, #FFC107 100%)",gradientSecondary:"linear-gradient(180deg, #1A1A2E 0%, #0F0F1A 100%)",colorSuccess:"#00D68F",colorSuccessGlow:"rgba(0, 214, 143, 0.4)",colorWarning:"#FFB800",colorWarningGlow:"rgba(255, 184, 0, 0.4)",colorError:"#FF3D71",colorErrorGlow:"rgba(255, 61, 113, 0.4)",colorInfo:"#00B4D8",colorInfoGlow:"rgba(0, 180, 216, 0.4)",bgPrimary:"linear-gradient(180deg, #0F0F1A 0%, #1A1A2E 100%)",bgSurface:"rgba(255, 255, 255, 0.05)",bgSurfaceElevated:"rgba(255, 255, 255, 0.08)",bgSurfaceHover:"rgba(255, 255, 255, 0.12)",glassBg:"rgba(255, 255, 255, 0.06)",glassBorder:"rgba(255, 255, 255, 0.1)",glassBlur:"blur(20px)",textPrimary:"#FFFFFF",textSecondary:"rgba(255, 255, 255, 0.7)",textTertiary:"rgba(255, 255, 255, 0.5)",textAccent:"#FF8E53",fontDisplay:"'Space Grotesk', system-ui, sans-serif",fontBody:"'Inter', system-ui, sans-serif",fontMono:"'JetBrains Mono', 'Fira Code', monospace",radiusSmall:"8px",radiusMedium:"12px",radiusLarge:"16px",radiusXLarge:"24px",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.2)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.3)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.4)",shadowGlow:"0 0 20px rgba(255, 107, 107, 0.3)",accentRgb:"255, 107, 107"},Nt={...Ge,gradientSecondary:"linear-gradient(180deg, #FFFFFF 0%, #F5F5F5 100%)",bgPrimary:"linear-gradient(180deg, #F5F5F5 0%, #FFFFFF 100%)",bgSurface:"rgba(0, 0, 0, 0.03)",bgSurfaceElevated:"rgba(0, 0, 0, 0.05)",bgSurfaceHover:"rgba(0, 0, 0, 0.08)",glassBg:"rgba(0, 0, 0, 0.03)",glassBorder:"rgba(0, 0, 0, 0.1)",textPrimary:"#1A1A2E",textSecondary:"rgba(0, 0, 0, 0.7)",textTertiary:"rgba(0, 0, 0, 0.5)",textAccent:"#E65100",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.1)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.15)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.2)",shadowGlow:"0 0 20px rgba(255, 107, 107, 0.4)"},zs={...Ge,gradientSecondary:"linear-gradient(180deg, #000000 0%, #050505 100%)",bgPrimary:"#000000",bgSurface:"rgba(255, 255, 255, 0.03)",bgSurfaceElevated:"rgba(255, 255, 255, 0.05)",bgSurfaceHover:"rgba(255, 255, 255, 0.08)",glassBg:"rgba(255, 255, 255, 0.02)",glassBorder:"rgba(255, 255, 255, 0.08)",shadowSmall:"0 2px 8px rgba(0, 0, 0, 0.5)",shadowMedium:"0 8px 24px rgba(0, 0, 0, 0.6)",shadowLarge:"0 20px 40px rgba(0, 0, 0, 0.7)"},ze=Ge;function Os(e,t){const s=document.documentElement;s.style.setProperty("--bg-primary",e.bgPrimary),s.style.setProperty("--bg-surface",e.bgSurface),s.style.setProperty("--bg-surface-elevated",e.bgSurfaceElevated),s.style.setProperty("--bg-surface-hover",e.bgSurfaceHover),s.style.setProperty("--glass-bg",e.glassBg),s.style.setProperty("--glass-border",e.glassBorder),s.style.setProperty("--text-primary",e.textPrimary),s.style.setProperty("--text-secondary",e.textSecondary),s.style.setProperty("--text-tertiary",e.textTertiary),s.style.setProperty("--gradient-secondary",e.gradientSecondary),s.style.setProperty("--color-success",e.colorSuccess),s.style.setProperty("--color-success-glow",e.colorSuccessGlow),s.style.setProperty("--color-warning",e.colorWarning),s.style.setProperty("--color-warning-glow",e.colorWarningGlow),s.style.setProperty("--color-error",e.colorError),s.style.setProperty("--color-error-glow",e.colorErrorGlow),s.style.setProperty("--color-info",e.colorInfo),s.style.setProperty("--color-info-glow",e.colorInfoGlow),s.style.setProperty("--shadow-small",e.shadowSmall),s.style.setProperty("--shadow-medium",e.shadowMedium),s.style.setProperty("--shadow-large",e.shadowLarge);const n=At(t||"#FF6B6B");s.style.setProperty("--gradient-primary",n.gradient),s.style.setProperty("--text-accent",n.textAccent),s.style.setProperty("--accent-rgb",n.rgb),s.style.setProperty("--shadow-glow",`0 0 20px rgba(${n.rgb}, 0.3)`)}function Vs(e){const t=document.documentElement,s=At(e);t.style.setProperty("--gradient-primary",s.gradient),t.style.setProperty("--text-accent",s.textAccent),t.style.setProperty("--accent-rgb",s.rgb),t.style.setProperty("--shadow-glow",`0 0 20px rgba(${s.rgb}, 0.3)`)}function Ks(){console.log("[ZM-Store] createAppStore() initializing...");const[e,t]=T("status"),[s,n]=T(!0),[l,r]=Je({status:!1,modules:!1,apps:!1,rules:!1,activity:!1,engine:!1}),[o,i]=Je({activeRules:0,excludedUids:0,hitsToday:0}),[a,h]=Je({driverVersion:"",kernelVersion:"",susfsVersion:"",uptime:"",deviceModel:"",androidVersion:"",selinuxStatus:""}),[m,c]=T([]),[b,x]=T([]),[S,f]=T([]),[g,v]=T([]),[w,A]=T([]),[M,E]=T([]),F=typeof window<"u"?localStorage.getItem("zeromount-theme"):null,O=typeof window<"u"?localStorage.getItem("zeromount-fixedNav")==="true":!0,V=typeof window<"u"?localStorage.getItem("zeromount-autoAccent")==="true":!1,Z=Object.keys(ot),J=Z[Math.floor(Math.random()*Z.length)],[$,ae]=Je({theme:F||"amoled",accentColor:J,autoAccentColor:V,animationsEnabled:!0,autoStartOnBoot:!0,verboseLogging:!1,fixedNav:O}),[ce,ue]=T(typeof window<"u"?window.matchMedia("(prefers-color-scheme: dark)").matches:!0);typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",C=>ue(C.matches));const oe=le(()=>{const _=$.theme,C=_==="light"?Nt:_==="amoled"?zs:_==="auto"?ce()?Ge:Nt:Ge,k=At($.accentColor);return{...C,gradientPrimary:k.gradient,textAccent:k.textAccent,accentRgb:k.rgb,shadowGlow:`0 0 20px rgba(${k.rgb}, 0.3)`}});ie(()=>{Os(oe(),$.accentColor)}),ie(()=>{Vs($.accentColor)}),ie(()=>{typeof window<"u"&&localStorage.setItem("zeromount-theme",$.theme)}),ie(()=>{typeof window<"u"&&localStorage.setItem("zeromount-accent",$.accentColor)}),ie(()=>{typeof window<"u"&&localStorage.setItem("zeromount-fixedNav",String($.fixedNav))}),ie(()=>{typeof window<"u"&&localStorage.setItem("zeromount-autoAccent",String($.autoAccentColor))});const[ne,re]=T(null),D=(_,C="info")=>{re({message:_,type:C}),setTimeout(()=>re(null),3e3)},ve=async()=>{console.log("[ZM-Store] loadInitialData() starting..."),r({status:!0,rules:!0,activity:!0});try{if($.autoAccentColor){const De=await K.fetchSystemColor();De&&(console.log("[ZM-Store] loadInitialData() applying system accent color:",De),ae({accentColor:De}))}console.log("[ZM-Store] loadInitialData() calling all API methods in parallel...");const _=await Promise.allSettled([K.getRules(),K.getExcludedUids(),K.getActivity(),K.getStats(),K.getSystemInfo(),K.getModules(),K.isEngineActive()]),C=_[0].status==="fulfilled"?_[0].value:[],k=_[1].status==="fulfilled"?_[1].value:[],L=_[2].status==="fulfilled"?_[2].value:[],B=_[3].status==="fulfilled"?_[3].value:{activeRules:0,excludedUids:0,hitsToday:0},de=_[4].status==="fulfilled"?_[4].value:{driverVersion:"",kernelVersion:"",susfsVersion:"",uptime:"",deviceModel:"",androidVersion:"",selinuxStatus:""},Pe=_[5].status==="fulfilled"?_[5].value:[],Mt=_[6].status==="fulfilled"?_[6].value:!1,Ct=_.filter(De=>De.status==="rejected").length;Ct>0&&console.warn("[ZM-Store] loadInitialData() partial failure:",Ct,"APIs failed"),console.log("[ZM-Store] loadInitialData() API results:",{rules:C.length,uids:k.length,activity:L.length,stats:B,sysInfo:de,modules:Pe.length,isActive:Mt}),c(C),x(k),f(L),i(B),h(de),v(Pe),n(Mt),console.log("[ZM-Store] loadInitialData() state updated successfully")}catch(_){console.error("[ZM-Store] loadInitialData() error:",_),D("Failed to load data","error")}finally{r({status:!1,rules:!1,activity:!1}),console.log("[ZM-Store] loadInitialData() complete")}},_e=async()=>{console.log("[ZM-Store] refreshModules() called");try{const _=await K.getModules();v(_),console.log("[ZM-Store] refreshModules() updated with",_.length,"modules")}catch(_){console.log("[ZM-Store] refreshModules() silent fail:",_)}},we=async()=>{if(l.engine)return;const _=!s();console.log("[ZM-Store] toggleEngine() called, newState:",_),r("engine",!0);try{await K.toggleEngine(_),n(_),console.log("[ZM-Store] toggleEngine() success, engine now:",_),D(_?"Engine activated":"Engine deactivated","success")}catch(C){console.error("[ZM-Store] toggleEngine() error:",C),D("Failed to toggle engine","error")}finally{r("engine",!1)}},Ce=async(_,C,k)=>{console.log("[ZM-Store] addRule() called:",{name:_,source:C,target:k}),r("rules",!0);try{const L=await K.addRule(_,C,k);return c(B=>[...B,L]),i("activeRules",B=>B+1),console.log("[ZM-Store] addRule() success, rule id:",L.id),D("Rule created successfully","success"),L}catch(L){throw console.error("[ZM-Store] addRule() error:",L),D("Failed to create rule","error"),L}finally{r("rules",!1)}},Ie=async _=>{console.log("[ZM-Store] deleteRule() called:",_),r("rules",!0);try{await K.deleteRule(_),c(C=>C.filter(k=>k.source!==_)),i("activeRules",C=>C-1),console.log("[ZM-Store] deleteRule() success"),D("Rule deleted","success")}catch(C){console.error("[ZM-Store] deleteRule() error:",C),D("Failed to delete rule","error")}finally{r("rules",!1)}},ts=async(_,C,k)=>{if(console.log("[ZM-Store] excludeUid() called:",{uid:_,packageName:C,appName:k}),_<=0)return console.warn("[ZM-Store] Cannot exclude invalid UID:",_),D("Cannot exclude app with unknown UID","error"),null;if(ke.has(_))return console.log("[ZM-Store] Operation pending for UID:",_),null;ke.add(_),r("apps",!0);try{const L=await K.excludeUid(_,C,k);return x(B=>[...B,L]),i("excludedUids",B=>B+1),console.log("[ZM-Store] excludeUid() success"),D(`Excluded ${k}`,"success"),L}catch(L){throw console.error("[ZM-Store] excludeUid() error:",L),D("Failed to exclude UID","error"),L}finally{ke.delete(_),r("apps",!1)}},ss=async _=>{if(console.log("[ZM-Store] includeUid() called:",_),_<=0){console.warn("[ZM-Store] Cannot include invalid UID:",_),D("Cannot include app with unknown UID","error");return}if(ke.has(_)){console.log("[ZM-Store] Operation pending for UID:",_);return}ke.add(_),r("apps",!0);try{await K.includeUid(_),x(C=>C.filter(k=>k.uid!==_)),i("excludedUids",C=>C-1),console.log("[ZM-Store] includeUid() success"),D("UID included","success")}catch(C){console.error("[ZM-Store] includeUid() error:",C),D("Failed to include UID","error")}finally{ke.delete(_),r("apps",!1)}},ns=async()=>{console.log("[ZM-Store] clearAllRules() called"),r("rules",!0);try{await K.clearAllRules(),c([]),i("activeRules",0),console.log("[ZM-Store] clearAllRules() success"),D("All rules cleared","success")}catch(_){console.error("[ZM-Store] clearAllRules() error:",_),D("Failed to clear rules","error")}finally{r("rules",!1)}},rs=_=>{console.log("[ZM-Store] updateSettings() called:",_),ae(_)};let We=null,Ye,ft=!1,Se=!1;const ke=new Set,St=async()=>{const[_,C]=await Promise.all([Tt("user"),Tt("system")]),k=[...new Set([..._,...C])];if(k.length===0)return[];const L=await Us(k),B=new Set(C);return L.map(de=>({packageName:de.packageName,appName:de.appLabel||de.packageName,uid:de.uid??-1,isSystemApp:de.isSystemApp??B.has(de.packageName)}))},ls=()=>{ft||(ft=!0,Ye=window.setInterval(async()=>{if(!Se)try{const _=await K.getRefreshTrigger();if(_!==null&&(We===null||_!==We)){console.log("[ZM-Store] Daemon triggered refresh, timestamp:",_),We=_,Se=!0;try{const C=await St();A(k=>{const L=new Set(k.map(Pe=>Pe.packageName)),B=C.filter(Pe=>!L.has(Pe.packageName)),de=k.length-(C.length-B.length);return(B.length>0||de>0)&&console.log("[ZM-Store] Daemon update: new",B.length,", removed",de),C})}finally{Se=!1}}}catch{Se=!1}},5e3))};return{activeTab:e,setActiveTab:t,engineActive:s,loading:l,stats:o,systemInfo:a,rules:m,excludedUids:b,activity:S,modules:g,installedApps:w,ksuModules:M,settings:$,currentTheme:oe,toast:ne,loadInitialData:ve,refreshModules:_e,loadInstalledApps:async()=>{if(Se){console.log("[ZM-Store] App fetch already in progress, skipping");return}Se=!0,console.log("[ZM-Store] loadInstalledApps() called"),r("apps",!0);try{if(I()){const C=await K.getInstalledApps();A(C),console.log("[ZM-Store] loadInstalledApps() loaded",C.length,"mock apps");return}const _=await St();A(_),console.log("[ZM-Store] loadInstalledApps() loaded",_.length,"apps via KSU API"),We=await K.getRefreshTrigger(),ls()}catch(_){console.error("[ZM-Store] loadInstalledApps() error:",_),D("Failed to load apps","error")}finally{Se=!1,r("apps",!1)}},scanKsuModules:async()=>{console.log("[ZM-Store] scanKsuModules() called"),r("modules",!0);try{const _=await K.scanKsuModules();E(_),console.log("[ZM-Store] scanKsuModules() loaded",_.length,"modules")}catch(_){console.error("[ZM-Store] scanKsuModules() error:",_),D("Failed to scan modules","error")}finally{r("modules",!1)}},loadKsuModule:async(_,C)=>{console.log("[ZM-Store] loadKsuModule() called:",{moduleName:_,modulePath:C});try{const k=await K.loadKsuModule(_,C);return E(L=>L.map(B=>B.path===C?{...B,isLoaded:!0}:B)),i("activeRules",L=>L+k),console.log("[ZM-Store] loadKsuModule() success, added",k,"rules"),D(`Loaded ${_} (${k} rules)`,"success"),k}catch(k){throw console.error("[ZM-Store] loadKsuModule() error:",k),D(`Failed to load ${_}`,"error"),k}},unloadKsuModule:async(_,C)=>{console.log("[ZM-Store] unloadKsuModule() called:",{moduleName:_,modulePath:C});try{const k=await K.unloadKsuModule(_,C);return E(L=>L.map(B=>B.path===C?{...B,isLoaded:!1}:B)),i("activeRules",L=>Math.max(0,L-k)),console.log("[ZM-Store] unloadKsuModule() success, removed",k,"rules"),D(`Unloaded ${_} (${k} rules)`,"success"),k}catch(k){throw console.error("[ZM-Store] unloadKsuModule() error:",k),D(`Failed to unload ${_}`,"error"),k}},toggleEngine:we,addRule:Ce,deleteRule:Ie,excludeUid:ts,includeUid:ss,clearAllRules:ns,updateSettings:rs,showToast:D,stopPolling:()=>{Ye&&(clearInterval(Ye),Ye=void 0),ft=!1}}}console.log("[ZM-Store] Creating store root...");const d=Be(Ks);console.log("[ZM-Store] Store created successfully");var Gs=y("<nav><div class=navbar__tabs><div>"),Hs=y("<button><span class=navbar__icon></span><span class=navbar__label>"),Ws=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z">'),Ys=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M10 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z">'),Xs=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z">'),js=y('<svg width=24 height=24 viewBox="0 0 24 24"fill=currentColor><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z">');const Js=[{id:"status",label:"Status",icon:"power_settings_new"},{id:"modules",label:"Modules",icon:"folder"},{id:"config",label:"Config",icon:"tune"},{id:"settings",label:"Settings",icon:"settings"}];function qs(e){const[t,s]=T(0),[n,l]=T(0),[r,o]=T(!1);let i={};ie(()=>{const h=i[e.activeTab];if(h){const m=h.getBoundingClientRect(),c=h.parentElement?.getBoundingClientRect();c&&(o(!0),setTimeout(()=>{s(m.left-c.left),l(m.width),setTimeout(()=>o(!1),200)},50))}});const a=()=>d.settings.fixedNav;return(()=>{var h=Gs(),m=h.firstChild,c=m.firstChild;return u(m,p(he,{each:Js,children:b=>(()=>{var x=Hs(),S=x.firstChild,f=S.nextSibling;return x.$$click=()=>e.onTabChange(b.id),Wt(g=>i[b.id]=g,x),u(S,(()=>{var g=fe(()=>b.icon==="power_settings_new");return()=>g()&&Ws()})(),null),u(S,(()=>{var g=fe(()=>b.icon==="folder");return()=>g()&&Ys()})(),null),u(S,(()=>{var g=fe(()=>b.icon==="tune");return()=>g()&&Xs()})(),null),u(S,(()=>{var g=fe(()=>b.icon==="settings");return()=>g()&&js()})(),null),u(f,()=>b.label),N(()=>z(x,`navbar__tab ${e.activeTab===b.id?"navbar__tab--active":""}`)),x})()}),null),N(b=>{var x=`navbar ${a()?"navbar--fixed-nav":""}`,S=`navbar__indicator ${r()?"navbar__indicator--stretching":""}`,f=`${t()}px`,g=`${n()}px`;return x!==b.e&&z(h,b.e=x),S!==b.t&&z(c,b.t=S),f!==b.a&&te(c,"left",b.a=f),g!==b.o&&te(c,"width",b.o=g),b},{e:void 0,t:void 0,a:void 0,o:void 0}),h})()}Ae(["click"]);var Qs=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z">'),en=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z">'),tn=y('<svg width=20 height=20 viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z">'),sn=y("<div>");function nn(e){const[t,s]=T(!1),[n,l]=T(100);ie(()=>{e.visible?(s(!0),setTimeout(()=>l(0),10)):(l(100),setTimeout(()=>s(!1),300))});const r=()=>{const i=d.currentTheme();switch(e.type){case"success":return`
          background: ${i.colorSuccess};
          box-shadow: 0 8px 24px ${i.colorSuccessGlow};
        `;case"error":return`
          background: ${i.colorError};
          box-shadow: 0 8px 24px ${i.colorErrorGlow};
        `;default:return`
          background: ${i.colorInfo};
          box-shadow: 0 8px 24px ${i.colorInfoGlow};
        `}},o=()=>{switch(e.type){case"success":return Qs();case"error":return en();default:return tn()}};return p(X,{get when(){return t()},get children(){var i=sn();return u(i,o,null),u(i,()=>e.message,null),N(a=>q(i,`
          position: fixed;
          bottom: 100px;
          left: 50%;
          transform: translateX(-50%) translateY(${n()}px);
          z-index: 1000;
          display: flex;
          align-items: center;
          gap: 10px;
          padding: 14px 20px;
          border-radius: ${ze.radiusLarge};
          color: #FFFFFF;
          font-family: ${ze.fontBody};
          font-size: 14px;
          font-weight: 500;
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
          ${r()}
        `,a)),i}})}var rn=y("<div>");function se(e){const[t]=ut(e,["variant","padding","hoverable","children","style","onClick"]),s=()=>t.variant||"glass",n=()=>t.padding||"medium",l=()=>{const r=["card"];return r.push(`card--${s()}`),r.push(`card--padding-${n()}`),t.hoverable&&r.push("card--hoverable"),r.join(" ")};return(()=>{var r=rn();return gt(r,"click",t.onClick),u(r,()=>t.children),N(o=>{var i=l(),a=t.style||void 0;return i!==o.e&&z(r,o.e=i),o.t=q(r,a,o.t),o},{e:void 0,t:void 0}),r})()}Ae(["click"]);var ln=y("<span class=button__spinner>"),on=y("<button>");function ge(e){const[t]=ut(e,["variant","size","loading","fullWidth","children","disabled","onClick","style","type","class"]),s=()=>t.variant||"primary",n=()=>t.size||"medium",l=()=>{const o=["button",`button--${s()}`,`button--${n()}`];return t.fullWidth&&o.push("button--full-width"),t.class&&o.push(t.class),o.join(" ")},r=()=>s()==="primary"?`color: ${Qt(d.settings.accentColor)?"#1A1A2E":"#FFFFFF"};`:"";return(()=>{var o=on();return gt(o,"click",t.onClick),u(o,p(X,{get when(){return t.loading},get children(){return ln()}}),null),u(o,p(X,{get when(){return!t.loading},get children(){return t.children}}),null),N(i=>{var a=t.type||"button",h=l(),m=t.loading||t.disabled,c=`${r()} ${t.style||""}`;return a!==i.e&&H(o,"type",i.e=a),h!==i.t&&z(o,i.t=h),m!==i.a&&(o.disabled=i.a=m),i.o=q(o,c,i.o),i},{e:void 0,t:void 0,a:void 0,o:void 0}),o})()}Ae(["click"]);var an=y("<div>");function U(e){const t={"--skeleton-width":e.width||"100%","--skeleton-height":e.height||"20px","--skeleton-radius":e.borderRadius||"12px"};return(()=>{var s=an();return N(n=>{var l=`skeleton ${e.class||""}`,r=t;return l!==n.e&&z(s,n.e=l),n.t=q(s,r,n.t),n},{e:void 0,t:void 0}),s})()}var cn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z">'),dn=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z">'),un=y('<svg width=20 height=20 viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z">'),gn=y('<div class=status-hero><div class=status-hero__indicator><span></span></div><div><div></div><svg width=100 height=100 viewBox="0 0 24 24"class=status-hero__shield-svg><defs><linearGradient id=shieldGradient x1=0% y1=0% x2=100% y2=100%><stop offset=0%></stop><stop offset=50%></stop><stop offset=100%></stop></linearGradient></defs><path fill=url(#shieldGradient) d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z">'),fn=y('<h3 class="status-section__header color-text-secondary">Quick Stats'),hn=y('<div class=status-stats><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Active Rules</div></div><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Excluded Apps</div></div><div class="status-stats__card bg-surface"><div class=status-stats__value></div><div class="status-stats__label color-text-tertiary">Hits Today'),pn=y('<h3 class="status-section__header color-text-secondary">Mode Statistics'),mn=y('<div class=status-mode><div class=status-mode__row><div class=status-mode__label><span class=status-mode__dot></span><span class="status-mode__text color-text-primary">VFS Redirection</span></div><span class="status-mode__value color-text-accent"></span></div><div class=status-mode__row><div class=status-mode__label><span class=status-mode__dot></span><span class="status-mode__text color-text-primary">SUSFS Available</span></div><span class="status-mode__value color-text-accent">'),vn=y('<h3 class="status-section__header color-text-secondary">Mount Info'),_n=y('<div class=status-mount__cards><div class="status-mount__card bg-surface"><div class="status-mount__card-label color-text-tertiary">Modules</div><div class="status-mount__card-value color-text-primary"> active</div></div><div class="status-mount__card bg-surface"><div class="status-mount__card-label color-text-tertiary">Source</div><div class="status-mount__card-value color-text-accent">KSU'),yn=y('<div class="status-mount__paths-label color-text-tertiary">Redirected Paths'),bn=y("<div class=status-mount__paths>"),wn=y('<h3 class="status-section__header color-text-secondary">System Health'),$n=y('<div><div class=status-health__item-header><span class=status-health__level>WARNING</span><span class="status-health__title color-text-primary">Rules</span></div><div class="status-health__message status-health__message--warning color-text-secondary">No redirection rules configured'),xn=y('<div class=status-health><div><div class=status-health__item-header><span class=status-health__level>INFO</span><span class="status-health__title color-text-primary">System</span></div><div class="status-health__message color-text-secondary">SUSFS integration active'),An=y('<div class=status-activity__header><h3 class="status-section__header status-activity__title color-text-secondary">Recent Activity</h3><button class="status-activity__toggle color-text-accent">'),Sn=y("<div class=status-activity__list>"),Mn=y('<h3 class="status-section__header color-text-secondary">System Info'),Cn=y('<div class=status-info__grid><div><span class="status-info__label color-text-tertiary">Device:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">Android:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">SELinux:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">Kernel:</span><span class=color-text-primary></span></div><div><span class="status-info__label color-text-tertiary">Driver:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">SUSFS:</span><span class=color-text-accent></span></div><div><span class="status-info__label color-text-tertiary">Uptime:</span><span class=color-text-primary>'),In=y("<div class=status>"),kn=y("<div class=status-hero>"),Pn=y('<div class=status-stats><div class="status-stats__card bg-surface"></div><div class="status-stats__card bg-surface"></div><div class="status-stats__card bg-surface">'),En=y('<div class="status-mount__empty color-text-tertiary">No paths redirected'),Tn=y('<div class="status-mount__chip bg-surface color-text-primary">'),Nn=y('<div class="status-activity__item bg-surface"><div class=status-activity__icon></div><div class=status-activity__content><div class="status-activity__message color-text-primary"></div><div class="status-activity__time color-text-tertiary">'),Fn=y("<div class=status-info__grid><div></div><div></div><div></div><div></div><div></div><div></div><div>");function Dn(){const[e,t]=T(1),[s,n]=T(0),[l,r]=T(0),[o,i]=T(0),[a,h]=T(!1);ie(()=>{if(d.engineActive()){const f=setInterval(()=>{t(1.03),setTimeout(()=>t(1),150)},3e3);dt(()=>clearInterval(f))}}),ct(()=>{const f=(g,v,w=500)=>{const M=performance.now(),E=F=>{const O=F-M,V=Math.min(O/w,1),Z=1-Math.pow(1-V,3);v(Math.round(0+(g-0)*Z)),V<1&&requestAnimationFrame(E)};requestAnimationFrame(E)};setTimeout(()=>{f(d.stats.activeRules,n),f(d.stats.excludedUids,r),f(d.stats.hitsToday,i)},300)});const m=f=>{const g=Math.floor((Date.now()-f.getTime())/1e3);if(g<60)return"Just now";const v=Math.floor(g/60);if(v<60)return`${v} min ago`;const w=Math.floor(v/60);return w<24?`${w}h ago`:`${Math.floor(w/24)} days ago`},c=f=>{const g=d.currentTheme();switch(f){case"rule_added":case"rule_removed":return(()=>{var v=cn();return N(()=>H(v,"fill",g.colorSuccess)),v})();case"uid_excluded":case"uid_included":return(()=>{var v=dn();return N(()=>H(v,"fill",g.colorError)),v})();default:return(()=>{var v=un();return N(()=>H(v,"fill",g.colorWarning)),v})()}},b=le(()=>{const f=new Set;return d.rules().forEach(g=>{const v=g.target.split("/").filter(Boolean);if(v.length>0){const w="/"+v[0];w!=="/[BLOCKED]"&&f.add(w)}}),Array.from(f).sort()}),x=le(()=>d.rules().length>0?1:0),S=()=>d.loading.status&&!d.systemInfo.driverVersion;return(()=>{var f=In();return u(f,p(X,{get when(){return!S()},get fallback(){return p(se,{variant:"gradient-border",padding:"large",get children(){var g=kn();return u(g,p(U,{width:"120px",height:"24px",borderRadius:"12px"}),null),u(g,p(U,{width:"100px",height:"100px",borderRadius:"50%",class:"status-hero__skeleton-shield"}),null),u(g,p(U,{width:"200px",height:"48px",borderRadius:"24px"}),null),g}})},get children(){return p(se,{variant:"gradient-border",padding:"large",get style(){return d.engineActive()?"animation: glowPulse 3s ease-in-out infinite;":""},get children(){var g=gn(),v=g.firstChild,w=v.firstChild,A=v.nextSibling,M=A.firstChild,E=M.nextSibling,F=E.firstChild,O=F.firstChild,V=O.firstChild,Z=V.nextSibling,J=Z.nextSibling;return u(v,()=>d.engineActive()?"Engine Active":"Engine Inactive",null),u(g,p(ge,{size:"large",onClick:()=>d.toggleEngine(),get loading(){return d.loading.engine},get style(){return`min-width: 200px; ${d.engineActive()?"":"opacity: 0.8; filter: grayscale(20%);"}`},get children(){return d.engineActive()?"DISABLE ENGINE":"ENABLE ENGINE"}}),null),N($=>{var ae=d.engineActive()?Qt(d.settings.accentColor)?"#1A1A2E":d.currentTheme().colorSuccess:d.currentTheme().textTertiary,ce=`status-hero__dot ${d.engineActive()?"status-hero__dot--active":""}`,ue=d.engineActive()?d.currentTheme().colorSuccess:d.currentTheme().textTertiary,oe=d.engineActive()?`0 0 12px ${d.currentTheme().colorSuccessGlow}`:"none",ne=`status-hero__shield ${d.engineActive()?"status-hero__shield--active":""}`,re=`scale(${e()})`,D=`status-hero__glow ${d.engineActive()?"status-hero__glow--active":"status-hero__glow--inactive"}`,ve=d.engineActive()?`radial-gradient(circle, ${d.currentTheme().colorSuccessGlow} 0%, transparent 70%)`:"transparent",_e=d.engineActive()?`drop-shadow(0 0 20px ${d.currentTheme().colorSuccessGlow})`:"none",we=`stop-color: ${d.engineActive()?"#E8B4A0":d.currentTheme().textTertiary}`,Ce=`stop-color: ${d.engineActive()?"#D4A574":d.currentTheme().textTertiary}`,Ie=`stop-color: ${d.engineActive()?"#C9B896":d.currentTheme().textTertiary}`;return ae!==$.e&&te(v,"color",$.e=ae),ce!==$.t&&z(w,$.t=ce),ue!==$.a&&te(w,"background",$.a=ue),oe!==$.o&&te(w,"box-shadow",$.o=oe),ne!==$.i&&z(A,$.i=ne),re!==$.n&&te(A,"transform",$.n=re),D!==$.s&&z(M,$.s=D),ve!==$.h&&te(M,"background",$.h=ve),_e!==$.r&&te(E,"filter",$.r=_e),$.d=q(V,we,$.d),$.l=q(Z,Ce,$.l),$.u=q(J,Ie,$.u),$},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),g}})}}),null),u(f,p(se,{get children(){return[fn(),p(X,{get when(){return!S()},get fallback(){return(()=>{var g=Pn(),v=g.firstChild,w=v.nextSibling,A=w.nextSibling;return u(v,p(U,{width:"48px",height:"32px",borderRadius:"8px"}),null),u(v,p(U,{width:"72px",height:"14px",borderRadius:"6px"}),null),u(w,p(U,{width:"48px",height:"32px",borderRadius:"8px"}),null),u(w,p(U,{width:"80px",height:"14px",borderRadius:"6px"}),null),u(A,p(U,{width:"48px",height:"32px",borderRadius:"8px"}),null),u(A,p(U,{width:"64px",height:"14px",borderRadius:"6px"}),null),g})()},get children(){var g=hn(),v=g.firstChild,w=v.firstChild,A=v.nextSibling,M=A.firstChild,E=A.nextSibling,F=E.firstChild;return u(w,s),u(M,l),u(F,o),g}})]}}),null),u(f,p(se,{get children(){return[pn(),(()=>{var g=mn(),v=g.firstChild,w=v.firstChild,A=w.firstChild,M=w.nextSibling,E=v.nextSibling,F=E.firstChild,O=F.firstChild,V=F.nextSibling;return u(M,()=>d.rules().length),u(V,(()=>{var Z=fe(()=>!!(d.systemInfo.susfsVersion&&d.systemInfo.susfsVersion!=="N/A"));return()=>Z()?`Yes (${d.systemInfo.susfsVersion})`:"No"})()),N(Z=>{var J=d.currentTheme().colorSuccess,$=d.currentTheme().colorInfo||"#3b82f6";return J!==Z.e&&te(A,"background",Z.e=J),$!==Z.t&&te(O,"background",Z.t=$),Z},{e:void 0,t:void 0}),g})()]}}),null),u(f,p(se,{get children(){return[vn(),(()=>{var g=_n(),v=g.firstChild,w=v.firstChild,A=w.nextSibling,M=A.firstChild;return u(A,x,M),g})(),yn(),p(X,{get when(){return b().length>0},get fallback(){return En()},get children(){var g=bn();return u(g,p(he,{get each(){return b()},children:v=>(()=>{var w=Tn();return u(w,v),w})()})),g}})]}}),null),u(f,p(se,{get children(){return[wn(),(()=>{var g=xn(),v=g.firstChild,w=v.firstChild,A=w.firstChild;return u(g,p(X,{get when(){return d.rules().length===0},get children(){var M=$n(),E=M.firstChild,F=E.firstChild;return N(O=>te(F,"color",d.currentTheme().colorWarning)),M}}),null),N(M=>te(A,"color",d.currentTheme().colorInfo||"#3b82f6")),g})()]}}),null),u(f,p(se,{get children(){return[(()=>{var g=An(),v=g.firstChild,w=v.nextSibling;return w.$$click=()=>h(!a()),u(w,()=>a()?"Show Less":"View All"),g})(),(()=>{var g=Sn();return u(g,p(he,{get each(){return fe(()=>!!a())()?d.activity():d.activity().slice(0,3)},children:(v,w)=>(()=>{var A=Nn(),M=A.firstChild,E=M.nextSibling,F=E.firstChild,O=F.nextSibling;return u(M,()=>c(v.type)),u(F,()=>v.message),u(O,()=>m(v.timestamp)),N(V=>te(A,"animation",`slideInRight 0.3s ease-out ${w()*.1}s both`)),A})()})),g})()]}}),null),u(f,p(se,{get children(){return[Mn(),p(X,{get when(){return!S()},get fallback(){return(()=>{var g=Fn(),v=g.firstChild,w=v.nextSibling,A=w.nextSibling,M=A.nextSibling,E=M.nextSibling,F=E.nextSibling,O=F.nextSibling;return u(v,p(U,{width:"140px",height:"16px"})),u(w,p(U,{width:"100px",height:"16px"})),u(A,p(U,{width:"90px",height:"16px"})),u(M,p(U,{width:"160px",height:"16px"})),u(E,p(U,{width:"80px",height:"16px"})),u(F,p(U,{width:"70px",height:"16px"})),u(O,p(U,{width:"100px",height:"16px"})),g})()},get children(){var g=Cn(),v=g.firstChild,w=v.firstChild,A=w.nextSibling,M=v.nextSibling,E=M.firstChild,F=E.nextSibling,O=M.nextSibling,V=O.firstChild,Z=V.nextSibling,J=O.nextSibling,$=J.firstChild,ae=$.nextSibling,ce=J.nextSibling,ue=ce.firstChild,oe=ue.nextSibling,ne=ce.nextSibling,re=ne.firstChild,D=re.nextSibling,ve=ne.nextSibling,_e=ve.firstChild,we=_e.nextSibling;return u(A,()=>d.systemInfo.deviceModel),u(F,()=>d.systemInfo.androidVersion),u(Z,()=>d.systemInfo.selinuxStatus),u(ae,()=>d.systemInfo.kernelVersion),u(oe,()=>d.systemInfo.driverVersion),u(D,()=>d.systemInfo.susfsVersion),u(we,()=>d.systemInfo.uptime),g}})]}}),null),f})()}Ae(["click"]);var Ln=y("<div><div class=input__wrapper><input class=input__field>"),Rn=y("<label class=input__label>"),Zn=y("<span class=input__error>");function es(e){const[t]=ut(e,["label","error","fullWidth","placeholder","value","onInput","type","disabled"]),s=()=>{const n=["input"];return t.fullWidth&&n.push("input--full-width"),t.error&&n.push("input--error"),n.join(" ")};return(()=>{var n=Ln(),l=n.firstChild,r=l.firstChild;return u(n,(()=>{var o=fe(()=>!!t.label);return()=>o()&&(()=>{var i=Rn();return u(i,()=>t.label),i})()})(),l),gt(r,"input",t.onInput),u(n,(()=>{var o=fe(()=>!!t.error);return()=>o()&&(()=>{var i=Zn();return u(i,()=>t.error),i})()})(),null),N(o=>{var i=s(),a=t.type||"text",h=t.placeholder,m=t.disabled;return i!==o.e&&z(n,o.e=i),a!==o.t&&H(r,"type",o.t=a),h!==o.a&&H(r,"placeholder",o.a=h),m!==o.o&&(r.disabled=o.o=m),o},{e:void 0,t:void 0,a:void 0,o:void 0}),N(()=>r.value=t.value||""),n})()}Ae(["input"]);var Bn=y("<span>");function $t(e){const[t]=ut(e,["variant","size","children"]),s=()=>t.variant||"default",n=()=>t.size||"medium",l=()=>`badge badge--${n()} badge--${s()}`;return(()=>{var r=Bn();return u(r,()=>t.children),N(()=>z(r,l())),r})()}var Ft=y("<div class=modules__list>"),Un=y('<div class=modules__empty><svg class=modules__empty-icon width=48 height=48 viewBox="0 0 24 24"fill=currentColor><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l4.59-4.58L18 11l-6 6z"></path></svg><div class=modules__empty-title></div><div class=modules__empty-subtitle>'),zn=y('<div class=modules><div class=modules__search-row><div class=modules__search-wrapper><svg class=modules__search-icon width=20 height=20 viewBox="0 0 24 24"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">'),On=y("<div class=modules__item-row><div class=modules__skeleton-content>"),Vn=y('<div class=modules__item-row><div><svg width=22 height=22 viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l4.59-4.58L18 11l-6 6z"></path></svg></div><div class=modules__item-content><div class=modules__item-name></div><div class=modules__item-meta> files'),Kn=y('<div class=modules__details><div class=modules__details-inner><div><div class=modules__detail-label>Path</div><div class=modules__path-value></div></div><div><div class="modules__detail-label modules__detail-label--partitions">Partitions</div><div class=modules__partitions></div></div><div class=modules__stats-row><div><span class=modules__stat-label>Files:</span><span class=modules__stat-value></span></div><div><span class=modules__stat-label>Status:</span><span>'),Gn=y("<span class=modules__partition-badge>/");const Dt=()=>d.currentTheme();function Hn(){const[e,t]=T(""),[s,n]=T(null),[l,r]=T(new Set);ct(()=>{d.ksuModules().length===0&&d.scanKsuModules()});const o=()=>{const m=e().toLowerCase();return m?d.ksuModules().filter(c=>c.name.toLowerCase().includes(m)||c.path.toLowerCase().includes(m)):d.ksuModules()},i=async m=>{r(c=>{const b=new Set(c);return b.add(m.path),b});try{m.isLoaded?await d.unloadKsuModule(m.name,m.path):await d.loadKsuModule(m.name,m.path)}finally{r(c=>{const b=new Set(c);return b.delete(m.path),b})}},a=m=>l().has(m),h=m=>{const c=[];return m.hasSystem&&c.push("system"),m.hasVendor&&c.push("vendor"),m.hasProduct&&c.push("product"),c};return(()=>{var m=zn(),c=m.firstChild,b=c.firstChild,x=b.firstChild;return u(b,p(es,{placeholder:"Search modules...",get value(){return e()},onInput:S=>t(S.currentTarget.value),fullWidth:!0}),x),u(c,p(ge,{onClick:()=>d.scanKsuModules(),get loading(){return d.loading.modules},style:"white-space: nowrap;",children:"SCAN"}),null),u(m,p(X,{get when(){return d.loading.modules},get children(){var S=Ft();return u(S,p(he,{each:[1,2,3],children:()=>p(se,{get children(){var f=On(),g=f.firstChild;return u(f,p(U,{width:"44px",height:"44px",borderRadius:"12px"}),g),u(g,p(U,{width:"140px",height:"18px",borderRadius:"8px"}),null),u(g,p(U,{width:"80px",height:"14px",borderRadius:"6px"}),null),u(f,p(U,{width:"72px",height:"24px",borderRadius:"12px"}),null),f}})})),S}}),null),u(m,p(X,{get when(){return!d.loading.modules},get children(){var S=Ft();return u(S,p(he,{get each(){return o()},children:(f,g)=>p(se,{hoverable:!0,get style(){return`animation: slideInRight 0.3s ease-out ${g()*.05}s both; cursor: pointer;`},onClick:()=>n(s()===f.path?null:f.path),get children(){return[(()=>{var v=Vn(),w=v.firstChild,A=w.firstChild,M=w.nextSibling,E=M.firstChild,F=E.nextSibling,O=F.firstChild;return u(E,()=>f.name),u(F,()=>f.fileCount,O),u(v,p($t,{get variant(){return f.isLoaded?"success":"default"},size:"small",get children(){return f.isLoaded?"Loaded":"Not Loaded"}}),null),N(V=>{var Z=`modules__item-icon ${f.isLoaded?"modules__item-icon--active":"modules__item-icon--inactive"}`,J=f.isLoaded?"white":Dt().textTertiary;return Z!==V.e&&z(w,V.e=Z),J!==V.t&&H(A,"fill",V.t=J),V},{e:void 0,t:void 0}),v})(),p(X,{get when(){return s()===f.path},get children(){var v=Kn(),w=v.firstChild,A=w.firstChild,M=A.firstChild,E=M.nextSibling,F=A.nextSibling,O=F.firstChild,V=O.nextSibling,Z=F.nextSibling,J=Z.firstChild,$=J.firstChild,ae=$.nextSibling,ce=J.nextSibling,ue=ce.firstChild,oe=ue.nextSibling;return u(E,()=>f.path),u(V,p(he,{get each(){return h(f)},children:ne=>(()=>{var re=Gn();return re.firstChild,u(re,ne,null),re})()})),u(ae,()=>f.fileCount.toLocaleString()),u(oe,()=>f.isLoaded?"Active":"Inactive"),u(w,p(ge,{get variant(){return f.isLoaded?"danger":"primary"},size:"small",get loading(){return a(f.path)},onClick:ne=>{ne.stopPropagation(),i(f)},style:"margin-top: 8px;",get children(){return f.isLoaded?"HOT UNLOAD":"HOT LOAD"}}),null),N(()=>z(oe,`modules__stat-value ${f.isLoaded?"modules__stat-value--active":"modules__stat-value--inactive"}`)),v}})]}})}),null),u(S,p(X,{get when(){return fe(()=>o().length===0)()&&!d.loading.modules},get children(){var f=Un(),g=f.firstChild,v=g.nextSibling,w=v.nextSibling;return u(v,()=>e()?"No modules match your search":"No modules with system overlays"),u(w,()=>e()?"Try a different search term":"Install KernelSU modules with system/vendor/product directories"),f}}),null),S}}),null),N(()=>H(x,"fill",Dt().textTertiary)),m})()}var Wn=y("<button type=button><div></div><div>");function Te(e){const[t,s]=T(!1),[n,l]=T(e.checked?28:2),[r,o]=T(24);ie(()=>{l(e.checked?28:2)});const i=()=>{e.disabled||(o(28),setTimeout(()=>{o(24),e.onChange(!e.checked)},100))},a=()=>d.currentTheme();return(()=>{var h=Wn(),m=h.firstChild,c=m.nextSibling;return h.addEventListener("mouseleave",()=>s(!1)),h.$$mouseup=()=>s(!1),h.$$mousedown=()=>s(!0),h.$$click=i,N(b=>{var x=e.disabled,S=`
        position: relative;
        width: 56px;
        height: 28px;
        border-radius: 14px;
        border: none;
        cursor: ${e.disabled?"not-allowed":"pointer"};
        background: ${e.checked?a().gradientPrimary:a().bgSurfaceElevated};
        transition: background 0.3s ease;
        opacity: ${e.disabled?"0.5":"1"};
        padding: 0;
        outline: none;
      `,f=`
          position: absolute;
          inset: -4px;
          border-radius: 18px;
          background: ${e.checked?"rgba(var(--accent-rgb), 0.2)":"transparent"};
          filter: blur(8px);
          transition: all 0.3s ease;
          pointer-events: none;
        `,g=`
          position: absolute;
          top: 2px;
          left: ${n()}px;
          width: ${r()}px;
          height: 24px;
          border-radius: 12px;
          background: ${a().textPrimary};
          box-shadow: ${a().shadowSmall};
          transition: left 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), width 0.1s ease;
          transform: ${t()?"scale(0.95)":"scale(1)"};
        `;return x!==b.e&&(h.disabled=b.e=x),b.t=q(h,S,b.t),b.a=q(m,f,b.a),b.o=q(c,g,b.o),b},{e:void 0,t:void 0,a:void 0,o:void 0}),h})()}Ae(["click","mousedown","mouseup"]);var Yn=y('<div><img class=config__icon-img><svg viewBox="0 0 24 24"class=config__icon-fallback><path d="M17 1.01L7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99zM17 19H7V5h10v14z">'),Xn=y('<div class=config__section-header><h3 class=config__section-title><svg width=18 height=18 viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"></path></svg>Excluded Apps'),jn=y("<p class=config__section-desc>These apps bypass spoofing and mounts are visible - caution"),Lt=y("<div class=config__apps>"),Jn=y('<div class=config__section-header><h3 class=config__section-title><svg width=18 height=18 viewBox="0 0 24 24"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z">'),qn=y("<div class=config__system-toggle><span class=config__system-label>System Apps"),Qn=y('<div class="config__apps config__apps--scrollable">'),er=y('<div class=config><div class=config__toolbar><div class=config__search><svg width=20 height=20 viewBox="0 0 24 24"class=config__search-icon><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z">'),Rt=y("<div class=config__empty>"),tr=y('<div class="config__app config__app--excluded"><div class=config__app-info><div class=config__app-name></div><div class=config__app-package>'),sr=y('<div class="config__app config__app--skeleton"><div class=config__skeleton-info>'),nr=y("<span class=config__sys-badge>SYS"),rr=y('<div class="config__app config__app--available"><div class=config__app-info><div class="config__app-name config__app-name--with-badge"></div><div class="config__app-package config__app-package--small">');const Ze=()=>d.currentTheme(),mt=new Map,it=new Set,lr=(e,t)=>{const s=()=>{t.style.display="none";const n=t.nextElementSibling;n&&(n.style.display="block")};if(mt.has(e)){t.src=mt.get(e),t.style.opacity="1";return}if(typeof globalThis.ksu<"u"&&typeof globalThis.ksu.getPackagesIcons=="function")try{const n=globalThis.ksu.getPackagesIcons(JSON.stringify([e]),100);if(n){const l=JSON.parse(n);if(l?.[0]?.icon){mt.set(e,l[0].icon),t.src=l[0].icon,t.style.opacity="1";return}}}catch(n){console.error("[ZM] Icon error:",e,n)}s()},or=(e,t)=>{const s=e.querySelector("img");if(!s)return;const n=new IntersectionObserver(l=>{l.forEach(r=>{r.isIntersecting&&(lr(t,s),n.unobserve(e),n.disconnect(),it.delete(n))})},{rootMargin:"100px",threshold:.1});it.add(n),n.observe(e)},Zt=e=>{const t=e.size||40,s=t-8,n=t-12,l=t===40?"config__icon--40":"config__icon--36";return(()=>{var r=Yn(),o=r.firstChild,i=o.nextSibling;return Wt(a=>a&&or(a,e.packageName),r),z(r,`config__icon ${l}`),o.addEventListener("error",a=>{a.target.style.display="none",a.target.nextElementSibling?.removeAttribute("style")}),H(o,"width",s),H(o,"height",s),H(i,"width",n),H(i,"height",n),N(()=>H(i,"fill",Ze().textTertiary)),r})()};function ir(){const[e,t]=T(""),[s,n]=T(""),[l,r]=T(!1);let o;ct(()=>{d.loadInstalledApps()}),ie(()=>{const c=e();clearTimeout(o),o=window.setTimeout(()=>{n(c)},300)}),dt(()=>{o&&clearTimeout(o),d.stopPolling(),it.forEach(c=>c.disconnect()),it.clear()});const i=()=>new Set(d.excludedUids().map(c=>c.uid)),a=()=>{const c=s().toLowerCase(),b=d.excludedUids();return c?b.filter(x=>x.appName.toLowerCase().includes(c)||x.packageName.toLowerCase().includes(c)||x.uid.toString().includes(c)):b},h=()=>{const c=s().toLowerCase(),b=i();let x=d.installedApps().filter(S=>!b.has(S.uid));return l()||(x=x.filter(S=>!S.isSystemApp)),c&&(x=x.filter(S=>S.appName.toLowerCase().includes(c)||S.packageName.toLowerCase().includes(c)||S.uid.toString().includes(c))),x.sort((S,f)=>S.appName.localeCompare(f.appName))},m=async c=>{await d.excludeUid(c.uid,c.packageName,c.appName)};return(()=>{var c=er(),b=c.firstChild,x=b.firstChild,S=x.firstChild;return u(x,p(es,{placeholder:"Search apps...",get value(){return e()},onInput:f=>t(f.currentTarget.value),fullWidth:!0}),S),u(c,p(se,{get children(){return[(()=>{var f=Xn(),g=f.firstChild,v=g.firstChild;return u(f,p($t,{variant:"error",size:"small",get children(){return d.excludedUids().length}}),null),N(()=>H(v,"fill",Ze().colorError)),f})(),jn(),p(X,{get when(){return a().length>0},get fallback(){return(()=>{var f=Rt();return u(f,()=>s()?"No matches":"No excluded apps"),f})()},get children(){var f=Lt();return u(f,p(he,{get each(){return a()},children:g=>(()=>{var v=tr(),w=v.firstChild,A=w.firstChild,M=A.nextSibling;return u(v,p(Zt,{get packageName(){return g.packageName},size:40}),w),u(A,()=>g.appName),u(M,()=>g.packageName),u(v,p(ge,{variant:"ghost",size:"small",onClick:()=>d.includeUid(g.uid),get style(){return`color: ${Ze().colorError}; padding: 6px 10px;`},children:"REMOVE"}),null),v})()})),f}})]}}),null),u(c,p(se,{get children(){return[(()=>{var f=Jn(),g=f.firstChild,v=g.firstChild;return u(g,()=>l()?"All Apps":"User Apps",null),u(f,p($t,{variant:"info",size:"small",get children(){return h().length}}),null),N(()=>H(v,"fill",Ze().textAccent)),f})(),(()=>{var f=qn();return f.firstChild,u(f,p(Te,{get checked(){return l()},onChange:r}),null),f})(),p(X,{get when(){return!d.loading.apps},get fallback(){return(()=>{var f=Lt();return u(f,p(he,{each:[1,2,3,4,5],children:()=>(()=>{var g=sr(),v=g.firstChild;return u(g,p(U,{width:"36px",height:"36px",borderRadius:"10px"}),v),u(v,p(U,{width:"120px",height:"16px",borderRadius:"6px"}),null),u(v,p(U,{width:"180px",height:"12px",borderRadius:"4px"}),null),u(g,p(U,{width:"64px",height:"28px",borderRadius:"14px"}),null),g})()})),f})()},get children(){return p(X,{get when(){return h().length>0},get fallback(){return(()=>{var f=Rt();return u(f,(()=>{var g=fe(()=>!!s());return()=>g()?"No matches":l()?"No apps found":"No user apps found"})()),f})()},get children(){var f=Qn();return u(f,p(he,{get each(){return h()},children:g=>(()=>{var v=rr(),w=v.firstChild,A=w.firstChild,M=A.nextSibling;return u(v,p(Zt,{get packageName(){return g.packageName},size:36}),w),u(A,()=>g.appName,null),u(A,p(X,{get when(){return g.isSystemApp},get children(){return nr()}}),null),u(M,()=>g.packageName),u(v,p(ge,{variant:"ghost",size:"small",onClick:()=>m(g),style:"padding: 6px 10px;",children:"EXCLUDE"}),null),v})()})),f}})}})]}}),null),N(()=>H(S,"fill",Ze().textTertiary)),c})()}var ar=y("<div>"),cr=y("<div><div></div><h2>");function dr(e){const[t,s]=T(!1),[n,l]=T(100),[r,o]=T(0);return ie(()=>{if(e.open){s(!0),setTimeout(()=>{l(0),o(1)},10);const i=a=>{a.key==="Escape"&&e.onClose()};document.addEventListener("keydown",i),dt(()=>document.removeEventListener("keydown",i))}else l(100),o(0),setTimeout(()=>s(!1),300)}),p(X,{get when(){return t()},get children(){return[(()=>{var i=ar();return gt(i,"click",e.onClose),N(a=>q(i,`
          position: fixed;
          inset: 0;
          background: rgba(0, 0, 0, 0.6);
          backdrop-filter: blur(4px);
          -webkit-backdrop-filter: blur(4px);
          z-index: 200;
          opacity: ${r()};
          transition: opacity 0.3s ease;
        `,a)),i})(),(()=>{var i=cr(),a=i.firstChild,h=a.nextSibling;return u(h,()=>e.title),u(i,()=>e.children,null),N(m=>{var c=`
          position: fixed;
          bottom: 0;
          left: 0;
          right: 0;
          background: ${d.currentTheme().gradientSecondary};
          border-top-left-radius: ${ze.radiusXLarge};
          border-top-right-radius: ${ze.radiusXLarge};
          padding: 24px 20px;
          padding-bottom: calc(24px + env(safe-area-inset-bottom));
          z-index: 201;
          max-height: 85vh;
          overflow-y: auto;
          transform: translateY(${n()}%);
          transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        `,b=`
            width: 40px;
            height: 4px;
            background: ${d.currentTheme().textTertiary};
            border-radius: 2px;
            margin: 0 auto 20px;
          `,x=`
            font-family: ${ze.fontDisplay};
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            background: ${d.currentTheme().gradientPrimary};
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0 0 24px;
          `;return m.e=q(i,c,m.e),m.t=q(a,b,m.t),m.a=q(h,x,m.a),m},{e:void 0,t:void 0,a:void 0}),i})()]}})}Ae(["click"]);var ur=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"></path></svg>Appearance'),gr=y('<div class=settings__group><div class=settings__label>Theme</div><div class=settings__themes><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M12.43 2.3c-2.38-.59-4.68-.27-6.63.64-.35.16-.41.64-.1.86C8.3 5.6 10 8.6 10 12c0 3.4-1.7 6.4-4.3 8.2-.32.22-.26.7.09.86 1.28.6 2.71.94 4.21.94 6.05 0 10.85-5.38 9.87-11.6-.61-3.92-3.59-7.16-7.44-8.1z"></path></svg></div><div>Dark</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M6.76 4.84l-1.8-1.79-1.41 1.41 1.79 1.79 1.42-1.41zM4 10.5H1v2h3v-2zm9-9.95h-2V3.5h2V.55zm7.45 3.91l-1.41-1.41-1.79 1.79 1.41 1.41 1.79-1.79zm-3.21 13.7l1.79 1.8 1.41-1.41-1.8-1.79-1.4 1.4zM20 10.5v2h3v-2h-3zm-8-5c-3.31 0-6 2.69-6 6s2.69 6 6 6 6-2.69 6-6-2.69-6-6-6zm-1 16.95h2V19.5h-2v2.95zm-7.45-3.91l1.41 1.41 1.79-1.8-1.41-1.41-1.79 1.8z"></path></svg></div><div>Light</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><path d="M12 4V2A10 10 0 0 0 2 12h2a8 8 0 0 1 8-8zm0 16a8 8 0 0 1-8-8H2a10 10 0 0 0 10 10v-2zm8-8a8 8 0 0 1-8 8v2a10 10 0 0 0 10-10h-2zm-8-8a8 8 0 0 1 8 8h2A10 10 0 0 0 12 2v2z"></path></svg></div><div>Auto</div></button><button><div class=settings__theme-icon><svg width=24 height=24 viewBox="0 0 24 24"><circle cx=12 cy=12 r=10></circle></svg></div><div>AMOLED'),fr=y("<div><div class=settings__label>Accent Color</div><div class=settings__colors>"),hr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Auto System Color</div><div class=settings__item-desc>Use device's accent color"),pr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Animations</div><div class=settings__item-desc>Enable bouncy animations"),mr=y("<div class=settings__item><div class=settings__item-content><div class=settings__item-label>Fix Bottom Nav</div><div class=settings__item-desc>Pin navigation to bottom of screen"),vr=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"></path></svg>Engine'),_r=y("<div class=settings__engine-controls><div class=settings__item><div class=settings__item-content><div class=settings__item-label>Auto-start on boot</div><div class=settings__item-desc>Start ZeroMount engine automatically</div></div></div><div class=settings__item><div class=settings__item-content><div class=settings__item-label>Verbose logging</div><div class=settings__item-desc>Log detailed operation info"),yr=y('<h3 class=settings__section-title><svg class=settings__section-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"></path></svg>About'),br=y('<div class=settings__about><div class=logo-container><div class=logo-ring></div><div class=logo-inner><svg width=56 height=56 viewBox="0 0 24 24"fill=url(#shieldGradient)><defs><linearGradient id=shieldGradient x1=0% y1=0% x2=100% y2=100%><stop offset=0% style=stop-color:#FF6B6B></stop><stop offset=50% style=stop-color:#FF8E53></stop><stop offset=100% style=stop-color:#FFC107></stop></linearGradient></defs><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"></path></svg></div></div><div class=settings__about-title>ZeroMount</div><div class=settings__about-badge>GHOST</div><button class=settings__repo-btn><svg class=settings__repo-icon viewBox="0 0 24 24"fill=currentColor><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path></svg>Repository</button><div class=settings__actions></div><div class=settings__footer>Made with <span class=glow-text>passion</span> for the Android <span class=glow-text>community'),wr=y("<div class=settings__modal-content><p class=settings__modal-text>This will permanently delete all <!> VFS rules. This action cannot be undone.</p><div class=settings__modal-actions>"),$r=y("<div class=settings>"),xr=y("<button>");const Ar=[{name:"Cyan",color:"#00BCD4"},{name:"Orange",color:"#FF8E53"},{name:"Gold",color:"#FFC107"},{name:"Emerald",color:"#00D68F"},{name:"Azure",color:"#00B4D8"},{name:"Purple",color:"#764BA2"},{name:"White",color:"#FFFFFF"},{name:"Slate",color:"#64748B"}];function Sr(){const[e,t]=T(!1),s=()=>d.settings.accentColor,n=i=>{d.updateSettings({theme:i})},l=async()=>{await d.clearAllRules(),t(!1)},r=()=>{const i=`
Zero-Mount
Driver: ${d.systemInfo.driverVersion}
Kernel: ${d.systemInfo.kernelVersion}
SUSFS: ${d.systemInfo.susfsVersion}
Active Rules: ${d.stats.activeRules}
Excluded Apps: ${d.stats.excludedUids}
Engine: ${d.engineActive()?"Active":"Inactive"}
    `.trim();navigator.clipboard.writeText(i).then(()=>{d.showToast("Debug info copied to clipboard","success")})},o=i=>d.settings.theme===i;return(()=>{var i=$r();return u(i,p(se,{get children(){return[ur(),(()=>{var a=gr(),h=a.firstChild,m=h.nextSibling,c=m.firstChild,b=c.firstChild,x=b.firstChild,S=b.nextSibling,f=c.nextSibling,g=f.firstChild,v=g.firstChild,w=g.nextSibling,A=f.nextSibling,M=A.firstChild,E=M.firstChild,F=M.nextSibling,O=A.nextSibling,V=O.firstChild,Z=V.firstChild,J=V.nextSibling;return c.$$click=()=>n("dark"),f.$$click=()=>n("light"),A.$$click=()=>n("auto"),O.$$click=()=>n("amoled"),N($=>{var ae=`settings__theme ${o("dark")?"settings__theme--active":""}`,ce=o("dark")?"var(--text-accent)":"var(--text-secondary)",ue=`settings__theme-label ${o("dark")?"settings__theme-label--active":""}`,oe=`settings__theme ${o("light")?"settings__theme--active":""}`,ne=o("light")?"var(--text-accent)":"var(--text-secondary)",re=`settings__theme-label ${o("light")?"settings__theme-label--active":""}`,D=`settings__theme ${o("auto")?"settings__theme--active":""}`,ve=o("auto")?"var(--text-accent)":"var(--text-secondary)",_e=`settings__theme-label ${o("auto")?"settings__theme-label--active":""}`,we=`settings__theme ${o("amoled")?"settings__theme--active":""}`,Ce=o("amoled")?"var(--text-accent)":"var(--text-secondary)",Ie=`settings__theme-label ${o("amoled")?"settings__theme-label--active":""}`;return ae!==$.e&&z(c,$.e=ae),ce!==$.t&&H(x,"fill",$.t=ce),ue!==$.a&&z(S,$.a=ue),oe!==$.o&&z(f,$.o=oe),ne!==$.i&&H(v,"fill",$.i=ne),re!==$.n&&z(w,$.n=re),D!==$.s&&z(A,$.s=D),ve!==$.h&&H(E,"fill",$.h=ve),_e!==$.r&&z(F,$.r=_e),we!==$.d&&z(O,$.d=we),Ce!==$.l&&H(Z,"fill",$.l=Ce),Ie!==$.u&&z(J,$.u=Ie),$},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),a})(),(()=>{var a=fr(),h=a.firstChild,m=h.nextSibling;return u(m,p(he,{each:Ar,children:c=>(()=>{var b=xr();return b.$$click=()=>{d.settings.autoAccentColor||d.updateSettings({accentColor:c.color})},N(x=>{var S=`settings__color ${s()===c.color?"settings__color--active":""} ${d.settings.autoAccentColor?"settings__color--disabled":""}`,f=d.settings.autoAccentColor,g=c.color,v=s()===c.color?`0 0 0 3px ${c.color}40`:"none";return S!==x.e&&z(b,x.e=S),f!==x.t&&(b.disabled=x.t=f),g!==x.a&&te(b,"background",x.a=g),v!==x.o&&te(b,"box-shadow",x.o=v),x},{e:void 0,t:void 0,a:void 0,o:void 0}),b})()})),N(()=>z(a,`settings__group ${d.settings.autoAccentColor?"settings__group--disabled":""}`)),a})(),(()=>{var a=hr();return a.firstChild,u(a,p(Te,{get checked(){return d.settings.autoAccentColor},onChange:async h=>{if(d.updateSettings({autoAccentColor:h}),h){const m=await K.fetchSystemColor();m&&d.updateSettings({accentColor:m})}}}),null),a})(),(()=>{var a=pr();return a.firstChild,u(a,p(Te,{get checked(){return d.settings.animationsEnabled},onChange:h=>d.updateSettings({animationsEnabled:h})}),null),a})(),(()=>{var a=mr();return a.firstChild,u(a,p(Te,{get checked(){return d.settings.fixedNav},onChange:h=>d.updateSettings({fixedNav:h})}),null),a})()]}}),null),u(i,p(se,{get children(){return[vr(),(()=>{var a=_r(),h=a.firstChild;h.firstChild;var m=h.nextSibling;return m.firstChild,u(h,p(Te,{get checked(){return d.settings.autoStartOnBoot},onChange:c=>d.updateSettings({autoStartOnBoot:c})}),null),u(m,p(Te,{get checked(){return d.settings.verboseLogging},onChange:async c=>{d.updateSettings({verboseLogging:c}),await K.setVerboseLogging(c)}}),null),u(a,p(ge,{variant:"danger",fullWidth:!0,onClick:()=>t(!0),children:"CLEAR ALL RULES"}),null),a})()]}}),null),u(i,p(se,{get children(){return[yr(),(()=>{var a=br(),h=a.firstChild,m=h.nextSibling,c=m.nextSibling,b=c.nextSibling,x=b.nextSibling;return b.$$click=()=>window.open(Is,"_blank"),u(x,p(ge,{variant:"secondary",size:"small",onClick:r,children:"Copy Debug Info"}),null),u(x,p(ge,{variant:"secondary",size:"small",onClick:()=>{const S={rules:d.rules(),excludedUids:d.excludedUids(),settings:d.settings,exportDate:new Date().toISOString()},f=new Blob([JSON.stringify(S,null,2)],{type:"application/json"}),g=URL.createObjectURL(f),v=document.createElement("a");v.href=g,v.download="zeromount-config.json",v.click(),URL.revokeObjectURL(g),d.showToast("Config exported","success")},children:"Export Config"}),null),a})()]}}),null),u(i,p(dr,{get open(){return e()},onClose:()=>t(!1),title:"Clear All Rules?",get children(){var a=wr(),h=a.firstChild,m=h.firstChild,c=m.nextSibling;c.nextSibling;var b=h.nextSibling;return u(h,()=>d.stats.activeRules,c),u(b,p(ge,{variant:"ghost",onClick:()=>t(!1),children:"Cancel"}),null),u(b,p(ge,{variant:"danger",onClick:l,get loading(){return d.loading.rules},children:"CLEAR ALL"}),null),a}}),null),i})()}Ae(["click"]);var Mr=y("<div><main>"),Cr=y("<div>Loading...");function Ir(){const[e,t]=T(!1);return ct(async()=>{await d.loadInitialData(),t(!0)}),p(X,{get when(){return e()},get fallback(){return(()=>{var s=Cr();return N(n=>q(s,`
            min-height: 100vh;
            min-height: 100dvh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: ${d.currentTheme().bgPrimary};
            color: ${d.currentTheme().textPrimary};
            font-family: ${d.currentTheme().fontBody};
          `,n)),s})()},get children(){var s=Mr(),n=s.firstChild;return u(s,p(xs,{}),n),u(n,p(_s,{get children(){return[p(je,{get when(){return d.activeTab()==="status"},get children(){return p(Dn,{})}}),p(je,{get when(){return d.activeTab()==="modules"},get children(){return p(Hn,{})}}),p(je,{get when(){return d.activeTab()==="config"},get children(){return p(ir,{})}}),p(je,{get when(){return d.activeTab()==="settings"},get children(){return p(Sr,{})}})]}})),u(s,p(qs,{get activeTab(){return d.activeTab()},get onTabChange(){return d.setActiveTab}}),null),u(s,p(X,{get when(){return d.toast()},children:l=>p(nn,{get message(){return l().message},get type(){return l().type},visible:!0})}),null),N(l=>{var r=`
          min-height: 100vh;
          min-height: 100dvh;
          background: ${d.currentTheme().bgPrimary};
          color: ${d.currentTheme().textPrimary};
          font-family: ${d.currentTheme().fontBody};
          overflow-x: hidden;
        `,o=`
            padding-bottom: ${d.settings.fixedNav?"calc(100px + 48px + env(safe-area-inset-bottom))":"calc(100px + env(safe-area-inset-bottom))"};
          `;return l.e=q(s,r,l.e),l.t=q(n,o,l.t),l},{e:void 0,t:void 0}),s}})}const kr=document.getElementById("root");bs(()=>p(Ir,{}),kr);
